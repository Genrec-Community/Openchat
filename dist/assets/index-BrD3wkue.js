(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=r(c);fetch(c.href,u)}})();function Sv(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function jv(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var a=l.default;if(typeof a=="function"){var r=function i(){var c=!1;try{c=this instanceof i}catch{}return c?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};r.prototype=a.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(l).forEach(function(i){var c=Object.getOwnPropertyDescriptor(l,i);Object.defineProperty(r,i,c.get?c:{enumerable:!0,get:function(){return l[i]}})}),r}var Dc={exports:{}},br={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function kv(){if(S0)return br;S0=1;var l=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(i,c,u){var f=null;if(u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:l,type:i,key:f,ref:c!==void 0?c:null,props:u}}return br.Fragment=a,br.jsx=r,br.jsxs=r,br}var j0;function Ev(){return j0||(j0=1,Dc.exports=kv()),Dc.exports}var h=Ev(),Uc={exports:{}},de={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function Nv(){if(k0)return de;k0=1;var l=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=x&&j[x]||j["@@iterator"],typeof j=="function"?j:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,B={};function z(j,K,ee){this.props=j,this.context=K,this.refs=B,this.updater=ee||E}z.prototype.isReactComponent={},z.prototype.setState=function(j,K){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,K,"setState")},z.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function q(){}q.prototype=z.prototype;function $(j,K,ee){this.props=j,this.context=K,this.refs=B,this.updater=ee||E}var U=$.prototype=new q;U.constructor=$,T(U,z.prototype),U.isPureReactComponent=!0;var D=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},Q=Object.prototype.hasOwnProperty;function L(j,K,ee,W,ae,be){return ee=be.ref,{$$typeof:l,type:j,key:K,ref:ee!==void 0?ee:null,props:be}}function P(j,K){return L(j.type,K,void 0,void 0,void 0,j.props)}function V(j){return typeof j=="object"&&j!==null&&j.$$typeof===l}function Z(j){var K={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ee){return K[ee]})}var F=/\/+/g;function oe(j,K){return typeof j=="object"&&j!==null&&j.key!=null?Z(""+j.key):K.toString(36)}function Re(){}function Ne(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Re,Re):(j.status="pending",j.then(function(K){j.status==="pending"&&(j.status="fulfilled",j.value=K)},function(K){j.status==="pending"&&(j.status="rejected",j.reason=K)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function tt(j,K,ee,W,ae){var be=typeof j;(be==="undefined"||be==="boolean")&&(j=null);var ce=!1;if(j===null)ce=!0;else switch(be){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(j.$$typeof){case l:case a:ce=!0;break;case y:return ce=j._init,tt(ce(j._payload),K,ee,W,ae)}}if(ce)return ae=ae(j),ce=W===""?"."+oe(j,0):W,D(ae)?(ee="",ce!=null&&(ee=ce.replace(F,"$&/")+"/"),tt(ae,K,ee,"",function(mn){return mn})):ae!=null&&(V(ae)&&(ae=P(ae,ee+(ae.key==null||j&&j.key===ae.key?"":(""+ae.key).replace(F,"$&/")+"/")+ce)),K.push(ae)),1;ce=0;var ft=W===""?".":W+":";if(D(j))for(var Ce=0;Ce<j.length;Ce++)W=j[Ce],be=ft+oe(W,Ce),ce+=tt(W,K,ee,be,ae);else if(Ce=w(j),typeof Ce=="function")for(j=Ce.call(j),Ce=0;!(W=j.next()).done;)W=W.value,be=ft+oe(W,Ce++),ce+=tt(W,K,ee,be,ae);else if(be==="object"){if(typeof j.then=="function")return tt(Ne(j),K,ee,W,ae);throw K=String(j),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ce}function G(j,K,ee){if(j==null)return j;var W=[],ae=0;return tt(j,W,"","",function(be){return K.call(ee,be,ae++)}),W}function I(j){if(j._status===-1){var K=j._result;K=K(),K.then(function(ee){(j._status===0||j._status===-1)&&(j._status=1,j._result=ee)},function(ee){(j._status===0||j._status===-1)&&(j._status=2,j._result=ee)}),j._status===-1&&(j._status=0,j._result=K)}if(j._status===1)return j._result.default;throw j._result}var ie=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function Te(){}return de.Children={map:G,forEach:function(j,K,ee){G(j,function(){K.apply(this,arguments)},ee)},count:function(j){var K=0;return G(j,function(){K++}),K},toArray:function(j){return G(j,function(K){return K})||[]},only:function(j){if(!V(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},de.Component=z,de.Fragment=r,de.Profiler=c,de.PureComponent=$,de.StrictMode=i,de.Suspense=p,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,de.__COMPILER_RUNTIME={__proto__:null,c:function(j){return R.H.useMemoCache(j)}},de.cache=function(j){return function(){return j.apply(null,arguments)}},de.cloneElement=function(j,K,ee){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var W=T({},j.props),ae=j.key,be=void 0;if(K!=null)for(ce in K.ref!==void 0&&(be=void 0),K.key!==void 0&&(ae=""+K.key),K)!Q.call(K,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&K.ref===void 0||(W[ce]=K[ce]);var ce=arguments.length-2;if(ce===1)W.children=ee;else if(1<ce){for(var ft=Array(ce),Ce=0;Ce<ce;Ce++)ft[Ce]=arguments[Ce+2];W.children=ft}return L(j.type,ae,void 0,void 0,be,W)},de.createContext=function(j){return j={$$typeof:f,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:u,_context:j},j},de.createElement=function(j,K,ee){var W,ae={},be=null;if(K!=null)for(W in K.key!==void 0&&(be=""+K.key),K)Q.call(K,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ae[W]=K[W]);var ce=arguments.length-2;if(ce===1)ae.children=ee;else if(1<ce){for(var ft=Array(ce),Ce=0;Ce<ce;Ce++)ft[Ce]=arguments[Ce+2];ae.children=ft}if(j&&j.defaultProps)for(W in ce=j.defaultProps,ce)ae[W]===void 0&&(ae[W]=ce[W]);return L(j,be,void 0,void 0,null,ae)},de.createRef=function(){return{current:null}},de.forwardRef=function(j){return{$$typeof:m,render:j}},de.isValidElement=V,de.lazy=function(j){return{$$typeof:y,_payload:{_status:-1,_result:j},_init:I}},de.memo=function(j,K){return{$$typeof:g,type:j,compare:K===void 0?null:K}},de.startTransition=function(j){var K=R.T,ee={};R.T=ee;try{var W=j(),ae=R.S;ae!==null&&ae(ee,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Te,ie)}catch(be){ie(be)}finally{R.T=K}},de.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},de.use=function(j){return R.H.use(j)},de.useActionState=function(j,K,ee){return R.H.useActionState(j,K,ee)},de.useCallback=function(j,K){return R.H.useCallback(j,K)},de.useContext=function(j){return R.H.useContext(j)},de.useDebugValue=function(){},de.useDeferredValue=function(j,K){return R.H.useDeferredValue(j,K)},de.useEffect=function(j,K,ee){var W=R.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(j,K)},de.useId=function(){return R.H.useId()},de.useImperativeHandle=function(j,K,ee){return R.H.useImperativeHandle(j,K,ee)},de.useInsertionEffect=function(j,K){return R.H.useInsertionEffect(j,K)},de.useLayoutEffect=function(j,K){return R.H.useLayoutEffect(j,K)},de.useMemo=function(j,K){return R.H.useMemo(j,K)},de.useOptimistic=function(j,K){return R.H.useOptimistic(j,K)},de.useReducer=function(j,K,ee){return R.H.useReducer(j,K,ee)},de.useRef=function(j){return R.H.useRef(j)},de.useState=function(j){return R.H.useState(j)},de.useSyncExternalStore=function(j,K,ee){return R.H.useSyncExternalStore(j,K,ee)},de.useTransition=function(){return R.H.useTransition()},de.version="19.1.1",de}var E0;function hu(){return E0||(E0=1,Uc.exports=Nv()),Uc.exports}var S=hu(),Lc={exports:{}},xr={},qc={exports:{}},Bc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function Tv(){return N0||(N0=1,(function(l){function a(G,I){var ie=G.length;G.push(I);e:for(;0<ie;){var Te=ie-1>>>1,j=G[Te];if(0<c(j,I))G[Te]=I,G[ie]=j,ie=Te;else break e}}function r(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var I=G[0],ie=G.pop();if(ie!==I){G[0]=ie;e:for(var Te=0,j=G.length,K=j>>>1;Te<K;){var ee=2*(Te+1)-1,W=G[ee],ae=ee+1,be=G[ae];if(0>c(W,ie))ae<j&&0>c(be,W)?(G[Te]=be,G[ae]=ie,Te=ae):(G[Te]=W,G[ee]=ie,Te=ee);else if(ae<j&&0>c(be,ie))G[Te]=be,G[ae]=ie,Te=ae;else break e}}return I}function c(G,I){var ie=G.sortIndex-I.sortIndex;return ie!==0?ie:G.id-I.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;l.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();l.unstable_now=function(){return f.now()-m}}var p=[],g=[],y=1,x=null,w=3,E=!1,T=!1,B=!1,z=!1,q=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function D(G){for(var I=r(g);I!==null;){if(I.callback===null)i(g);else if(I.startTime<=G)i(g),I.sortIndex=I.expirationTime,a(p,I);else break;I=r(g)}}function R(G){if(B=!1,D(G),!T)if(r(p)!==null)T=!0,Q||(Q=!0,oe());else{var I=r(g);I!==null&&tt(R,I.startTime-G)}}var Q=!1,L=-1,P=5,V=-1;function Z(){return z?!0:!(l.unstable_now()-V<P)}function F(){if(z=!1,Q){var G=l.unstable_now();V=G;var I=!0;try{e:{T=!1,B&&(B=!1,$(L),L=-1),E=!0;var ie=w;try{t:{for(D(G),x=r(p);x!==null&&!(x.expirationTime>G&&Z());){var Te=x.callback;if(typeof Te=="function"){x.callback=null,w=x.priorityLevel;var j=Te(x.expirationTime<=G);if(G=l.unstable_now(),typeof j=="function"){x.callback=j,D(G),I=!0;break t}x===r(p)&&i(p),D(G)}else i(p);x=r(p)}if(x!==null)I=!0;else{var K=r(g);K!==null&&tt(R,K.startTime-G),I=!1}}break e}finally{x=null,w=ie,E=!1}I=void 0}}finally{I?oe():Q=!1}}}var oe;if(typeof U=="function")oe=function(){U(F)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Ne=Re.port2;Re.port1.onmessage=F,oe=function(){Ne.postMessage(null)}}else oe=function(){q(F,0)};function tt(G,I){L=q(function(){G(l.unstable_now())},I)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(G){G.callback=null},l.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},l.unstable_getCurrentPriorityLevel=function(){return w},l.unstable_next=function(G){switch(w){case 1:case 2:case 3:var I=3;break;default:I=w}var ie=w;w=I;try{return G()}finally{w=ie}},l.unstable_requestPaint=function(){z=!0},l.unstable_runWithPriority=function(G,I){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ie=w;w=G;try{return I()}finally{w=ie}},l.unstable_scheduleCallback=function(G,I,ie){var Te=l.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Te+ie:Te):ie=Te,G){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ie+j,G={id:y++,callback:I,priorityLevel:G,startTime:ie,expirationTime:j,sortIndex:-1},ie>Te?(G.sortIndex=ie,a(g,G),r(p)===null&&G===r(g)&&(B?($(L),L=-1):B=!0,tt(R,ie-Te))):(G.sortIndex=j,a(p,G),T||E||(T=!0,Q||(Q=!0,oe()))),G},l.unstable_shouldYield=Z,l.unstable_wrapCallback=function(G){var I=w;return function(){var ie=w;w=I;try{return G.apply(this,arguments)}finally{w=ie}}}})(Bc)),Bc}var T0;function zv(){return T0||(T0=1,qc.exports=Tv()),qc.exports}var $c={exports:{}},st={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function Av(){if(z0)return st;z0=1;var l=hu();function a(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,g,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:p,containerInfo:g,implementation:y}}var f=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return st.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,st.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return u(p,g,null,y)},st.flushSync=function(p){var g=f.T,y=i.p;try{if(f.T=null,i.p=2,p)return p()}finally{f.T=g,i.p=y,i.d.f()}},st.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},st.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},st.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,E=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:w,fetchPriority:E}):y==="script"&&i.d.X(p,{crossOrigin:x,integrity:w,fetchPriority:E,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},st.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=m(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},st.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin);i.d.L(p,y,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},st.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=m(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},st.requestFormReset=function(p){i.d.r(p)},st.unstable_batchedUpdates=function(p,g){return p(g)},st.useFormState=function(p,g,y){return f.H.useFormState(p,g,y)},st.useFormStatus=function(){return f.H.useHostTransitionStatus()},st.version="19.1.1",st}var A0;function Ov(){if(A0)return $c.exports;A0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(a){console.error(a)}}return l(),$c.exports=Av(),$c.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function Rv(){if(O0)return xr;O0=1;var l=zv(),a=hu(),r=Ov();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(i(188))}function p(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var n=e,s=t;;){var o=n.return;if(o===null)break;var d=o.alternate;if(d===null){if(s=o.return,s!==null){n=s;continue}break}if(o.child===d.child){for(d=o.child;d;){if(d===n)return m(o),e;if(d===s)return m(o),t;d=d.sibling}throw Error(i(188))}if(n.return!==s.return)n=o,s=d;else{for(var v=!1,b=o.child;b;){if(b===n){v=!0,n=o,s=d;break}if(b===s){v=!0,s=o,n=d;break}b=b.sibling}if(!v){for(b=d.child;b;){if(b===n){v=!0,n=d,s=o;break}if(b===s){v=!0,s=d,n=o;break}b=b.sibling}if(!v)throw Error(i(189))}}if(n.alternate!==s)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),U=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function oe(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Symbol.for("react.client.reference");function Ne(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Re?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case z:return"Profiler";case B:return"StrictMode";case R:return"Suspense";case Q:return"SuspenseList";case V:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case U:return(e.displayName||"Context")+".Provider";case $:return(e._context.displayName||"Context")+".Consumer";case D:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return t=e.displayName||null,t!==null?t:Ne(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return Ne(e(t))}catch{}}return null}var tt=Array.isArray,G=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Te=[],j=-1;function K(e){return{current:e}}function ee(e){0>j||(e.current=Te[j],Te[j]=null,j--)}function W(e,t){j++,Te[j]=e.current,e.current=t}var ae=K(null),be=K(null),ce=K(null),ft=K(null);function Ce(e,t){switch(W(ce,t),W(be,e),W(ae,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Wh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Wh(t),e=Ih(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ee(ae),W(ae,e)}function mn(){ee(ae),ee(be),ee(ce)}function bl(e){e.memoizedState!==null&&W(ft,e);var t=ae.current,n=Ih(t,e.type);t!==n&&(W(be,e),W(ae,n))}function qr(e){be.current===e&&(ee(ae),ee(be)),ft.current===e&&(ee(ft),mr._currentValue=ie)}var xl=Object.prototype.hasOwnProperty,_l=l.unstable_scheduleCallback,wl=l.unstable_cancelCallback,tg=l.unstable_shouldYield,ng=l.unstable_requestPaint,Bt=l.unstable_now,ag=l.unstable_getCurrentPriorityLevel,Au=l.unstable_ImmediatePriority,Ou=l.unstable_UserBlockingPriority,Br=l.unstable_NormalPriority,sg=l.unstable_LowPriority,Ru=l.unstable_IdlePriority,rg=l.log,ig=l.unstable_setDisableYieldValue,ws=null,ht=null;function gn(e){if(typeof rg=="function"&&ig(e),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(ws,e)}catch{}}var mt=Math.clz32?Math.clz32:cg,lg=Math.log,og=Math.LN2;function cg(e){return e>>>=0,e===0?32:31-(lg(e)/og|0)|0}var $r=256,Hr=4194304;function Xn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Gr(e,t,n){var s=e.pendingLanes;if(s===0)return 0;var o=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var b=s&134217727;return b!==0?(s=b&~d,s!==0?o=Xn(s):(v&=b,v!==0?o=Xn(v):n||(n=b&~e,n!==0&&(o=Xn(n))))):(b=s&~d,b!==0?o=Xn(b):v!==0?o=Xn(v):n||(n=s&~e,n!==0&&(o=Xn(n)))),o===0?0:t!==0&&t!==o&&(t&d)===0&&(d=o&-o,n=t&-t,d>=n||d===32&&(n&4194048)!==0)?t:o}function Ss(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ug(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cu(){var e=$r;return $r<<=1,($r&4194048)===0&&($r=256),e}function Mu(){var e=Hr;return Hr<<=1,(Hr&62914560)===0&&(Hr=4194304),e}function Sl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function js(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function dg(e,t,n,s,o,d){var v=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var b=e.entanglements,_=e.expirationTimes,O=e.hiddenUpdates;for(n=v&~n;0<n;){var H=31-mt(n),X=1<<H;b[H]=0,_[H]=-1;var C=O[H];if(C!==null)for(O[H]=null,H=0;H<C.length;H++){var M=C[H];M!==null&&(M.lane&=-536870913)}n&=~X}s!==0&&Du(e,s,0),d!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~t))}function Du(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-mt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&4194090}function Uu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-mt(n),o=1<<s;o&t|e[s]&t&&(e[s]|=t),n&=~o}}function jl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function kl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Lu(){var e=I.p;return e!==0?e:(e=window.event,e===void 0?32:v0(e.type))}function fg(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}var pn=Math.random().toString(36).slice(2),nt="__reactFiber$"+pn,lt="__reactProps$"+pn,ma="__reactContainer$"+pn,El="__reactEvents$"+pn,hg="__reactListeners$"+pn,mg="__reactHandles$"+pn,qu="__reactResources$"+pn,ks="__reactMarker$"+pn;function Nl(e){delete e[nt],delete e[lt],delete e[El],delete e[hg],delete e[mg]}function ga(e){var t=e[nt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[nt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=n0(e);e!==null;){if(n=e[nt])return n;e=n0(e)}return t}e=n,n=e.parentNode}return null}function pa(e){if(e=e[nt]||e[ma]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Es(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function va(e){var t=e[qu];return t||(t=e[qu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[ks]=!0}var Bu=new Set,$u={};function Qn(e,t){ya(e,t),ya(e+"Capture",t)}function ya(e,t){for($u[e]=t,e=0;e<t.length;e++)Bu.add(t[e])}var gg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hu={},Gu={};function pg(e){return xl.call(Gu,e)?!0:xl.call(Hu,e)?!1:gg.test(e)?Gu[e]=!0:(Hu[e]=!0,!1)}function Yr(e,t,n){if(pg(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Vr(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Pt(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}var Tl,Yu;function ba(e){if(Tl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Tl=t&&t[1]||"",Yu=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tl+e+Yu}var zl=!1;function Al(e,t){if(!e||zl)return"";zl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(M){var C=M}Reflect.construct(e,[],X)}else{try{X.call()}catch(M){C=M}e.call(X.prototype)}}else{try{throw Error()}catch(M){C=M}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(M){if(M&&C&&typeof M.stack=="string")return[M.stack,C.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=s.DetermineComponentFrameRoot(),v=d[0],b=d[1];if(v&&b){var _=v.split(`
`),O=b.split(`
`);for(o=s=0;s<_.length&&!_[s].includes("DetermineComponentFrameRoot");)s++;for(;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;if(s===_.length||o===O.length)for(s=_.length-1,o=O.length-1;1<=s&&0<=o&&_[s]!==O[o];)o--;for(;1<=s&&0<=o;s--,o--)if(_[s]!==O[o]){if(s!==1||o!==1)do if(s--,o--,0>o||_[s]!==O[o]){var H=`
`+_[s].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=s&&0<=o);break}}}finally{zl=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ba(n):""}function vg(e){switch(e.tag){case 26:case 27:case 5:return ba(e.type);case 16:return ba("Lazy");case 13:return ba("Suspense");case 19:return ba("SuspenseList");case 0:case 15:return Al(e.type,!1);case 11:return Al(e.type.render,!1);case 1:return Al(e.type,!0);case 31:return ba("Activity");default:return""}}function Vu(e){try{var t="";do t+=vg(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function St(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yg(e){var t=Xu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(v){s=""+v,d.call(this,v)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xr(e){e._valueTracker||(e._valueTracker=yg(e))}function Qu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Xu(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Qr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var bg=/[\n"\\]/g;function jt(e){return e.replace(bg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ol(e,t,n,s,o,d,v,b){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+St(t)):e.value!==""+St(t)&&(e.value=""+St(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?Rl(e,v,St(t)):n!=null?Rl(e,v,St(n)):s!=null&&e.removeAttribute("value"),o==null&&d!=null&&(e.defaultChecked=!!d),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+St(b):e.removeAttribute("name")}function Ku(e,t,n,s,o,d,v,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||n!=null){if(!(d!=="submit"&&d!=="reset"||t!=null))return;n=n!=null?""+St(n):"",t=t!=null?""+St(t):n,b||t===e.value||(e.value=t),e.defaultValue=t}s=s??o,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=b?e.checked:!!s,e.defaultChecked=!!s,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function Rl(e,t,n){t==="number"&&Qr(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xa(e,t,n,s){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&s&&(e[n].defaultSelected=!0)}else{for(n=""+St(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,s&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Pu(e,t,n){if(t!=null&&(t=""+St(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+St(n):""}function Ju(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(i(92));if(tt(s)){if(1<s.length)throw Error(i(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=St(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s)}function _a(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var xg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zu(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||xg.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Wu(e,t,n){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var o in t)s=t[o],t.hasOwnProperty(o)&&n[o]!==s&&Zu(e,o,s)}else for(var d in t)t.hasOwnProperty(d)&&Zu(e,d,t[d])}function Cl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _g=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kr(e){return wg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ml=null;function Dl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wa=null,Sa=null;function Iu(e){var t=pa(e);if(t&&(e=t.stateNode)){var n=e[lt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ol(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+jt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var o=s[lt]||null;if(!o)throw Error(i(90));Ol(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&Qu(s)}break e;case"textarea":Pu(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&xa(e,!!n.multiple,t,!1)}}}var Ul=!1;function Fu(e,t,n){if(Ul)return e(t,n);Ul=!0;try{var s=e(t);return s}finally{if(Ul=!1,(wa!==null||Sa!==null)&&(Ri(),wa&&(t=wa,e=Sa,Sa=wa=null,Iu(t),e)))for(t=0;t<e.length;t++)Iu(e[t])}}function Ns(e,t){var n=e.stateNode;if(n===null)return null;var s=n[lt]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(i(231,t,typeof n));return n}var Jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ll=!1;if(Jt)try{var Ts={};Object.defineProperty(Ts,"passive",{get:function(){Ll=!0}}),window.addEventListener("test",Ts,Ts),window.removeEventListener("test",Ts,Ts)}catch{Ll=!1}var vn=null,ql=null,Pr=null;function ed(){if(Pr)return Pr;var e,t=ql,n=t.length,s,o="value"in vn?vn.value:vn.textContent,d=o.length;for(e=0;e<n&&t[e]===o[e];e++);var v=n-e;for(s=1;s<=v&&t[n-s]===o[d-s];s++);return Pr=o.slice(e,1<s?1-s:void 0)}function Jr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zr(){return!0}function td(){return!1}function ot(e){function t(n,s,o,d,v){this._reactName=n,this._targetInst=o,this.type=s,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(n=e[b],this[b]=n?n(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Zr:td,this.isPropagationStopped=td,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zr)},persist:function(){},isPersistent:Zr}),t}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wr=ot(Kn),zs=y({},Kn,{view:0,detail:0}),Sg=ot(zs),Bl,$l,As,Ir=y({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==As&&(As&&e.type==="mousemove"?(Bl=e.screenX-As.screenX,$l=e.screenY-As.screenY):$l=Bl=0,As=e),Bl)},movementY:function(e){return"movementY"in e?e.movementY:$l}}),nd=ot(Ir),jg=y({},Ir,{dataTransfer:0}),kg=ot(jg),Eg=y({},zs,{relatedTarget:0}),Hl=ot(Eg),Ng=y({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Tg=ot(Ng),zg=y({},Kn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ag=ot(zg),Og=y({},Kn,{data:0}),ad=ot(Og),Rg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mg[e])?!!t[e]:!1}function Gl(){return Dg}var Ug=y({},zs,{key:function(e){if(e.key){var t=Rg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gl,charCode:function(e){return e.type==="keypress"?Jr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lg=ot(Ug),qg=y({},Ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sd=ot(qg),Bg=y({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gl}),$g=ot(Bg),Hg=y({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gg=ot(Hg),Yg=y({},Ir,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vg=ot(Yg),Xg=y({},Kn,{newState:0,oldState:0}),Qg=ot(Xg),Kg=[9,13,27,32],Yl=Jt&&"CompositionEvent"in window,Os=null;Jt&&"documentMode"in document&&(Os=document.documentMode);var Pg=Jt&&"TextEvent"in window&&!Os,rd=Jt&&(!Yl||Os&&8<Os&&11>=Os),id=" ",ld=!1;function od(e,t){switch(e){case"keyup":return Kg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ja=!1;function Jg(e,t){switch(e){case"compositionend":return cd(t);case"keypress":return t.which!==32?null:(ld=!0,id);case"textInput":return e=t.data,e===id&&ld?null:e;default:return null}}function Zg(e,t){if(ja)return e==="compositionend"||!Yl&&od(e,t)?(e=ed(),Pr=ql=vn=null,ja=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rd&&t.locale!=="ko"?null:t.data;default:return null}}var Wg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ud(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wg[e.type]:t==="textarea"}function dd(e,t,n,s){wa?Sa?Sa.push(s):Sa=[s]:wa=s,t=qi(t,"onChange"),0<t.length&&(n=new Wr("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Rs=null,Cs=null;function Ig(e){Qh(e,0)}function Fr(e){var t=Es(e);if(Qu(t))return e}function fd(e,t){if(e==="change")return t}var hd=!1;if(Jt){var Vl;if(Jt){var Xl="oninput"in document;if(!Xl){var md=document.createElement("div");md.setAttribute("oninput","return;"),Xl=typeof md.oninput=="function"}Vl=Xl}else Vl=!1;hd=Vl&&(!document.documentMode||9<document.documentMode)}function gd(){Rs&&(Rs.detachEvent("onpropertychange",pd),Cs=Rs=null)}function pd(e){if(e.propertyName==="value"&&Fr(Cs)){var t=[];dd(t,Cs,e,Dl(e)),Fu(Ig,t)}}function Fg(e,t,n){e==="focusin"?(gd(),Rs=t,Cs=n,Rs.attachEvent("onpropertychange",pd)):e==="focusout"&&gd()}function ep(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fr(Cs)}function tp(e,t){if(e==="click")return Fr(t)}function np(e,t){if(e==="input"||e==="change")return Fr(t)}function ap(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gt=typeof Object.is=="function"?Object.is:ap;function Ms(e,t){if(gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var o=n[s];if(!xl.call(t,o)||!gt(e[o],t[o]))return!1}return!0}function vd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yd(e,t){var n=vd(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vd(n)}}function bd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Qr(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Qr(e.document)}return t}function Ql(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var sp=Jt&&"documentMode"in document&&11>=document.documentMode,ka=null,Kl=null,Ds=null,Pl=!1;function _d(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pl||ka==null||ka!==Qr(s)||(s=ka,"selectionStart"in s&&Ql(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ds&&Ms(Ds,s)||(Ds=s,s=qi(Kl,"onSelect"),0<s.length&&(t=new Wr("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ka)))}function Pn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ea={animationend:Pn("Animation","AnimationEnd"),animationiteration:Pn("Animation","AnimationIteration"),animationstart:Pn("Animation","AnimationStart"),transitionrun:Pn("Transition","TransitionRun"),transitionstart:Pn("Transition","TransitionStart"),transitioncancel:Pn("Transition","TransitionCancel"),transitionend:Pn("Transition","TransitionEnd")},Jl={},wd={};Jt&&(wd=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function Jn(e){if(Jl[e])return Jl[e];if(!Ea[e])return e;var t=Ea[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wd)return Jl[e]=t[n];return e}var Sd=Jn("animationend"),jd=Jn("animationiteration"),kd=Jn("animationstart"),rp=Jn("transitionrun"),ip=Jn("transitionstart"),lp=Jn("transitioncancel"),Ed=Jn("transitionend"),Nd=new Map,Zl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zl.push("scrollEnd");function Rt(e,t){Nd.set(e,t),Qn(t,[e])}var Td=new WeakMap;function kt(e,t){if(typeof e=="object"&&e!==null){var n=Td.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Vu(t)},Td.set(e,t),t)}return{value:e,source:t,stack:Vu(t)}}var Et=[],Na=0,Wl=0;function ei(){for(var e=Na,t=Wl=Na=0;t<e;){var n=Et[t];Et[t++]=null;var s=Et[t];Et[t++]=null;var o=Et[t];Et[t++]=null;var d=Et[t];if(Et[t++]=null,s!==null&&o!==null){var v=s.pending;v===null?o.next=o:(o.next=v.next,v.next=o),s.pending=o}d!==0&&zd(n,o,d)}}function ti(e,t,n,s){Et[Na++]=e,Et[Na++]=t,Et[Na++]=n,Et[Na++]=s,Wl|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Il(e,t,n,s){return ti(e,t,n,s),ni(e)}function Ta(e,t){return ti(e,null,null,t),ni(e)}function zd(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var o=!1,d=e.return;d!==null;)d.childLanes|=n,s=d.alternate,s!==null&&(s.childLanes|=n),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(o=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,o&&t!==null&&(o=31-mt(n),e=d.hiddenUpdates,s=e[o],s===null?e[o]=[t]:s.push(t),t.lane=n|536870912),d):null}function ni(e){if(50<ir)throw ir=0,rc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var za={};function op(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(e,t,n,s){return new op(e,t,n,s)}function Fl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zt(e,t){var n=e.alternate;return n===null?(n=pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ad(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ai(e,t,n,s,o,d){var v=0;if(s=e,typeof e=="function")Fl(e)&&(v=1);else if(typeof e=="string")v=uv(e,n,ae.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case V:return e=pt(31,n,t,o),e.elementType=V,e.lanes=d,e;case T:return Zn(n.children,o,d,t);case B:v=8,o|=24;break;case z:return e=pt(12,n,t,o|2),e.elementType=z,e.lanes=d,e;case R:return e=pt(13,n,t,o),e.elementType=R,e.lanes=d,e;case Q:return e=pt(19,n,t,o),e.elementType=Q,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:case U:v=10;break e;case $:v=9;break e;case D:v=11;break e;case L:v=14;break e;case P:v=16,s=null;break e}v=29,n=Error(i(130,e===null?"null":typeof e,"")),s=null}return t=pt(v,n,t,o),t.elementType=e,t.type=s,t.lanes=d,t}function Zn(e,t,n,s){return e=pt(7,e,s,t),e.lanes=n,e}function eo(e,t,n){return e=pt(6,e,null,t),e.lanes=n,e}function to(e,t,n){return t=pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Aa=[],Oa=0,si=null,ri=0,Nt=[],Tt=0,Wn=null,Wt=1,It="";function In(e,t){Aa[Oa++]=ri,Aa[Oa++]=si,si=e,ri=t}function Od(e,t,n){Nt[Tt++]=Wt,Nt[Tt++]=It,Nt[Tt++]=Wn,Wn=e;var s=Wt;e=It;var o=32-mt(s)-1;s&=~(1<<o),n+=1;var d=32-mt(t)+o;if(30<d){var v=o-o%5;d=(s&(1<<v)-1).toString(32),s>>=v,o-=v,Wt=1<<32-mt(t)+o|n<<o|s,It=d+e}else Wt=1<<d|n<<o|s,It=e}function no(e){e.return!==null&&(In(e,1),Od(e,1,0))}function ao(e){for(;e===si;)si=Aa[--Oa],Aa[Oa]=null,ri=Aa[--Oa],Aa[Oa]=null;for(;e===Wn;)Wn=Nt[--Tt],Nt[Tt]=null,It=Nt[--Tt],Nt[Tt]=null,Wt=Nt[--Tt],Nt[Tt]=null}var rt=null,Le=null,_e=!1,Fn=null,$t=!1,so=Error(i(519));function ea(e){var t=Error(i(418,""));throw qs(kt(t,e)),so}function Rd(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[nt]=e,t[lt]=s,n){case"dialog":ge("cancel",t),ge("close",t);break;case"iframe":case"object":case"embed":ge("load",t);break;case"video":case"audio":for(n=0;n<or.length;n++)ge(or[n],t);break;case"source":ge("error",t);break;case"img":case"image":case"link":ge("error",t),ge("load",t);break;case"details":ge("toggle",t);break;case"input":ge("invalid",t),Ku(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),Xr(t);break;case"select":ge("invalid",t);break;case"textarea":ge("invalid",t),Ju(t,s.value,s.defaultValue,s.children),Xr(t)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||Zh(t.textContent,n)?(s.popover!=null&&(ge("beforetoggle",t),ge("toggle",t)),s.onScroll!=null&&ge("scroll",t),s.onScrollEnd!=null&&ge("scrollend",t),s.onClick!=null&&(t.onclick=Bi),t=!0):t=!1,t||ea(e)}function Cd(e){for(rt=e.return;rt;)switch(rt.tag){case 5:case 13:$t=!1;return;case 27:case 3:$t=!0;return;default:rt=rt.return}}function Us(e){if(e!==rt)return!1;if(!_e)return Cd(e),_e=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||_c(e.type,e.memoizedProps)),n=!n),n&&Le&&ea(e),Cd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Le=Mt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Le=null}}else t===27?(t=Le,Cn(e.type)?(e=kc,kc=null,Le=e):Le=t):Le=rt?Mt(e.stateNode.nextSibling):null;return!0}function Ls(){Le=rt=null,_e=!1}function Md(){var e=Fn;return e!==null&&(dt===null?dt=e:dt.push.apply(dt,e),Fn=null),e}function qs(e){Fn===null?Fn=[e]:Fn.push(e)}var ro=K(null),ta=null,Ft=null;function yn(e,t,n){W(ro,t._currentValue),t._currentValue=n}function en(e){e._currentValue=ro.current,ee(ro)}function io(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function lo(e,t,n,s){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){var v=o.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=o;for(var _=0;_<t.length;_++)if(b.context===t[_]){d.lanes|=n,b=d.alternate,b!==null&&(b.lanes|=n),io(d.return,n,e),s||(v=null);break e}d=b.next}}else if(o.tag===18){if(v=o.return,v===null)throw Error(i(341));v.lanes|=n,d=v.alternate,d!==null&&(d.lanes|=n),io(v,n,e),v=null}else v=o.child;if(v!==null)v.return=o;else for(v=o;v!==null;){if(v===e){v=null;break}if(o=v.sibling,o!==null){o.return=v.return,v=o;break}v=v.return}o=v}}function Bs(e,t,n,s){e=null;for(var o=t,d=!1;o!==null;){if(!d){if((o.flags&524288)!==0)d=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var v=o.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var b=o.type;gt(o.pendingProps.value,v.value)||(e!==null?e.push(b):e=[b])}}else if(o===ft.current){if(v=o.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(mr):e=[mr])}o=o.return}e!==null&&lo(t,e,n,s),t.flags|=262144}function ii(e){for(e=e.firstContext;e!==null;){if(!gt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function na(e){ta=e,Ft=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function at(e){return Dd(ta,e)}function li(e,t){return ta===null&&na(e),Dd(e,t)}function Dd(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ft===null){if(e===null)throw Error(i(308));Ft=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ft=Ft.next=t;return n}var cp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},up=l.unstable_scheduleCallback,dp=l.unstable_NormalPriority,Ye={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function oo(){return{controller:new cp,data:new Map,refCount:0}}function $s(e){e.refCount--,e.refCount===0&&up(dp,function(){e.controller.abort()})}var Hs=null,co=0,Ra=0,Ca=null;function fp(e,t){if(Hs===null){var n=Hs=[];co=0,Ra=fc(),Ca={status:"pending",value:void 0,then:function(s){n.push(s)}}}return co++,t.then(Ud,Ud),t}function Ud(){if(--co===0&&Hs!==null){Ca!==null&&(Ca.status="fulfilled");var e=Hs;Hs=null,Ra=0,Ca=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function hp(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(s.status="rejected",s.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),s}var Ld=G.S;G.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&fp(e,t),Ld!==null&&Ld(e,t)};var aa=K(null);function uo(){var e=aa.current;return e!==null?e:Ae.pooledCache}function oi(e,t){t===null?W(aa,aa.current):W(aa,t.pool)}function qd(){var e=uo();return e===null?null:{parent:Ye._currentValue,pool:e}}var Gs=Error(i(460)),Bd=Error(i(474)),ci=Error(i(542)),fo={then:function(){}};function $d(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ui(){}function Hd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ui,ui),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Yd(e),e;default:if(typeof t.status=="string")t.then(ui,ui);else{if(e=Ae,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=s}},function(s){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Yd(e),e}throw Ys=t,Gs}}var Ys=null;function Gd(){if(Ys===null)throw Error(i(459));var e=Ys;return Ys=null,e}function Yd(e){if(e===Gs||e===ci)throw Error(i(483))}var bn=!1;function ho(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _n(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(we&2)!==0){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,t=ni(e),zd(e,null,n),t}return ti(e,s,t,n),ni(e)}function Vs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Uu(e,n)}}function go(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var o=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var v={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};d===null?o=d=v:d=d.next=v,n=n.next}while(n!==null);d===null?o=d=t:d=d.next=t}else o=d=t;n={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:d,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var po=!1;function Xs(){if(po){var e=Ca;if(e!==null)throw e}}function Qs(e,t,n,s){po=!1;var o=e.updateQueue;bn=!1;var d=o.firstBaseUpdate,v=o.lastBaseUpdate,b=o.shared.pending;if(b!==null){o.shared.pending=null;var _=b,O=_.next;_.next=null,v===null?d=O:v.next=O,v=_;var H=e.alternate;H!==null&&(H=H.updateQueue,b=H.lastBaseUpdate,b!==v&&(b===null?H.firstBaseUpdate=O:b.next=O,H.lastBaseUpdate=_))}if(d!==null){var X=o.baseState;v=0,H=O=_=null,b=d;do{var C=b.lane&-536870913,M=C!==b.lane;if(M?(ye&C)===C:(s&C)===C){C!==0&&C===Ra&&(po=!0),H!==null&&(H=H.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var le=e,se=b;C=t;var Ee=n;switch(se.tag){case 1:if(le=se.payload,typeof le=="function"){X=le.call(Ee,X,C);break e}X=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=se.payload,C=typeof le=="function"?le.call(Ee,X,C):le,C==null)break e;X=y({},X,C);break e;case 2:bn=!0}}C=b.callback,C!==null&&(e.flags|=64,M&&(e.flags|=8192),M=o.callbacks,M===null?o.callbacks=[C]:M.push(C))}else M={lane:C,tag:b.tag,payload:b.payload,callback:b.callback,next:null},H===null?(O=H=M,_=X):H=H.next=M,v|=C;if(b=b.next,b===null){if(b=o.shared.pending,b===null)break;M=b,b=M.next,M.next=null,o.lastBaseUpdate=M,o.shared.pending=null}}while(!0);H===null&&(_=X),o.baseState=_,o.firstBaseUpdate=O,o.lastBaseUpdate=H,d===null&&(o.shared.lanes=0),zn|=v,e.lanes=v,e.memoizedState=X}}function Vd(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Xd(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Vd(n[e],t)}var Ma=K(null),di=K(0);function Qd(e,t){e=on,W(di,e),W(Ma,t),on=e|t.baseLanes}function vo(){W(di,on),W(Ma,Ma.current)}function yo(){on=di.current,ee(Ma),ee(di)}var wn=0,fe=null,je=null,He=null,fi=!1,Da=!1,sa=!1,hi=0,Ks=0,Ua=null,mp=0;function Be(){throw Error(i(321))}function bo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gt(e[n],t[n]))return!1;return!0}function xo(e,t,n,s,o,d){return wn=d,fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,G.H=e===null||e.memoizedState===null?Af:Of,sa=!1,d=n(s,o),sa=!1,Da&&(d=Pd(t,n,s,o)),Kd(e),d}function Kd(e){G.H=bi;var t=je!==null&&je.next!==null;if(wn=0,He=je=fe=null,fi=!1,Ks=0,Ua=null,t)throw Error(i(300));e===null||Pe||(e=e.dependencies,e!==null&&ii(e)&&(Pe=!0))}function Pd(e,t,n,s){fe=e;var o=0;do{if(Da&&(Ua=null),Ks=0,Da=!1,25<=o)throw Error(i(301));if(o+=1,He=je=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=_p,d=t(n,s)}while(Da);return d}function gp(){var e=G.H,t=e.useState()[0];return t=typeof t.then=="function"?Ps(t):t,e=e.useState()[0],(je!==null?je.memoizedState:null)!==e&&(fe.flags|=1024),t}function _o(){var e=hi!==0;return hi=0,e}function wo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function So(e){if(fi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}fi=!1}wn=0,He=je=fe=null,Da=!1,Ks=hi=0,Ua=null}function ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?fe.memoizedState=He=e:He=He.next=e,He}function Ge(){if(je===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var t=He===null?fe.memoizedState:He.next;if(t!==null)He=t,je=e;else{if(e===null)throw fe.alternate===null?Error(i(467)):Error(i(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},He===null?fe.memoizedState=He=e:He=He.next=e}return He}function jo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ps(e){var t=Ks;return Ks+=1,Ua===null&&(Ua=[]),e=Hd(Ua,e,t),t=fe,(He===null?t.memoizedState:He.next)===null&&(t=t.alternate,G.H=t===null||t.memoizedState===null?Af:Of),e}function mi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ps(e);if(e.$$typeof===U)return at(e)}throw Error(i(438,String(e)))}function ko(e){var t=null,n=fe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=fe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=jo(),fe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=Z;return t.index++,n}function tn(e,t){return typeof t=="function"?t(e):t}function gi(e){var t=Ge();return Eo(t,je,e)}function Eo(e,t,n){var s=e.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=n;var o=e.baseQueue,d=s.pending;if(d!==null){if(o!==null){var v=o.next;o.next=d.next,d.next=v}t.baseQueue=o=d,s.pending=null}if(d=e.baseState,o===null)e.memoizedState=d;else{t=o.next;var b=v=null,_=null,O=t,H=!1;do{var X=O.lane&-536870913;if(X!==O.lane?(ye&X)===X:(wn&X)===X){var C=O.revertLane;if(C===0)_!==null&&(_=_.next={lane:0,revertLane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),X===Ra&&(H=!0);else if((wn&C)===C){O=O.next,C===Ra&&(H=!0);continue}else X={lane:0,revertLane:O.revertLane,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},_===null?(b=_=X,v=d):_=_.next=X,fe.lanes|=C,zn|=C;X=O.action,sa&&n(d,X),d=O.hasEagerState?O.eagerState:n(d,X)}else C={lane:X,revertLane:O.revertLane,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},_===null?(b=_=C,v=d):_=_.next=C,fe.lanes|=X,zn|=X;O=O.next}while(O!==null&&O!==t);if(_===null?v=d:_.next=b,!gt(d,e.memoizedState)&&(Pe=!0,H&&(n=Ca,n!==null)))throw n;e.memoizedState=d,e.baseState=v,e.baseQueue=_,s.lastRenderedState=d}return o===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function No(e){var t=Ge(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var s=n.dispatch,o=n.pending,d=t.memoizedState;if(o!==null){n.pending=null;var v=o=o.next;do d=e(d,v.action),v=v.next;while(v!==o);gt(d,t.memoizedState)||(Pe=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,s]}function Jd(e,t,n){var s=fe,o=Ge(),d=_e;if(d){if(n===void 0)throw Error(i(407));n=n()}else n=t();var v=!gt((je||o).memoizedState,n);v&&(o.memoizedState=n,Pe=!0),o=o.queue;var b=Id.bind(null,s,o,e);if(Js(2048,8,b,[e]),o.getSnapshot!==t||v||He!==null&&He.memoizedState.tag&1){if(s.flags|=2048,La(9,pi(),Wd.bind(null,s,o,n,t),null),Ae===null)throw Error(i(349));d||(wn&124)!==0||Zd(s,t,n)}return n}function Zd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=fe.updateQueue,t===null?(t=jo(),fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Wd(e,t,n,s){t.value=n,t.getSnapshot=s,Fd(t)&&ef(e)}function Id(e,t,n){return n(function(){Fd(t)&&ef(e)})}function Fd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gt(e,n)}catch{return!0}}function ef(e){var t=Ta(e,2);t!==null&&_t(t,e,2)}function To(e){var t=ct();if(typeof e=="function"){var n=e;if(e=n(),sa){gn(!0);try{n()}finally{gn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:e},t}function tf(e,t,n,s){return e.baseState=n,Eo(e,je,typeof s=="function"?s:tn)}function pp(e,t,n,s,o){if(yi(e))throw Error(i(485));if(e=t.action,e!==null){var d={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};G.T!==null?n(!0):d.isTransition=!1,s(d),n=t.pending,n===null?(d.next=t.pending=d,nf(t,d)):(d.next=n.next,t.pending=n.next=d)}}function nf(e,t){var n=t.action,s=t.payload,o=e.state;if(t.isTransition){var d=G.T,v={};G.T=v;try{var b=n(o,s),_=G.S;_!==null&&_(v,b),af(e,t,b)}catch(O){zo(e,t,O)}finally{G.T=d}}else try{d=n(o,s),af(e,t,d)}catch(O){zo(e,t,O)}}function af(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){sf(e,t,s)},function(s){return zo(e,t,s)}):sf(e,t,n)}function sf(e,t,n){t.status="fulfilled",t.value=n,rf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,nf(e,n)))}function zo(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,rf(t),t=t.next;while(t!==s)}e.action=null}function rf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lf(e,t){return t}function of(e,t){if(_e){var n=Ae.formState;if(n!==null){e:{var s=fe;if(_e){if(Le){t:{for(var o=Le,d=$t;o.nodeType!==8;){if(!d){o=null;break t}if(o=Mt(o.nextSibling),o===null){o=null;break t}}d=o.data,o=d==="F!"||d==="F"?o:null}if(o){Le=Mt(o.nextSibling),s=o.data==="F!";break e}}ea(s)}s=!1}s&&(t=n[0])}}return n=ct(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lf,lastRenderedState:t},n.queue=s,n=Nf.bind(null,fe,s),s.dispatch=n,s=To(!1),d=Mo.bind(null,fe,!1,s.queue),s=ct(),o={state:t,dispatch:null,action:e,pending:null},s.queue=o,n=pp.bind(null,fe,o,d,n),o.dispatch=n,s.memoizedState=e,[t,n,!1]}function cf(e){var t=Ge();return uf(t,je,e)}function uf(e,t,n){if(t=Eo(e,t,lf)[0],e=gi(tn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Ps(t)}catch(v){throw v===Gs?ci:v}else s=t;t=Ge();var o=t.queue,d=o.dispatch;return n!==t.memoizedState&&(fe.flags|=2048,La(9,pi(),vp.bind(null,o,n),null)),[s,d,e]}function vp(e,t){e.action=t}function df(e){var t=Ge(),n=je;if(n!==null)return uf(t,n,e);Ge(),t=t.memoizedState,n=Ge();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function La(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},t=fe.updateQueue,t===null&&(t=jo(),fe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function pi(){return{destroy:void 0,resource:void 0}}function ff(){return Ge().memoizedState}function vi(e,t,n,s){var o=ct();s=s===void 0?null:s,fe.flags|=e,o.memoizedState=La(1|t,pi(),n,s)}function Js(e,t,n,s){var o=Ge();s=s===void 0?null:s;var d=o.memoizedState.inst;je!==null&&s!==null&&bo(s,je.memoizedState.deps)?o.memoizedState=La(t,d,n,s):(fe.flags|=e,o.memoizedState=La(1|t,d,n,s))}function hf(e,t){vi(8390656,8,e,t)}function mf(e,t){Js(2048,8,e,t)}function gf(e,t){return Js(4,2,e,t)}function pf(e,t){return Js(4,4,e,t)}function vf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yf(e,t,n){n=n!=null?n.concat([e]):null,Js(4,4,vf.bind(null,t,e),n)}function Ao(){}function bf(e,t){var n=Ge();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&bo(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function xf(e,t){var n=Ge();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&bo(t,s[1]))return s[0];if(s=e(),sa){gn(!0);try{e()}finally{gn(!1)}}return n.memoizedState=[s,t],s}function Oo(e,t,n){return n===void 0||(wn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=Sh(),fe.lanes|=e,zn|=e,n)}function _f(e,t,n,s){return gt(n,t)?n:Ma.current!==null?(e=Oo(e,n,s),gt(e,t)||(Pe=!0),e):(wn&42)===0?(Pe=!0,e.memoizedState=n):(e=Sh(),fe.lanes|=e,zn|=e,t)}function wf(e,t,n,s,o){var d=I.p;I.p=d!==0&&8>d?d:8;var v=G.T,b={};G.T=b,Mo(e,!1,t,n);try{var _=o(),O=G.S;if(O!==null&&O(b,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var H=hp(_,s);Zs(e,t,H,xt(e))}else Zs(e,t,s,xt(e))}catch(X){Zs(e,t,{then:function(){},status:"rejected",reason:X},xt())}finally{I.p=d,G.T=v}}function yp(){}function Ro(e,t,n,s){if(e.tag!==5)throw Error(i(476));var o=Sf(e).queue;wf(e,o,t,ie,n===null?yp:function(){return jf(e),n(s)})}function Sf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:ie},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function jf(e){var t=Sf(e).next.queue;Zs(e,t,{},xt())}function Co(){return at(mr)}function kf(){return Ge().memoizedState}function Ef(){return Ge().memoizedState}function bp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=xt();e=xn(n);var s=_n(t,e,n);s!==null&&(_t(s,t,n),Vs(s,t,n)),t={cache:oo()},e.payload=t;return}t=t.return}}function xp(e,t,n){var s=xt();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},yi(e)?Tf(t,n):(n=Il(e,t,n,s),n!==null&&(_t(n,e,s),zf(n,t,s)))}function Nf(e,t,n){var s=xt();Zs(e,t,n,s)}function Zs(e,t,n,s){var o={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(yi(e))Tf(t,o);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var v=t.lastRenderedState,b=d(v,n);if(o.hasEagerState=!0,o.eagerState=b,gt(b,v))return ti(e,t,o,0),Ae===null&&ei(),!1}catch{}finally{}if(n=Il(e,t,o,s),n!==null)return _t(n,e,s),zf(n,t,s),!0}return!1}function Mo(e,t,n,s){if(s={lane:2,revertLane:fc(),action:s,hasEagerState:!1,eagerState:null,next:null},yi(e)){if(t)throw Error(i(479))}else t=Il(e,n,s,2),t!==null&&_t(t,e,2)}function yi(e){var t=e.alternate;return e===fe||t!==null&&t===fe}function Tf(e,t){Da=fi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zf(e,t,n){if((n&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Uu(e,n)}}var bi={readContext:at,use:mi,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useLayoutEffect:Be,useInsertionEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useSyncExternalStore:Be,useId:Be,useHostTransitionStatus:Be,useFormState:Be,useActionState:Be,useOptimistic:Be,useMemoCache:Be,useCacheRefresh:Be},Af={readContext:at,use:mi,useCallback:function(e,t){return ct().memoizedState=[e,t===void 0?null:t],e},useContext:at,useEffect:hf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,vi(4194308,4,vf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vi(4194308,4,e,t)},useInsertionEffect:function(e,t){vi(4,2,e,t)},useMemo:function(e,t){var n=ct();t=t===void 0?null:t;var s=e();if(sa){gn(!0);try{e()}finally{gn(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=ct();if(n!==void 0){var o=n(t);if(sa){gn(!0);try{n(t)}finally{gn(!1)}}}else o=t;return s.memoizedState=s.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},s.queue=e,e=e.dispatch=xp.bind(null,fe,e),[s.memoizedState,e]},useRef:function(e){var t=ct();return e={current:e},t.memoizedState=e},useState:function(e){e=To(e);var t=e.queue,n=Nf.bind(null,fe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ao,useDeferredValue:function(e,t){var n=ct();return Oo(n,e,t)},useTransition:function(){var e=To(!1);return e=wf.bind(null,fe,e.queue,!0,!1),ct().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=fe,o=ct();if(_e){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Ae===null)throw Error(i(349));(ye&124)!==0||Zd(s,t,n)}o.memoizedState=n;var d={value:n,getSnapshot:t};return o.queue=d,hf(Id.bind(null,s,d,e),[e]),s.flags|=2048,La(9,pi(),Wd.bind(null,s,d,n,t),null),n},useId:function(){var e=ct(),t=Ae.identifierPrefix;if(_e){var n=It,s=Wt;n=(s&~(1<<32-mt(s)-1)).toString(32)+n,t=""+t+"R"+n,n=hi++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=mp++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Co,useFormState:of,useActionState:of,useOptimistic:function(e){var t=ct();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Mo.bind(null,fe,!0,n),n.dispatch=t,[e,t]},useMemoCache:ko,useCacheRefresh:function(){return ct().memoizedState=bp.bind(null,fe)}},Of={readContext:at,use:mi,useCallback:bf,useContext:at,useEffect:mf,useImperativeHandle:yf,useInsertionEffect:gf,useLayoutEffect:pf,useMemo:xf,useReducer:gi,useRef:ff,useState:function(){return gi(tn)},useDebugValue:Ao,useDeferredValue:function(e,t){var n=Ge();return _f(n,je.memoizedState,e,t)},useTransition:function(){var e=gi(tn)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:Ps(e),t]},useSyncExternalStore:Jd,useId:kf,useHostTransitionStatus:Co,useFormState:cf,useActionState:cf,useOptimistic:function(e,t){var n=Ge();return tf(n,je,e,t)},useMemoCache:ko,useCacheRefresh:Ef},_p={readContext:at,use:mi,useCallback:bf,useContext:at,useEffect:mf,useImperativeHandle:yf,useInsertionEffect:gf,useLayoutEffect:pf,useMemo:xf,useReducer:No,useRef:ff,useState:function(){return No(tn)},useDebugValue:Ao,useDeferredValue:function(e,t){var n=Ge();return je===null?Oo(n,e,t):_f(n,je.memoizedState,e,t)},useTransition:function(){var e=No(tn)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:Ps(e),t]},useSyncExternalStore:Jd,useId:kf,useHostTransitionStatus:Co,useFormState:df,useActionState:df,useOptimistic:function(e,t){var n=Ge();return je!==null?tf(n,je,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ko,useCacheRefresh:Ef},qa=null,Ws=0;function xi(e){var t=Ws;return Ws+=1,qa===null&&(qa=[]),Hd(qa,e,t)}function Is(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function _i(e,t){throw t.$$typeof===x?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Rf(e){var t=e._init;return t(e._payload)}function Cf(e){function t(N,k){if(e){var A=N.deletions;A===null?(N.deletions=[k],N.flags|=16):A.push(k)}}function n(N,k){if(!e)return null;for(;k!==null;)t(N,k),k=k.sibling;return null}function s(N){for(var k=new Map;N!==null;)N.key!==null?k.set(N.key,N):k.set(N.index,N),N=N.sibling;return k}function o(N,k){return N=Zt(N,k),N.index=0,N.sibling=null,N}function d(N,k,A){return N.index=A,e?(A=N.alternate,A!==null?(A=A.index,A<k?(N.flags|=67108866,k):A):(N.flags|=67108866,k)):(N.flags|=1048576,k)}function v(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function b(N,k,A,Y){return k===null||k.tag!==6?(k=eo(A,N.mode,Y),k.return=N,k):(k=o(k,A),k.return=N,k)}function _(N,k,A,Y){var te=A.type;return te===T?H(N,k,A.props.children,Y,A.key):k!==null&&(k.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===P&&Rf(te)===k.type)?(k=o(k,A.props),Is(k,A),k.return=N,k):(k=ai(A.type,A.key,A.props,null,N.mode,Y),Is(k,A),k.return=N,k)}function O(N,k,A,Y){return k===null||k.tag!==4||k.stateNode.containerInfo!==A.containerInfo||k.stateNode.implementation!==A.implementation?(k=to(A,N.mode,Y),k.return=N,k):(k=o(k,A.children||[]),k.return=N,k)}function H(N,k,A,Y,te){return k===null||k.tag!==7?(k=Zn(A,N.mode,Y,te),k.return=N,k):(k=o(k,A),k.return=N,k)}function X(N,k,A){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=eo(""+k,N.mode,A),k.return=N,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case w:return A=ai(k.type,k.key,k.props,null,N.mode,A),Is(A,k),A.return=N,A;case E:return k=to(k,N.mode,A),k.return=N,k;case P:var Y=k._init;return k=Y(k._payload),X(N,k,A)}if(tt(k)||oe(k))return k=Zn(k,N.mode,A,null),k.return=N,k;if(typeof k.then=="function")return X(N,xi(k),A);if(k.$$typeof===U)return X(N,li(N,k),A);_i(N,k)}return null}function C(N,k,A,Y){var te=k!==null?k.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return te!==null?null:b(N,k,""+A,Y);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case w:return A.key===te?_(N,k,A,Y):null;case E:return A.key===te?O(N,k,A,Y):null;case P:return te=A._init,A=te(A._payload),C(N,k,A,Y)}if(tt(A)||oe(A))return te!==null?null:H(N,k,A,Y,null);if(typeof A.then=="function")return C(N,k,xi(A),Y);if(A.$$typeof===U)return C(N,k,li(N,A),Y);_i(N,A)}return null}function M(N,k,A,Y,te){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return N=N.get(A)||null,b(k,N,""+Y,te);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return N=N.get(Y.key===null?A:Y.key)||null,_(k,N,Y,te);case E:return N=N.get(Y.key===null?A:Y.key)||null,O(k,N,Y,te);case P:var he=Y._init;return Y=he(Y._payload),M(N,k,A,Y,te)}if(tt(Y)||oe(Y))return N=N.get(A)||null,H(k,N,Y,te,null);if(typeof Y.then=="function")return M(N,k,A,xi(Y),te);if(Y.$$typeof===U)return M(N,k,A,li(k,Y),te);_i(k,Y)}return null}function le(N,k,A,Y){for(var te=null,he=null,ne=k,re=k=0,Ze=null;ne!==null&&re<A.length;re++){ne.index>re?(Ze=ne,ne=null):Ze=ne.sibling;var xe=C(N,ne,A[re],Y);if(xe===null){ne===null&&(ne=Ze);break}e&&ne&&xe.alternate===null&&t(N,ne),k=d(xe,k,re),he===null?te=xe:he.sibling=xe,he=xe,ne=Ze}if(re===A.length)return n(N,ne),_e&&In(N,re),te;if(ne===null){for(;re<A.length;re++)ne=X(N,A[re],Y),ne!==null&&(k=d(ne,k,re),he===null?te=ne:he.sibling=ne,he=ne);return _e&&In(N,re),te}for(ne=s(ne);re<A.length;re++)Ze=M(ne,N,re,A[re],Y),Ze!==null&&(e&&Ze.alternate!==null&&ne.delete(Ze.key===null?re:Ze.key),k=d(Ze,k,re),he===null?te=Ze:he.sibling=Ze,he=Ze);return e&&ne.forEach(function(qn){return t(N,qn)}),_e&&In(N,re),te}function se(N,k,A,Y){if(A==null)throw Error(i(151));for(var te=null,he=null,ne=k,re=k=0,Ze=null,xe=A.next();ne!==null&&!xe.done;re++,xe=A.next()){ne.index>re?(Ze=ne,ne=null):Ze=ne.sibling;var qn=C(N,ne,xe.value,Y);if(qn===null){ne===null&&(ne=Ze);break}e&&ne&&qn.alternate===null&&t(N,ne),k=d(qn,k,re),he===null?te=qn:he.sibling=qn,he=qn,ne=Ze}if(xe.done)return n(N,ne),_e&&In(N,re),te;if(ne===null){for(;!xe.done;re++,xe=A.next())xe=X(N,xe.value,Y),xe!==null&&(k=d(xe,k,re),he===null?te=xe:he.sibling=xe,he=xe);return _e&&In(N,re),te}for(ne=s(ne);!xe.done;re++,xe=A.next())xe=M(ne,N,re,xe.value,Y),xe!==null&&(e&&xe.alternate!==null&&ne.delete(xe.key===null?re:xe.key),k=d(xe,k,re),he===null?te=xe:he.sibling=xe,he=xe);return e&&ne.forEach(function(wv){return t(N,wv)}),_e&&In(N,re),te}function Ee(N,k,A,Y){if(typeof A=="object"&&A!==null&&A.type===T&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case w:e:{for(var te=A.key;k!==null;){if(k.key===te){if(te=A.type,te===T){if(k.tag===7){n(N,k.sibling),Y=o(k,A.props.children),Y.return=N,N=Y;break e}}else if(k.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===P&&Rf(te)===k.type){n(N,k.sibling),Y=o(k,A.props),Is(Y,A),Y.return=N,N=Y;break e}n(N,k);break}else t(N,k);k=k.sibling}A.type===T?(Y=Zn(A.props.children,N.mode,Y,A.key),Y.return=N,N=Y):(Y=ai(A.type,A.key,A.props,null,N.mode,Y),Is(Y,A),Y.return=N,N=Y)}return v(N);case E:e:{for(te=A.key;k!==null;){if(k.key===te)if(k.tag===4&&k.stateNode.containerInfo===A.containerInfo&&k.stateNode.implementation===A.implementation){n(N,k.sibling),Y=o(k,A.children||[]),Y.return=N,N=Y;break e}else{n(N,k);break}else t(N,k);k=k.sibling}Y=to(A,N.mode,Y),Y.return=N,N=Y}return v(N);case P:return te=A._init,A=te(A._payload),Ee(N,k,A,Y)}if(tt(A))return le(N,k,A,Y);if(oe(A)){if(te=oe(A),typeof te!="function")throw Error(i(150));return A=te.call(A),se(N,k,A,Y)}if(typeof A.then=="function")return Ee(N,k,xi(A),Y);if(A.$$typeof===U)return Ee(N,k,li(N,A),Y);_i(N,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,k!==null&&k.tag===6?(n(N,k.sibling),Y=o(k,A),Y.return=N,N=Y):(n(N,k),Y=eo(A,N.mode,Y),Y.return=N,N=Y),v(N)):n(N,k)}return function(N,k,A,Y){try{Ws=0;var te=Ee(N,k,A,Y);return qa=null,te}catch(ne){if(ne===Gs||ne===ci)throw ne;var he=pt(29,ne,null,N.mode);return he.lanes=Y,he.return=N,he}finally{}}}var Ba=Cf(!0),Mf=Cf(!1),zt=K(null),Ht=null;function Sn(e){var t=e.alternate;W(Ve,Ve.current&1),W(zt,e),Ht===null&&(t===null||Ma.current!==null||t.memoizedState!==null)&&(Ht=e)}function Df(e){if(e.tag===22){if(W(Ve,Ve.current),W(zt,e),Ht===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Ht=e)}}else jn()}function jn(){W(Ve,Ve.current),W(zt,zt.current)}function nn(e){ee(zt),Ht===e&&(Ht=null),ee(Ve)}var Ve=K(0);function wi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||jc(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Do(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:y({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Uo={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=xt(),o=xn(s);o.payload=t,n!=null&&(o.callback=n),t=_n(e,o,s),t!==null&&(_t(t,e,s),Vs(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=xt(),o=xn(s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=_n(e,o,s),t!==null&&(_t(t,e,s),Vs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xt(),s=xn(n);s.tag=2,t!=null&&(s.callback=t),t=_n(e,s,n),t!==null&&(_t(t,e,n),Vs(t,e,n))}};function Uf(e,t,n,s,o,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,v):t.prototype&&t.prototype.isPureReactComponent?!Ms(n,s)||!Ms(o,d):!0}function Lf(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Uo.enqueueReplaceState(t,t.state,null)}function ra(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=y({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}var Si=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function qf(e){Si(e)}function Bf(e){console.error(e)}function $f(e){Si(e)}function ji(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Hf(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Lo(e,t,n){return n=xn(n),n.tag=3,n.payload={element:null},n.callback=function(){ji(e,t)},n}function Gf(e){return e=xn(e),e.tag=3,e}function Yf(e,t,n,s){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var d=s.value;e.payload=function(){return o(d)},e.callback=function(){Hf(t,n,s)}}var v=n.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Hf(t,n,s),typeof o!="function"&&(An===null?An=new Set([this]):An.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})})}function wp(e,t,n,s,o){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&Bs(t,n,o,!0),n=zt.current,n!==null){switch(n.tag){case 13:return Ht===null?lc():n.alternate===null&&qe===0&&(qe=3),n.flags&=-257,n.flags|=65536,n.lanes=o,s===fo?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),cc(e,s,o)),!1;case 22:return n.flags|=65536,s===fo?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),cc(e,s,o)),!1}throw Error(i(435,n.tag))}return cc(e,s,o),lc(),!1}if(_e)return t=zt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,s!==so&&(e=Error(i(422),{cause:s}),qs(kt(e,n)))):(s!==so&&(t=Error(i(423),{cause:s}),qs(kt(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,s=kt(s,n),o=Lo(e.stateNode,s,o),go(e,o),qe!==4&&(qe=2)),!1;var d=Error(i(520),{cause:s});if(d=kt(d,n),rr===null?rr=[d]:rr.push(d),qe!==4&&(qe=2),t===null)return!0;s=kt(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Lo(n.stateNode,s,e),go(n,e),!1;case 1:if(t=n.type,d=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(An===null||!An.has(d))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Gf(o),Yf(o,e,n,s),go(n,o),!1}n=n.return}while(n!==null);return!1}var Vf=Error(i(461)),Pe=!1;function Ie(e,t,n,s){t.child=e===null?Mf(t,null,n,s):Ba(t,e.child,n,s)}function Xf(e,t,n,s,o){n=n.render;var d=t.ref;if("ref"in s){var v={};for(var b in s)b!=="ref"&&(v[b]=s[b])}else v=s;return na(t),s=xo(e,t,n,v,d,o),b=_o(),e!==null&&!Pe?(wo(e,t,o),an(e,t,o)):(_e&&b&&no(t),t.flags|=1,Ie(e,t,s,o),t.child)}function Qf(e,t,n,s,o){if(e===null){var d=n.type;return typeof d=="function"&&!Fl(d)&&d.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=d,Kf(e,t,d,s,o)):(e=ai(n.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!Xo(e,o)){var v=d.memoizedProps;if(n=n.compare,n=n!==null?n:Ms,n(v,s)&&e.ref===t.ref)return an(e,t,o)}return t.flags|=1,e=Zt(d,s),e.ref=t.ref,e.return=t,t.child=e}function Kf(e,t,n,s,o){if(e!==null){var d=e.memoizedProps;if(Ms(d,s)&&e.ref===t.ref)if(Pe=!1,t.pendingProps=s=d,Xo(e,o))(e.flags&131072)!==0&&(Pe=!0);else return t.lanes=e.lanes,an(e,t,o)}return qo(e,t,n,s,o)}function Pf(e,t,n){var s=t.pendingProps,o=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((t.flags&128)!==0){if(s=d!==null?d.baseLanes|n:n,e!==null){for(o=t.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;t.childLanes=d&~s}else t.childLanes=0,t.child=null;return Jf(e,t,s,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&oi(t,d!==null?d.cachePool:null),d!==null?Qd(t,d):vo(),Df(t);else return t.lanes=t.childLanes=536870912,Jf(e,t,d!==null?d.baseLanes|n:n,n)}else d!==null?(oi(t,d.cachePool),Qd(t,d),jn(),t.memoizedState=null):(e!==null&&oi(t,null),vo(),jn());return Ie(e,t,o,n),t.child}function Jf(e,t,n,s){var o=uo();return o=o===null?null:{parent:Ye._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&oi(t,null),vo(),Df(t),e!==null&&Bs(e,t,s,!0),null}function ki(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function qo(e,t,n,s,o){return na(t),n=xo(e,t,n,s,void 0,o),s=_o(),e!==null&&!Pe?(wo(e,t,o),an(e,t,o)):(_e&&s&&no(t),t.flags|=1,Ie(e,t,n,o),t.child)}function Zf(e,t,n,s,o,d){return na(t),t.updateQueue=null,n=Pd(t,s,n,o),Kd(e),s=_o(),e!==null&&!Pe?(wo(e,t,d),an(e,t,d)):(_e&&s&&no(t),t.flags|=1,Ie(e,t,n,d),t.child)}function Wf(e,t,n,s,o){if(na(t),t.stateNode===null){var d=za,v=n.contextType;typeof v=="object"&&v!==null&&(d=at(v)),d=new n(s,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Uo,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=s,d.state=t.memoizedState,d.refs={},ho(t),v=n.contextType,d.context=typeof v=="object"&&v!==null?at(v):za,d.state=t.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(Do(t,n,v,s),d.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Uo.enqueueReplaceState(d,d.state,null),Qs(t,s,d,o),Xs(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){d=t.stateNode;var b=t.memoizedProps,_=ra(n,b);d.props=_;var O=d.context,H=n.contextType;v=za,typeof H=="object"&&H!==null&&(v=at(H));var X=n.getDerivedStateFromProps;H=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,H||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||O!==v)&&Lf(t,d,s,v),bn=!1;var C=t.memoizedState;d.state=C,Qs(t,s,d,o),Xs(),O=t.memoizedState,b||C!==O||bn?(typeof X=="function"&&(Do(t,n,X,s),O=t.memoizedState),(_=bn||Uf(t,n,_,s,C,O,v))?(H||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=O),d.props=s,d.state=O,d.context=v,s=_):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{d=t.stateNode,mo(e,t),v=t.memoizedProps,H=ra(n,v),d.props=H,X=t.pendingProps,C=d.context,O=n.contextType,_=za,typeof O=="object"&&O!==null&&(_=at(O)),b=n.getDerivedStateFromProps,(O=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==X||C!==_)&&Lf(t,d,s,_),bn=!1,C=t.memoizedState,d.state=C,Qs(t,s,d,o),Xs();var M=t.memoizedState;v!==X||C!==M||bn||e!==null&&e.dependencies!==null&&ii(e.dependencies)?(typeof b=="function"&&(Do(t,n,b,s),M=t.memoizedState),(H=bn||Uf(t,n,H,s,C,M,_)||e!==null&&e.dependencies!==null&&ii(e.dependencies))?(O||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,M,_),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,M,_)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=M),d.props=s,d.state=M,d.context=_,s=H):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),s=!1)}return d=s,ki(e,t),s=(t.flags&128)!==0,d||s?(d=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&s?(t.child=Ba(t,e.child,null,o),t.child=Ba(t,null,n,o)):Ie(e,t,n,o),t.memoizedState=d.state,e=t.child):e=an(e,t,o),e}function If(e,t,n,s){return Ls(),t.flags|=256,Ie(e,t,n,s),t.child}var Bo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $o(e){return{baseLanes:e,cachePool:qd()}}function Ho(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=At),e}function Ff(e,t,n){var s=t.pendingProps,o=!1,d=(t.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ve.current&2)!==0),v&&(o=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(_e){if(o?Sn(t):jn(),_e){var b=Le,_;if(_=b){e:{for(_=b,b=$t;_.nodeType!==8;){if(!b){b=null;break e}if(_=Mt(_.nextSibling),_===null){b=null;break e}}b=_}b!==null?(t.memoizedState={dehydrated:b,treeContext:Wn!==null?{id:Wt,overflow:It}:null,retryLane:536870912,hydrationErrors:null},_=pt(18,null,null,0),_.stateNode=b,_.return=t,t.child=_,rt=t,Le=null,_=!0):_=!1}_||ea(t)}if(b=t.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return jc(b)?t.lanes=32:t.lanes=536870912,null;nn(t)}return b=s.children,s=s.fallback,o?(jn(),o=t.mode,b=Ei({mode:"hidden",children:b},o),s=Zn(s,o,n,null),b.return=t,s.return=t,b.sibling=s,t.child=b,o=t.child,o.memoizedState=$o(n),o.childLanes=Ho(e,v,n),t.memoizedState=Bo,s):(Sn(t),Go(t,b))}if(_=e.memoizedState,_!==null&&(b=_.dehydrated,b!==null)){if(d)t.flags&256?(Sn(t),t.flags&=-257,t=Yo(e,t,n)):t.memoizedState!==null?(jn(),t.child=e.child,t.flags|=128,t=null):(jn(),o=s.fallback,b=t.mode,s=Ei({mode:"visible",children:s.children},b),o=Zn(o,b,n,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,Ba(t,e.child,null,n),s=t.child,s.memoizedState=$o(n),s.childLanes=Ho(e,v,n),t.memoizedState=Bo,t=o);else if(Sn(t),jc(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var O=v.dgst;v=O,s=Error(i(419)),s.stack="",s.digest=v,qs({value:s,source:null,stack:null}),t=Yo(e,t,n)}else if(Pe||Bs(e,t,n,!1),v=(n&e.childLanes)!==0,Pe||v){if(v=Ae,v!==null&&(s=n&-n,s=(s&42)!==0?1:jl(s),s=(s&(v.suspendedLanes|n))!==0?0:s,s!==0&&s!==_.retryLane))throw _.retryLane=s,Ta(e,s),_t(v,e,s),Vf;b.data==="$?"||lc(),t=Yo(e,t,n)}else b.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=_.treeContext,Le=Mt(b.nextSibling),rt=t,_e=!0,Fn=null,$t=!1,e!==null&&(Nt[Tt++]=Wt,Nt[Tt++]=It,Nt[Tt++]=Wn,Wt=e.id,It=e.overflow,Wn=t),t=Go(t,s.children),t.flags|=4096);return t}return o?(jn(),o=s.fallback,b=t.mode,_=e.child,O=_.sibling,s=Zt(_,{mode:"hidden",children:s.children}),s.subtreeFlags=_.subtreeFlags&65011712,O!==null?o=Zt(O,o):(o=Zn(o,b,n,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,b=e.child.memoizedState,b===null?b=$o(n):(_=b.cachePool,_!==null?(O=Ye._currentValue,_=_.parent!==O?{parent:O,pool:O}:_):_=qd(),b={baseLanes:b.baseLanes|n,cachePool:_}),o.memoizedState=b,o.childLanes=Ho(e,v,n),t.memoizedState=Bo,s):(Sn(t),n=e.child,e=n.sibling,n=Zt(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=n,t.memoizedState=null,n)}function Go(e,t){return t=Ei({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ei(e,t){return e=pt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Yo(e,t,n){return Ba(t,e.child,null,n),e=Go(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eh(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),io(e.return,t,n)}function Vo(e,t,n,s,o){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:o}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=n,d.tailMode=o)}function th(e,t,n){var s=t.pendingProps,o=s.revealOrder,d=s.tail;if(Ie(e,t,s.children,n),s=Ve.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eh(e,n,t);else if(e.tag===19)eh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(W(Ve,s),o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&wi(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Vo(t,!1,o,n,d);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&wi(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Vo(t,!0,n,null,d);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function an(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),zn|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Bs(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=Zt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Xo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ii(e)))}function Sp(e,t,n){switch(t.tag){case 3:Ce(t,t.stateNode.containerInfo),yn(t,Ye,e.memoizedState.cache),Ls();break;case 27:case 5:bl(t);break;case 4:Ce(t,t.stateNode.containerInfo);break;case 10:yn(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Sn(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Ff(e,t,n):(Sn(t),e=an(e,t,n),e!==null?e.sibling:null);Sn(t);break;case 19:var o=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(Bs(e,t,n,!1),s=(n&t.childLanes)!==0),o){if(s)return th(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),W(Ve,Ve.current),s)break;return null;case 22:case 23:return t.lanes=0,Pf(e,t,n);case 24:yn(t,Ye,e.memoizedState.cache)}return an(e,t,n)}function nh(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Pe=!0;else{if(!Xo(e,n)&&(t.flags&128)===0)return Pe=!1,Sp(e,t,n);Pe=(e.flags&131072)!==0}else Pe=!1,_e&&(t.flags&1048576)!==0&&Od(t,ri,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,o=s._init;if(s=o(s._payload),t.type=s,typeof s=="function")Fl(s)?(e=ra(s,e),t.tag=1,t=Wf(null,t,s,e,n)):(t.tag=0,t=qo(null,t,s,e,n));else{if(s!=null){if(o=s.$$typeof,o===D){t.tag=11,t=Xf(null,t,s,e,n);break e}else if(o===L){t.tag=14,t=Qf(null,t,s,e,n);break e}}throw t=Ne(s)||s,Error(i(306,t,""))}}return t;case 0:return qo(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,o=ra(s,t.pendingProps),Wf(e,t,s,o,n);case 3:e:{if(Ce(t,t.stateNode.containerInfo),e===null)throw Error(i(387));s=t.pendingProps;var d=t.memoizedState;o=d.element,mo(e,t),Qs(t,s,null,n);var v=t.memoizedState;if(s=v.cache,yn(t,Ye,s),s!==d.cache&&lo(t,[Ye],n,!0),Xs(),s=v.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=If(e,t,s,n);break e}else if(s!==o){o=kt(Error(i(424)),t),qs(o),t=If(e,t,s,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Le=Mt(e.firstChild),rt=t,_e=!0,Fn=null,$t=!0,n=Mf(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ls(),s===o){t=an(e,t,n);break e}Ie(e,t,s,n)}t=t.child}return t;case 26:return ki(e,t),e===null?(n=i0(t.type,null,t.pendingProps,null))?t.memoizedState=n:_e||(n=t.type,e=t.pendingProps,s=$i(ce.current).createElement(n),s[nt]=t,s[lt]=e,et(s,n,e),Ke(s),t.stateNode=s):t.memoizedState=i0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return bl(t),e===null&&_e&&(s=t.stateNode=a0(t.type,t.pendingProps,ce.current),rt=t,$t=!0,o=Le,Cn(t.type)?(kc=o,Le=Mt(s.firstChild)):Le=o),Ie(e,t,t.pendingProps.children,n),ki(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_e&&((o=s=Le)&&(s=Wp(s,t.type,t.pendingProps,$t),s!==null?(t.stateNode=s,rt=t,Le=Mt(s.firstChild),$t=!1,o=!0):o=!1),o||ea(t)),bl(t),o=t.type,d=t.pendingProps,v=e!==null?e.memoizedProps:null,s=d.children,_c(o,d)?s=null:v!==null&&_c(o,v)&&(t.flags|=32),t.memoizedState!==null&&(o=xo(e,t,gp,null,null,n),mr._currentValue=o),ki(e,t),Ie(e,t,s,n),t.child;case 6:return e===null&&_e&&((e=n=Le)&&(n=Ip(n,t.pendingProps,$t),n!==null?(t.stateNode=n,rt=t,Le=null,e=!0):e=!1),e||ea(t)),null;case 13:return Ff(e,t,n);case 4:return Ce(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ba(t,null,s,n):Ie(e,t,s,n),t.child;case 11:return Xf(e,t,t.type,t.pendingProps,n);case 7:return Ie(e,t,t.pendingProps,n),t.child;case 8:return Ie(e,t,t.pendingProps.children,n),t.child;case 12:return Ie(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,yn(t,t.type,s.value),Ie(e,t,s.children,n),t.child;case 9:return o=t.type._context,s=t.pendingProps.children,na(t),o=at(o),s=s(o),t.flags|=1,Ie(e,t,s,n),t.child;case 14:return Qf(e,t,t.type,t.pendingProps,n);case 15:return Kf(e,t,t.type,t.pendingProps,n);case 19:return th(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},e===null?(n=Ei(s,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Zt(e.child,s),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Pf(e,t,n);case 24:return na(t),s=at(Ye),e===null?(o=uo(),o===null&&(o=Ae,d=oo(),o.pooledCache=d,d.refCount++,d!==null&&(o.pooledCacheLanes|=n),o=d),t.memoizedState={parent:s,cache:o},ho(t),yn(t,Ye,o)):((e.lanes&n)!==0&&(mo(e,t),Qs(t,null,null,n),Xs()),o=e.memoizedState,d=t.memoizedState,o.parent!==s?(o={parent:s,cache:s},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),yn(t,Ye,s)):(s=d.cache,yn(t,Ye,s),s!==o.cache&&lo(t,[Ye],n,!0))),Ie(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function sn(e){e.flags|=4}function ah(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!d0(t)){if(t=zt.current,t!==null&&((ye&4194048)===ye?Ht!==null:(ye&62914560)!==ye&&(ye&536870912)===0||t!==Ht))throw Ys=fo,Bd;e.flags|=8192}}function Ni(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Mu():536870912,e.lanes|=t,Ya|=t)}function Fs(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ue(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags&65011712,s|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function jp(e,t,n){var s=t.pendingProps;switch(ao(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(t),null;case 1:return Ue(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),en(Ye),mn(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Us(t)?sn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Md())),Ue(t),null;case 26:return n=t.memoizedState,e===null?(sn(t),n!==null?(Ue(t),ah(t,n)):(Ue(t),t.flags&=-16777217)):n?n!==e.memoizedState?(sn(t),Ue(t),ah(t,n)):(Ue(t),t.flags&=-16777217):(e.memoizedProps!==s&&sn(t),Ue(t),t.flags&=-16777217),null;case 27:qr(t),n=ce.current;var o=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&sn(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Ue(t),null}e=ae.current,Us(t)?Rd(t):(e=a0(o,s,n),t.stateNode=e,sn(t))}return Ue(t),null;case 5:if(qr(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&sn(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Ue(t),null}if(e=ae.current,Us(t))Rd(t);else{switch(o=$i(ce.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?o.createElement(n,{is:s.is}):o.createElement(n)}}e[nt]=t,e[lt]=s;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(et(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&sn(t)}}return Ue(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&sn(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(e=ce.current,Us(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,o=rt,o!==null)switch(o.tag){case 27:case 5:s=o.memoizedProps}e[nt]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||Zh(e.nodeValue,n)),e||ea(t)}else e=$i(e).createTextNode(s),e[nt]=t,t.stateNode=e}return Ue(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Us(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(i(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));o[nt]=t}else Ls(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ue(t),o=!1}else o=Md(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(nn(t),t):(nn(t),null)}if(nn(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=s!==null,e=e!==null&&e.memoizedState!==null,n){s=t.child,o=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(o=s.alternate.memoizedState.cachePool.pool);var d=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==o&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Ni(t,t.updateQueue),Ue(t),null;case 4:return mn(),e===null&&pc(t.stateNode.containerInfo),Ue(t),null;case 10:return en(t.type),Ue(t),null;case 19:if(ee(Ve),o=t.memoizedState,o===null)return Ue(t),null;if(s=(t.flags&128)!==0,d=o.rendering,d===null)if(s)Fs(o,!1);else{if(qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=wi(e),d!==null){for(t.flags|=128,Fs(o,!1),e=d.updateQueue,t.updateQueue=e,Ni(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Ad(n,e),n=n.sibling;return W(Ve,Ve.current&1|2),t.child}e=e.sibling}o.tail!==null&&Bt()>Ai&&(t.flags|=128,s=!0,Fs(o,!1),t.lanes=4194304)}else{if(!s)if(e=wi(d),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Ni(t,e),Fs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!_e)return Ue(t),null}else 2*Bt()-o.renderingStartTime>Ai&&n!==536870912&&(t.flags|=128,s=!0,Fs(o,!1),t.lanes=4194304);o.isBackwards?(d.sibling=t.child,t.child=d):(e=o.last,e!==null?e.sibling=d:t.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Bt(),t.sibling=null,e=Ve.current,W(Ve,s?e&1|2:e&1),t):(Ue(t),null);case 22:case 23:return nn(t),yo(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(n&536870912)!==0&&(t.flags&128)===0&&(Ue(t),t.subtreeFlags&6&&(t.flags|=8192)):Ue(t),n=t.updateQueue,n!==null&&Ni(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&ee(aa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),en(Ye),Ue(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function kp(e,t){switch(ao(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return en(Ye),mn(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return qr(t),null;case 13:if(nn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ee(Ve),null;case 4:return mn(),null;case 10:return en(t.type),null;case 22:case 23:return nn(t),yo(),e!==null&&ee(aa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return en(Ye),null;case 25:return null;default:return null}}function sh(e,t){switch(ao(t),t.tag){case 3:en(Ye),mn();break;case 26:case 27:case 5:qr(t);break;case 4:mn();break;case 13:nn(t);break;case 19:ee(Ve);break;case 10:en(t.type);break;case 22:case 23:nn(t),yo(),e!==null&&ee(aa);break;case 24:en(Ye)}}function er(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var o=s.next;n=o;do{if((n.tag&e)===e){s=void 0;var d=n.create,v=n.inst;s=d(),v.destroy=s}n=n.next}while(n!==o)}}catch(b){ze(t,t.return,b)}}function kn(e,t,n){try{var s=t.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var d=o.next;s=d;do{if((s.tag&e)===e){var v=s.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,o=t;var _=n,O=b;try{O()}catch(H){ze(o,_,H)}}}s=s.next}while(s!==d)}}catch(H){ze(t,t.return,H)}}function rh(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Xd(t,n)}catch(s){ze(e,e.return,s)}}}function ih(e,t,n){n.props=ra(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){ze(e,t,s)}}function tr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof n=="function"?e.refCleanup=n(s):n.current=s}}catch(o){ze(e,t,o)}}function Gt(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(o){ze(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){ze(e,t,o)}else n.current=null}function lh(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(o){ze(e,e.return,o)}}function Qo(e,t,n){try{var s=e.stateNode;Qp(s,e.type,n,t),s[lt]=t}catch(o){ze(e,e.return,o)}}function oh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Cn(e.type)||e.tag===4}function Ko(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Cn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Po(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bi));else if(s!==4&&(s===27&&Cn(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Po(e,t,n),e=e.sibling;e!==null;)Po(e,t,n),e=e.sibling}function Ti(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(s===27&&Cn(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ti(e,t,n),e=e.sibling;e!==null;)Ti(e,t,n),e=e.sibling}function ch(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);et(t,s,n),t[nt]=e,t[lt]=n}catch(d){ze(e,e.return,d)}}var rn=!1,$e=!1,Jo=!1,uh=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Ep(e,t){if(e=e.containerInfo,bc=Qi,e=xd(e),Ql(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var o=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var v=0,b=-1,_=-1,O=0,H=0,X=e,C=null;t:for(;;){for(var M;X!==n||o!==0&&X.nodeType!==3||(b=v+o),X!==d||s!==0&&X.nodeType!==3||(_=v+s),X.nodeType===3&&(v+=X.nodeValue.length),(M=X.firstChild)!==null;)C=X,X=M;for(;;){if(X===e)break t;if(C===n&&++O===o&&(b=v),C===d&&++H===s&&(_=v),(M=X.nextSibling)!==null)break;X=C,C=X.parentNode}X=M}n=b===-1||_===-1?null:{start:b,end:_}}else n=null}n=n||{start:0,end:0}}else n=null;for(xc={focusedElem:e,selectionRange:n},Qi=!1,Je=t;Je!==null;)if(t=Je,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Je=e;else for(;Je!==null;){switch(t=Je,d=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,n=t,o=d.memoizedProps,d=d.memoizedState,s=n.stateNode;try{var le=ra(n.type,o,n.elementType===n.type);e=s.getSnapshotBeforeUpdate(le,d),s.__reactInternalSnapshotBeforeUpdate=e}catch(se){ze(n,n.return,se)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Sc(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Sc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,Je=e;break}Je=t.return}}function dh(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:En(e,n),s&4&&er(5,n);break;case 1:if(En(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(v){ze(n,n.return,v)}else{var o=ra(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ze(n,n.return,v)}}s&64&&rh(n),s&512&&tr(n,n.return);break;case 3:if(En(e,n),s&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Xd(e,t)}catch(v){ze(n,n.return,v)}}break;case 27:t===null&&s&4&&ch(n);case 26:case 5:En(e,n),t===null&&s&4&&lh(n),s&512&&tr(n,n.return);break;case 12:En(e,n);break;case 13:En(e,n),s&4&&mh(e,n),s&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Dp.bind(null,n),Fp(e,n))));break;case 22:if(s=n.memoizedState!==null||rn,!s){t=t!==null&&t.memoizedState!==null||$e,o=rn;var d=$e;rn=s,($e=t)&&!d?Nn(e,n,(n.subtreeFlags&8772)!==0):En(e,n),rn=o,$e=d}break;case 30:break;default:En(e,n)}}function fh(e){var t=e.alternate;t!==null&&(e.alternate=null,fh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Nl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Me=null,ut=!1;function ln(e,t,n){for(n=n.child;n!==null;)hh(e,t,n),n=n.sibling}function hh(e,t,n){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(ws,n)}catch{}switch(n.tag){case 26:$e||Gt(n,t),ln(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:$e||Gt(n,t);var s=Me,o=ut;Cn(n.type)&&(Me=n.stateNode,ut=!1),ln(e,t,n),ur(n.stateNode),Me=s,ut=o;break;case 5:$e||Gt(n,t);case 6:if(s=Me,o=ut,Me=null,ln(e,t,n),Me=s,ut=o,Me!==null)if(ut)try{(Me.nodeType===9?Me.body:Me.nodeName==="HTML"?Me.ownerDocument.body:Me).removeChild(n.stateNode)}catch(d){ze(n,t,d)}else try{Me.removeChild(n.stateNode)}catch(d){ze(n,t,d)}break;case 18:Me!==null&&(ut?(e=Me,t0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),yr(e)):t0(Me,n.stateNode));break;case 4:s=Me,o=ut,Me=n.stateNode.containerInfo,ut=!0,ln(e,t,n),Me=s,ut=o;break;case 0:case 11:case 14:case 15:$e||kn(2,n,t),$e||kn(4,n,t),ln(e,t,n);break;case 1:$e||(Gt(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&ih(n,t,s)),ln(e,t,n);break;case 21:ln(e,t,n);break;case 22:$e=(s=$e)||n.memoizedState!==null,ln(e,t,n),$e=s;break;default:ln(e,t,n)}}function mh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{yr(e)}catch(n){ze(t,t.return,n)}}function Np(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new uh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new uh),t;default:throw Error(i(435,e.tag))}}function Zo(e,t){var n=Np(e);t.forEach(function(s){var o=Up.bind(null,e,s);n.has(s)||(n.add(s),s.then(o,o))})}function vt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var o=n[s],d=e,v=t,b=v;e:for(;b!==null;){switch(b.tag){case 27:if(Cn(b.type)){Me=b.stateNode,ut=!1;break e}break;case 5:Me=b.stateNode,ut=!1;break e;case 3:case 4:Me=b.stateNode.containerInfo,ut=!0;break e}b=b.return}if(Me===null)throw Error(i(160));hh(d,v,o),Me=null,ut=!1,d=o.alternate,d!==null&&(d.return=null),o.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)gh(t,e),t=t.sibling}var Ct=null;function gh(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vt(t,e),yt(e),s&4&&(kn(3,e,e.return),er(3,e),kn(5,e,e.return));break;case 1:vt(t,e),yt(e),s&512&&($e||n===null||Gt(n,n.return)),s&64&&rn&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var o=Ct;if(vt(t,e),yt(e),s&512&&($e||n===null||Gt(n,n.return)),s&4){var d=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(s){case"title":d=o.getElementsByTagName("title")[0],(!d||d[ks]||d[nt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=o.createElement(s),o.head.insertBefore(d,o.querySelector("head > title"))),et(d,s,n),d[nt]=e,Ke(d),s=d;break e;case"link":var v=c0("link","href",o).get(s+(n.href||""));if(v){for(var b=0;b<v.length;b++)if(d=v[b],d.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&d.getAttribute("rel")===(n.rel==null?null:n.rel)&&d.getAttribute("title")===(n.title==null?null:n.title)&&d.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){v.splice(b,1);break t}}d=o.createElement(s),et(d,s,n),o.head.appendChild(d);break;case"meta":if(v=c0("meta","content",o).get(s+(n.content||""))){for(b=0;b<v.length;b++)if(d=v[b],d.getAttribute("content")===(n.content==null?null:""+n.content)&&d.getAttribute("name")===(n.name==null?null:n.name)&&d.getAttribute("property")===(n.property==null?null:n.property)&&d.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&d.getAttribute("charset")===(n.charSet==null?null:n.charSet)){v.splice(b,1);break t}}d=o.createElement(s),et(d,s,n),o.head.appendChild(d);break;default:throw Error(i(468,s))}d[nt]=e,Ke(d),s=d}e.stateNode=s}else u0(o,e.type,e.stateNode);else e.stateNode=o0(o,s,e.memoizedProps);else d!==s?(d===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):d.count--,s===null?u0(o,e.type,e.stateNode):o0(o,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Qo(e,e.memoizedProps,n.memoizedProps)}break;case 27:vt(t,e),yt(e),s&512&&($e||n===null||Gt(n,n.return)),n!==null&&s&4&&Qo(e,e.memoizedProps,n.memoizedProps);break;case 5:if(vt(t,e),yt(e),s&512&&($e||n===null||Gt(n,n.return)),e.flags&32){o=e.stateNode;try{_a(o,"")}catch(M){ze(e,e.return,M)}}s&4&&e.stateNode!=null&&(o=e.memoizedProps,Qo(e,o,n!==null?n.memoizedProps:o)),s&1024&&(Jo=!0);break;case 6:if(vt(t,e),yt(e),s&4){if(e.stateNode===null)throw Error(i(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(M){ze(e,e.return,M)}}break;case 3:if(Yi=null,o=Ct,Ct=Hi(t.containerInfo),vt(t,e),Ct=o,yt(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{yr(t.containerInfo)}catch(M){ze(e,e.return,M)}Jo&&(Jo=!1,ph(e));break;case 4:s=Ct,Ct=Hi(e.stateNode.containerInfo),vt(t,e),yt(e),Ct=s;break;case 12:vt(t,e),yt(e);break;case 13:vt(t,e),yt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(nc=Bt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Zo(e,s)));break;case 22:o=e.memoizedState!==null;var _=n!==null&&n.memoizedState!==null,O=rn,H=$e;if(rn=O||o,$e=H||_,vt(t,e),$e=H,rn=O,yt(e),s&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||_||rn||$e||ia(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){_=n=t;try{if(d=_.stateNode,o)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=_.stateNode;var X=_.memoizedProps.style,C=X!=null&&X.hasOwnProperty("display")?X.display:null;b.style.display=C==null||typeof C=="boolean"?"":(""+C).trim()}}catch(M){ze(_,_.return,M)}}}else if(t.tag===6){if(n===null){_=t;try{_.stateNode.nodeValue=o?"":_.memoizedProps}catch(M){ze(_,_.return,M)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Zo(e,n))));break;case 19:vt(t,e),yt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Zo(e,s)));break;case 30:break;case 21:break;default:vt(t,e),yt(e)}}function yt(e){var t=e.flags;if(t&2){try{for(var n,s=e.return;s!==null;){if(oh(s)){n=s;break}s=s.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var o=n.stateNode,d=Ko(e);Ti(e,d,o);break;case 5:var v=n.stateNode;n.flags&32&&(_a(v,""),n.flags&=-33);var b=Ko(e);Ti(e,b,v);break;case 3:case 4:var _=n.stateNode.containerInfo,O=Ko(e);Po(e,O,_);break;default:throw Error(i(161))}}catch(H){ze(e,e.return,H)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ph(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ph(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function En(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)dh(e,t.alternate,t),t=t.sibling}function ia(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:kn(4,t,t.return),ia(t);break;case 1:Gt(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&ih(t,t.return,n),ia(t);break;case 27:ur(t.stateNode);case 26:case 5:Gt(t,t.return),ia(t);break;case 22:t.memoizedState===null&&ia(t);break;case 30:ia(t);break;default:ia(t)}e=e.sibling}}function Nn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,o=e,d=t,v=d.flags;switch(d.tag){case 0:case 11:case 15:Nn(o,d,n),er(4,d);break;case 1:if(Nn(o,d,n),s=d,o=s.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(O){ze(s,s.return,O)}if(s=d,o=s.updateQueue,o!==null){var b=s.stateNode;try{var _=o.shared.hiddenCallbacks;if(_!==null)for(o.shared.hiddenCallbacks=null,o=0;o<_.length;o++)Vd(_[o],b)}catch(O){ze(s,s.return,O)}}n&&v&64&&rh(d),tr(d,d.return);break;case 27:ch(d);case 26:case 5:Nn(o,d,n),n&&s===null&&v&4&&lh(d),tr(d,d.return);break;case 12:Nn(o,d,n);break;case 13:Nn(o,d,n),n&&v&4&&mh(o,d);break;case 22:d.memoizedState===null&&Nn(o,d,n),tr(d,d.return);break;case 30:break;default:Nn(o,d,n)}t=t.sibling}}function Wo(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&$s(n))}function Io(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$s(e))}function Yt(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vh(e,t,n,s),t=t.sibling}function vh(e,t,n,s){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Yt(e,t,n,s),o&2048&&er(9,t);break;case 1:Yt(e,t,n,s);break;case 3:Yt(e,t,n,s),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$s(e)));break;case 12:if(o&2048){Yt(e,t,n,s),e=t.stateNode;try{var d=t.memoizedProps,v=d.id,b=d.onPostCommit;typeof b=="function"&&b(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(_){ze(t,t.return,_)}}else Yt(e,t,n,s);break;case 13:Yt(e,t,n,s);break;case 23:break;case 22:d=t.stateNode,v=t.alternate,t.memoizedState!==null?d._visibility&2?Yt(e,t,n,s):nr(e,t):d._visibility&2?Yt(e,t,n,s):(d._visibility|=2,$a(e,t,n,s,(t.subtreeFlags&10256)!==0)),o&2048&&Wo(v,t);break;case 24:Yt(e,t,n,s),o&2048&&Io(t.alternate,t);break;default:Yt(e,t,n,s)}}function $a(e,t,n,s,o){for(o=o&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var d=e,v=t,b=n,_=s,O=v.flags;switch(v.tag){case 0:case 11:case 15:$a(d,v,b,_,o),er(8,v);break;case 23:break;case 22:var H=v.stateNode;v.memoizedState!==null?H._visibility&2?$a(d,v,b,_,o):nr(d,v):(H._visibility|=2,$a(d,v,b,_,o)),o&&O&2048&&Wo(v.alternate,v);break;case 24:$a(d,v,b,_,o),o&&O&2048&&Io(v.alternate,v);break;default:$a(d,v,b,_,o)}t=t.sibling}}function nr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,o=s.flags;switch(s.tag){case 22:nr(n,s),o&2048&&Wo(s.alternate,s);break;case 24:nr(n,s),o&2048&&Io(s.alternate,s);break;default:nr(n,s)}t=t.sibling}}var ar=8192;function Ha(e){if(e.subtreeFlags&ar)for(e=e.child;e!==null;)yh(e),e=e.sibling}function yh(e){switch(e.tag){case 26:Ha(e),e.flags&ar&&e.memoizedState!==null&&fv(Ct,e.memoizedState,e.memoizedProps);break;case 5:Ha(e);break;case 3:case 4:var t=Ct;Ct=Hi(e.stateNode.containerInfo),Ha(e),Ct=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=ar,ar=16777216,Ha(e),ar=t):Ha(e));break;default:Ha(e)}}function bh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function sr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];Je=s,_h(s,e)}bh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)xh(e),e=e.sibling}function xh(e){switch(e.tag){case 0:case 11:case 15:sr(e),e.flags&2048&&kn(9,e,e.return);break;case 3:sr(e);break;case 12:sr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,zi(e)):sr(e);break;default:sr(e)}}function zi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];Je=s,_h(s,e)}bh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:kn(8,t,t.return),zi(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,zi(t));break;default:zi(t)}e=e.sibling}}function _h(e,t){for(;Je!==null;){var n=Je;switch(n.tag){case 0:case 11:case 15:kn(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:$s(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Je=s;else e:for(n=e;Je!==null;){s=Je;var o=s.sibling,d=s.return;if(fh(s),s===n){Je=null;break e}if(o!==null){o.return=d,Je=o;break e}Je=d}}}var Tp={getCacheForType:function(e){var t=at(Ye),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},zp=typeof WeakMap=="function"?WeakMap:Map,we=0,Ae=null,me=null,ye=0,Se=0,bt=null,Tn=!1,Ga=!1,Fo=!1,on=0,qe=0,zn=0,la=0,ec=0,At=0,Ya=0,rr=null,dt=null,tc=!1,nc=0,Ai=1/0,Oi=null,An=null,Fe=0,On=null,Va=null,Xa=0,ac=0,sc=null,wh=null,ir=0,rc=null;function xt(){if((we&2)!==0&&ye!==0)return ye&-ye;if(G.T!==null){var e=Ra;return e!==0?e:fc()}return Lu()}function Sh(){At===0&&(At=(ye&536870912)===0||_e?Cu():536870912);var e=zt.current;return e!==null&&(e.flags|=32),At}function _t(e,t,n){(e===Ae&&(Se===2||Se===9)||e.cancelPendingCommit!==null)&&(Qa(e,0),Rn(e,ye,At,!1)),js(e,n),((we&2)===0||e!==Ae)&&(e===Ae&&((we&2)===0&&(la|=n),qe===4&&Rn(e,ye,At,!1)),Vt(e))}function jh(e,t,n){if((we&6)!==0)throw Error(i(327));var s=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Ss(e,t),o=s?Rp(e,t):oc(e,t,!0),d=s;do{if(o===0){Ga&&!s&&Rn(e,t,0,!1);break}else{if(n=e.current.alternate,d&&!Ap(n)){o=oc(e,t,!1),d=!1;continue}if(o===2){if(d=t,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var b=e;o=rr;var _=b.current.memoizedState.isDehydrated;if(_&&(Qa(b,v).flags|=256),v=oc(b,v,!1),v!==2){if(Fo&&!_){b.errorRecoveryDisabledLanes|=d,la|=d,o=4;break e}d=dt,dt=o,d!==null&&(dt===null?dt=d:dt.push.apply(dt,d))}o=v}if(d=!1,o!==2)continue}}if(o===1){Qa(e,0),Rn(e,t,0,!0);break}e:{switch(s=e,d=o,d){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Rn(s,t,At,!Tn);break e;case 2:dt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(o=nc+300-Bt(),10<o)){if(Rn(s,t,At,!Tn),Gr(s,0,!0)!==0)break e;s.timeoutHandle=Fh(kh.bind(null,s,n,dt,Oi,tc,t,At,la,Ya,Tn,d,2,-0,0),o);break e}kh(s,n,dt,Oi,tc,t,At,la,Ya,Tn,d,0,-0,0)}}break}while(!0);Vt(e)}function kh(e,t,n,s,o,d,v,b,_,O,H,X,C,M){if(e.timeoutHandle=-1,X=t.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(hr={stylesheets:null,count:0,unsuspend:dv},yh(t),X=hv(),X!==null)){e.cancelPendingCommit=X(Rh.bind(null,e,t,d,n,s,o,v,b,_,H,1,C,M)),Rn(e,d,v,!O);return}Rh(e,t,d,n,s,o,v,b,_)}function Ap(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var o=n[s],d=o.getSnapshot;o=o.value;try{if(!gt(d(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rn(e,t,n,s){t&=~ec,t&=~la,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var o=t;0<o;){var d=31-mt(o),v=1<<d;s[d]=-1,o&=~v}n!==0&&Du(e,n,t)}function Ri(){return(we&6)===0?(lr(0),!1):!0}function ic(){if(me!==null){if(Se===0)var e=me.return;else e=me,Ft=ta=null,So(e),qa=null,Ws=0,e=me;for(;e!==null;)sh(e.alternate,e),e=e.return;me=null}}function Qa(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Pp(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),ic(),Ae=e,me=n=Zt(e.current,null),ye=t,Se=0,bt=null,Tn=!1,Ga=Ss(e,t),Fo=!1,Ya=At=ec=la=zn=qe=0,dt=rr=null,tc=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var o=31-mt(s),d=1<<o;t|=e[o],s&=~d}return on=t,ei(),n}function Eh(e,t){fe=null,G.H=bi,t===Gs||t===ci?(t=Gd(),Se=3):t===Bd?(t=Gd(),Se=4):Se=t===Vf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,bt=t,me===null&&(qe=1,ji(e,kt(t,e.current)))}function Nh(){var e=G.H;return G.H=bi,e===null?bi:e}function Th(){var e=G.A;return G.A=Tp,e}function lc(){qe=4,Tn||(ye&4194048)!==ye&&zt.current!==null||(Ga=!0),(zn&134217727)===0&&(la&134217727)===0||Ae===null||Rn(Ae,ye,At,!1)}function oc(e,t,n){var s=we;we|=2;var o=Nh(),d=Th();(Ae!==e||ye!==t)&&(Oi=null,Qa(e,t)),t=!1;var v=qe;e:do try{if(Se!==0&&me!==null){var b=me,_=bt;switch(Se){case 8:ic(),v=6;break e;case 3:case 2:case 9:case 6:zt.current===null&&(t=!0);var O=Se;if(Se=0,bt=null,Ka(e,b,_,O),n&&Ga){v=0;break e}break;default:O=Se,Se=0,bt=null,Ka(e,b,_,O)}}Op(),v=qe;break}catch(H){Eh(e,H)}while(!0);return t&&e.shellSuspendCounter++,Ft=ta=null,we=s,G.H=o,G.A=d,me===null&&(Ae=null,ye=0,ei()),v}function Op(){for(;me!==null;)zh(me)}function Rp(e,t){var n=we;we|=2;var s=Nh(),o=Th();Ae!==e||ye!==t?(Oi=null,Ai=Bt()+500,Qa(e,t)):Ga=Ss(e,t);e:do try{if(Se!==0&&me!==null){t=me;var d=bt;t:switch(Se){case 1:Se=0,bt=null,Ka(e,t,d,1);break;case 2:case 9:if($d(d)){Se=0,bt=null,Ah(t);break}t=function(){Se!==2&&Se!==9||Ae!==e||(Se=7),Vt(e)},d.then(t,t);break e;case 3:Se=7;break e;case 4:Se=5;break e;case 7:$d(d)?(Se=0,bt=null,Ah(t)):(Se=0,bt=null,Ka(e,t,d,7));break;case 5:var v=null;switch(me.tag){case 26:v=me.memoizedState;case 5:case 27:var b=me;if(!v||d0(v)){Se=0,bt=null;var _=b.sibling;if(_!==null)me=_;else{var O=b.return;O!==null?(me=O,Ci(O)):me=null}break t}}Se=0,bt=null,Ka(e,t,d,5);break;case 6:Se=0,bt=null,Ka(e,t,d,6);break;case 8:ic(),qe=6;break e;default:throw Error(i(462))}}Cp();break}catch(H){Eh(e,H)}while(!0);return Ft=ta=null,G.H=s,G.A=o,we=n,me!==null?0:(Ae=null,ye=0,ei(),qe)}function Cp(){for(;me!==null&&!tg();)zh(me)}function zh(e){var t=nh(e.alternate,e,on);e.memoizedProps=e.pendingProps,t===null?Ci(e):me=t}function Ah(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Zf(n,t,t.pendingProps,t.type,void 0,ye);break;case 11:t=Zf(n,t,t.pendingProps,t.type.render,t.ref,ye);break;case 5:So(t);default:sh(n,t),t=me=Ad(t,on),t=nh(n,t,on)}e.memoizedProps=e.pendingProps,t===null?Ci(e):me=t}function Ka(e,t,n,s){Ft=ta=null,So(t),qa=null,Ws=0;var o=t.return;try{if(wp(e,o,t,n,ye)){qe=1,ji(e,kt(n,e.current)),me=null;return}}catch(d){if(o!==null)throw me=o,d;qe=1,ji(e,kt(n,e.current)),me=null;return}t.flags&32768?(_e||s===1?e=!0:Ga||(ye&536870912)!==0?e=!1:(Tn=e=!0,(s===2||s===9||s===3||s===6)&&(s=zt.current,s!==null&&s.tag===13&&(s.flags|=16384))),Oh(t,e)):Ci(t)}function Ci(e){var t=e;do{if((t.flags&32768)!==0){Oh(t,Tn);return}e=t.return;var n=jp(t.alternate,t,on);if(n!==null){me=n;return}if(t=t.sibling,t!==null){me=t;return}me=t=e}while(t!==null);qe===0&&(qe=5)}function Oh(e,t){do{var n=kp(e.alternate,e);if(n!==null){n.flags&=32767,me=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){me=e;return}me=e=n}while(e!==null);qe=6,me=null}function Rh(e,t,n,s,o,d,v,b,_){e.cancelPendingCommit=null;do Mi();while(Fe!==0);if((we&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(d=t.lanes|t.childLanes,d|=Wl,dg(e,n,d,v,b,_),e===Ae&&(me=Ae=null,ye=0),Va=t,On=e,Xa=n,ac=d,sc=o,wh=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Lp(Br,function(){return Lh(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=G.T,G.T=null,o=I.p,I.p=2,v=we,we|=4;try{Ep(e,t,n)}finally{we=v,I.p=o,G.T=s}}Fe=1,Ch(),Mh(),Dh()}}function Ch(){if(Fe===1){Fe=0;var e=On,t=Va,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=G.T,G.T=null;var s=I.p;I.p=2;var o=we;we|=4;try{gh(t,e);var d=xc,v=xd(e.containerInfo),b=d.focusedElem,_=d.selectionRange;if(v!==b&&b&&b.ownerDocument&&bd(b.ownerDocument.documentElement,b)){if(_!==null&&Ql(b)){var O=_.start,H=_.end;if(H===void 0&&(H=O),"selectionStart"in b)b.selectionStart=O,b.selectionEnd=Math.min(H,b.value.length);else{var X=b.ownerDocument||document,C=X&&X.defaultView||window;if(C.getSelection){var M=C.getSelection(),le=b.textContent.length,se=Math.min(_.start,le),Ee=_.end===void 0?se:Math.min(_.end,le);!M.extend&&se>Ee&&(v=Ee,Ee=se,se=v);var N=yd(b,se),k=yd(b,Ee);if(N&&k&&(M.rangeCount!==1||M.anchorNode!==N.node||M.anchorOffset!==N.offset||M.focusNode!==k.node||M.focusOffset!==k.offset)){var A=X.createRange();A.setStart(N.node,N.offset),M.removeAllRanges(),se>Ee?(M.addRange(A),M.extend(k.node,k.offset)):(A.setEnd(k.node,k.offset),M.addRange(A))}}}}for(X=[],M=b;M=M.parentNode;)M.nodeType===1&&X.push({element:M,left:M.scrollLeft,top:M.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<X.length;b++){var Y=X[b];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Qi=!!bc,xc=bc=null}finally{we=o,I.p=s,G.T=n}}e.current=t,Fe=2}}function Mh(){if(Fe===2){Fe=0;var e=On,t=Va,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=G.T,G.T=null;var s=I.p;I.p=2;var o=we;we|=4;try{dh(e,t.alternate,t)}finally{we=o,I.p=s,G.T=n}}Fe=3}}function Dh(){if(Fe===4||Fe===3){Fe=0,ng();var e=On,t=Va,n=Xa,s=wh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Fe=5:(Fe=0,Va=On=null,Uh(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(An=null),kl(n),t=t.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(ws,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=G.T,o=I.p,I.p=2,G.T=null;try{for(var d=e.onRecoverableError,v=0;v<s.length;v++){var b=s[v];d(b.value,{componentStack:b.stack})}}finally{G.T=t,I.p=o}}(Xa&3)!==0&&Mi(),Vt(e),o=e.pendingLanes,(n&4194090)!==0&&(o&42)!==0?e===rc?ir++:(ir=0,rc=e):ir=0,lr(0)}}function Uh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,$s(t)))}function Mi(e){return Ch(),Mh(),Dh(),Lh()}function Lh(){if(Fe!==5)return!1;var e=On,t=ac;ac=0;var n=kl(Xa),s=G.T,o=I.p;try{I.p=32>n?32:n,G.T=null,n=sc,sc=null;var d=On,v=Xa;if(Fe=0,Va=On=null,Xa=0,(we&6)!==0)throw Error(i(331));var b=we;if(we|=4,xh(d.current),vh(d,d.current,v,n),we=b,lr(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(ws,d)}catch{}return!0}finally{I.p=o,G.T=s,Uh(e,t)}}function qh(e,t,n){t=kt(n,t),t=Lo(e.stateNode,t,2),e=_n(e,t,2),e!==null&&(js(e,2),Vt(e))}function ze(e,t,n){if(e.tag===3)qh(e,e,n);else for(;t!==null;){if(t.tag===3){qh(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(An===null||!An.has(s))){e=kt(n,e),n=Gf(2),s=_n(t,n,2),s!==null&&(Yf(n,s,t,e),js(s,2),Vt(s));break}}t=t.return}}function cc(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new zp;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(n)||(Fo=!0,o.add(n),e=Mp.bind(null,e,t,n),t.then(e,e))}function Mp(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ae===e&&(ye&n)===n&&(qe===4||qe===3&&(ye&62914560)===ye&&300>Bt()-nc?(we&2)===0&&Qa(e,0):ec|=n,Ya===ye&&(Ya=0)),Vt(e)}function Bh(e,t){t===0&&(t=Mu()),e=Ta(e,t),e!==null&&(js(e,t),Vt(e))}function Dp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Bh(e,n)}function Up(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(i(314))}s!==null&&s.delete(t),Bh(e,n)}function Lp(e,t){return _l(e,t)}var Di=null,Pa=null,uc=!1,Ui=!1,dc=!1,oa=0;function Vt(e){e!==Pa&&e.next===null&&(Pa===null?Di=Pa=e:Pa=Pa.next=e),Ui=!0,uc||(uc=!0,Bp())}function lr(e,t){if(!dc&&Ui){dc=!0;do for(var n=!1,s=Di;s!==null;){if(e!==0){var o=s.pendingLanes;if(o===0)var d=0;else{var v=s.suspendedLanes,b=s.pingedLanes;d=(1<<31-mt(42|e)+1)-1,d&=o&~(v&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(n=!0,Yh(s,d))}else d=ye,d=Gr(s,s===Ae?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(d&3)===0||Ss(s,d)||(n=!0,Yh(s,d));s=s.next}while(n);dc=!1}}function qp(){$h()}function $h(){Ui=uc=!1;var e=0;oa!==0&&(Kp()&&(e=oa),oa=0);for(var t=Bt(),n=null,s=Di;s!==null;){var o=s.next,d=Hh(s,t);d===0?(s.next=null,n===null?Di=o:n.next=o,o===null&&(Pa=n)):(n=s,(e!==0||(d&3)!==0)&&(Ui=!0)),s=o}lr(e)}function Hh(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-mt(d),b=1<<v,_=o[v];_===-1?((b&n)===0||(b&s)!==0)&&(o[v]=ug(b,t)):_<=t&&(e.expiredLanes|=b),d&=~b}if(t=Ae,n=ye,n=Gr(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,n===0||e===t&&(Se===2||Se===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&wl(s),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Ss(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&wl(s),kl(n)){case 2:case 8:n=Ou;break;case 32:n=Br;break;case 268435456:n=Ru;break;default:n=Br}return s=Gh.bind(null,e),n=_l(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&wl(s),e.callbackPriority=2,e.callbackNode=null,2}function Gh(e,t){if(Fe!==0&&Fe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Mi()&&e.callbackNode!==n)return null;var s=ye;return s=Gr(e,e===Ae?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(jh(e,s,t),Hh(e,Bt()),e.callbackNode!=null&&e.callbackNode===n?Gh.bind(null,e):null)}function Yh(e,t){if(Mi())return null;jh(e,t,!0)}function Bp(){Jp(function(){(we&6)!==0?_l(Au,qp):$h()})}function fc(){return oa===0&&(oa=Cu()),oa}function Vh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Kr(""+e)}function Xh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function $p(e,t,n,s,o){if(t==="submit"&&n&&n.stateNode===o){var d=Vh((o[lt]||null).action),v=s.submitter;v&&(t=(t=v[lt]||null)?Vh(t.formAction):v.getAttribute("formAction"),t!==null&&(d=t,v=null));var b=new Wr("action","action",null,s,o);e.push({event:b,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(oa!==0){var _=v?Xh(o,v):new FormData(o);Ro(n,{pending:!0,data:_,method:o.method,action:d},null,_)}}else typeof d=="function"&&(b.preventDefault(),_=v?Xh(o,v):new FormData(o),Ro(n,{pending:!0,data:_,method:o.method,action:d},d,_))},currentTarget:o}]})}}for(var hc=0;hc<Zl.length;hc++){var mc=Zl[hc],Hp=mc.toLowerCase(),Gp=mc[0].toUpperCase()+mc.slice(1);Rt(Hp,"on"+Gp)}Rt(Sd,"onAnimationEnd"),Rt(jd,"onAnimationIteration"),Rt(kd,"onAnimationStart"),Rt("dblclick","onDoubleClick"),Rt("focusin","onFocus"),Rt("focusout","onBlur"),Rt(rp,"onTransitionRun"),Rt(ip,"onTransitionStart"),Rt(lp,"onTransitionCancel"),Rt(Ed,"onTransitionEnd"),ya("onMouseEnter",["mouseout","mouseover"]),ya("onMouseLeave",["mouseout","mouseover"]),ya("onPointerEnter",["pointerout","pointerover"]),ya("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(or));function Qh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],o=s.event;s=s.listeners;e:{var d=void 0;if(t)for(var v=s.length-1;0<=v;v--){var b=s[v],_=b.instance,O=b.currentTarget;if(b=b.listener,_!==d&&o.isPropagationStopped())break e;d=b,o.currentTarget=O;try{d(o)}catch(H){Si(H)}o.currentTarget=null,d=_}else for(v=0;v<s.length;v++){if(b=s[v],_=b.instance,O=b.currentTarget,b=b.listener,_!==d&&o.isPropagationStopped())break e;d=b,o.currentTarget=O;try{d(o)}catch(H){Si(H)}o.currentTarget=null,d=_}}}}function ge(e,t){var n=t[El];n===void 0&&(n=t[El]=new Set);var s=e+"__bubble";n.has(s)||(Kh(t,e,2,!1),n.add(s))}function gc(e,t,n){var s=0;t&&(s|=4),Kh(n,e,s,t)}var Li="_reactListening"+Math.random().toString(36).slice(2);function pc(e){if(!e[Li]){e[Li]=!0,Bu.forEach(function(n){n!=="selectionchange"&&(Yp.has(n)||gc(n,!1,e),gc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Li]||(t[Li]=!0,gc("selectionchange",!1,t))}}function Kh(e,t,n,s){switch(v0(t)){case 2:var o=pv;break;case 8:o=vv;break;default:o=Ac}n=o.bind(null,t,n,e),o=void 0,!Ll||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function vc(e,t,n,s,o){var d=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var v=s.tag;if(v===3||v===4){var b=s.stateNode.containerInfo;if(b===o)break;if(v===4)for(v=s.return;v!==null;){var _=v.tag;if((_===3||_===4)&&v.stateNode.containerInfo===o)return;v=v.return}for(;b!==null;){if(v=ga(b),v===null)return;if(_=v.tag,_===5||_===6||_===26||_===27){s=d=v;continue e}b=b.parentNode}}s=s.return}Fu(function(){var O=d,H=Dl(n),X=[];e:{var C=Nd.get(e);if(C!==void 0){var M=Wr,le=e;switch(e){case"keypress":if(Jr(n)===0)break e;case"keydown":case"keyup":M=Lg;break;case"focusin":le="focus",M=Hl;break;case"focusout":le="blur",M=Hl;break;case"beforeblur":case"afterblur":M=Hl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=kg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=$g;break;case Sd:case jd:case kd:M=Tg;break;case Ed:M=Gg;break;case"scroll":case"scrollend":M=Sg;break;case"wheel":M=Vg;break;case"copy":case"cut":case"paste":M=Ag;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=sd;break;case"toggle":case"beforetoggle":M=Qg}var se=(t&4)!==0,Ee=!se&&(e==="scroll"||e==="scrollend"),N=se?C!==null?C+"Capture":null:C;se=[];for(var k=O,A;k!==null;){var Y=k;if(A=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||A===null||N===null||(Y=Ns(k,N),Y!=null&&se.push(cr(k,Y,A))),Ee)break;k=k.return}0<se.length&&(C=new M(C,le,null,n,H),X.push({event:C,listeners:se}))}}if((t&7)===0){e:{if(C=e==="mouseover"||e==="pointerover",M=e==="mouseout"||e==="pointerout",C&&n!==Ml&&(le=n.relatedTarget||n.fromElement)&&(ga(le)||le[ma]))break e;if((M||C)&&(C=H.window===H?H:(C=H.ownerDocument)?C.defaultView||C.parentWindow:window,M?(le=n.relatedTarget||n.toElement,M=O,le=le?ga(le):null,le!==null&&(Ee=u(le),se=le.tag,le!==Ee||se!==5&&se!==27&&se!==6)&&(le=null)):(M=null,le=O),M!==le)){if(se=nd,Y="onMouseLeave",N="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(se=sd,Y="onPointerLeave",N="onPointerEnter",k="pointer"),Ee=M==null?C:Es(M),A=le==null?C:Es(le),C=new se(Y,k+"leave",M,n,H),C.target=Ee,C.relatedTarget=A,Y=null,ga(H)===O&&(se=new se(N,k+"enter",le,n,H),se.target=A,se.relatedTarget=Ee,Y=se),Ee=Y,M&&le)t:{for(se=M,N=le,k=0,A=se;A;A=Ja(A))k++;for(A=0,Y=N;Y;Y=Ja(Y))A++;for(;0<k-A;)se=Ja(se),k--;for(;0<A-k;)N=Ja(N),A--;for(;k--;){if(se===N||N!==null&&se===N.alternate)break t;se=Ja(se),N=Ja(N)}se=null}else se=null;M!==null&&Ph(X,C,M,se,!1),le!==null&&Ee!==null&&Ph(X,Ee,le,se,!0)}}e:{if(C=O?Es(O):window,M=C.nodeName&&C.nodeName.toLowerCase(),M==="select"||M==="input"&&C.type==="file")var te=fd;else if(ud(C))if(hd)te=np;else{te=ep;var he=Fg}else M=C.nodeName,!M||M.toLowerCase()!=="input"||C.type!=="checkbox"&&C.type!=="radio"?O&&Cl(O.elementType)&&(te=fd):te=tp;if(te&&(te=te(e,O))){dd(X,te,n,H);break e}he&&he(e,C,O),e==="focusout"&&O&&C.type==="number"&&O.memoizedProps.value!=null&&Rl(C,"number",C.value)}switch(he=O?Es(O):window,e){case"focusin":(ud(he)||he.contentEditable==="true")&&(ka=he,Kl=O,Ds=null);break;case"focusout":Ds=Kl=ka=null;break;case"mousedown":Pl=!0;break;case"contextmenu":case"mouseup":case"dragend":Pl=!1,_d(X,n,H);break;case"selectionchange":if(sp)break;case"keydown":case"keyup":_d(X,n,H)}var ne;if(Yl)e:{switch(e){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else ja?od(e,n)&&(re="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(re="onCompositionStart");re&&(rd&&n.locale!=="ko"&&(ja||re!=="onCompositionStart"?re==="onCompositionEnd"&&ja&&(ne=ed()):(vn=H,ql="value"in vn?vn.value:vn.textContent,ja=!0)),he=qi(O,re),0<he.length&&(re=new ad(re,e,null,n,H),X.push({event:re,listeners:he}),ne?re.data=ne:(ne=cd(n),ne!==null&&(re.data=ne)))),(ne=Pg?Jg(e,n):Zg(e,n))&&(re=qi(O,"onBeforeInput"),0<re.length&&(he=new ad("onBeforeInput","beforeinput",null,n,H),X.push({event:he,listeners:re}),he.data=ne)),$p(X,e,O,n,H)}Qh(X,t)})}function cr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",s=[];e!==null;){var o=e,d=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||d===null||(o=Ns(e,n),o!=null&&s.unshift(cr(e,o,d)),o=Ns(e,t),o!=null&&s.push(cr(e,o,d))),e.tag===3)return s;e=e.return}return[]}function Ja(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ph(e,t,n,s,o){for(var d=t._reactName,v=[];n!==null&&n!==s;){var b=n,_=b.alternate,O=b.stateNode;if(b=b.tag,_!==null&&_===s)break;b!==5&&b!==26&&b!==27||O===null||(_=O,o?(O=Ns(n,d),O!=null&&v.unshift(cr(n,O,_))):o||(O=Ns(n,d),O!=null&&v.push(cr(n,O,_)))),n=n.return}v.length!==0&&e.push({event:t,listeners:v})}var Vp=/\r\n?/g,Xp=/\u0000|\uFFFD/g;function Jh(e){return(typeof e=="string"?e:""+e).replace(Vp,`
`).replace(Xp,"")}function Zh(e,t){return t=Jh(t),Jh(e)===t}function Bi(){}function ke(e,t,n,s,o,d){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||_a(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&_a(e,""+s);break;case"className":Vr(e,"class",s);break;case"tabIndex":Vr(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Vr(e,n,s);break;case"style":Wu(e,s,d);break;case"data":if(t!=="object"){Vr(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Kr(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(n==="formAction"?(t!=="input"&&ke(e,t,"name",o.name,o,null),ke(e,t,"formEncType",o.formEncType,o,null),ke(e,t,"formMethod",o.formMethod,o,null),ke(e,t,"formTarget",o.formTarget,o,null)):(ke(e,t,"encType",o.encType,o,null),ke(e,t,"method",o.method,o,null),ke(e,t,"target",o.target,o,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Kr(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=Bi);break;case"onScroll":s!=null&&ge("scroll",e);break;case"onScrollEnd":s!=null&&ge("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(n=s.__html,n!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=Kr(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":ge("beforetoggle",e),ge("toggle",e),Yr(e,"popover",s);break;case"xlinkActuate":Pt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Pt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Pt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Pt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Pt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Pt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Yr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=_g.get(n)||n,Yr(e,n,s))}}function yc(e,t,n,s,o,d){switch(n){case"style":Wu(e,s,d);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(n=s.__html,n!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=n}}break;case"children":typeof s=="string"?_a(e,s):(typeof s=="number"||typeof s=="bigint")&&_a(e,""+s);break;case"onScroll":s!=null&&ge("scroll",e);break;case"onScrollEnd":s!=null&&ge("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Bi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$u.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),d=e[lt]||null,d=d!=null?d[n]:null,typeof d=="function"&&e.removeEventListener(t,d,o),typeof s=="function")){typeof d!="function"&&d!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,o);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):Yr(e,n,s)}}}function et(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",e),ge("load",e);var s=!1,o=!1,d;for(d in n)if(n.hasOwnProperty(d)){var v=n[d];if(v!=null)switch(d){case"src":s=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ke(e,t,d,v,n,null)}}o&&ke(e,t,"srcSet",n.srcSet,n,null),s&&ke(e,t,"src",n.src,n,null);return;case"input":ge("invalid",e);var b=d=v=o=null,_=null,O=null;for(s in n)if(n.hasOwnProperty(s)){var H=n[s];if(H!=null)switch(s){case"name":o=H;break;case"type":v=H;break;case"checked":_=H;break;case"defaultChecked":O=H;break;case"value":d=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,t));break;default:ke(e,t,s,H,n,null)}}Ku(e,d,b,_,O,v,o,!1),Xr(e);return;case"select":ge("invalid",e),s=v=d=null;for(o in n)if(n.hasOwnProperty(o)&&(b=n[o],b!=null))switch(o){case"value":d=b;break;case"defaultValue":v=b;break;case"multiple":s=b;default:ke(e,t,o,b,n,null)}t=d,n=v,e.multiple=!!s,t!=null?xa(e,!!s,t,!1):n!=null&&xa(e,!!s,n,!0);return;case"textarea":ge("invalid",e),d=o=s=null;for(v in n)if(n.hasOwnProperty(v)&&(b=n[v],b!=null))switch(v){case"value":s=b;break;case"defaultValue":o=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:ke(e,t,v,b,n,null)}Ju(e,s,o,d),Xr(e);return;case"option":for(_ in n)if(n.hasOwnProperty(_)&&(s=n[_],s!=null))switch(_){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:ke(e,t,_,s,n,null)}return;case"dialog":ge("beforetoggle",e),ge("toggle",e),ge("cancel",e),ge("close",e);break;case"iframe":case"object":ge("load",e);break;case"video":case"audio":for(s=0;s<or.length;s++)ge(or[s],e);break;case"image":ge("error",e),ge("load",e);break;case"details":ge("toggle",e);break;case"embed":case"source":case"link":ge("error",e),ge("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in n)if(n.hasOwnProperty(O)&&(s=n[O],s!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ke(e,t,O,s,n,null)}return;default:if(Cl(t)){for(H in n)n.hasOwnProperty(H)&&(s=n[H],s!==void 0&&yc(e,t,H,s,n,void 0));return}}for(b in n)n.hasOwnProperty(b)&&(s=n[b],s!=null&&ke(e,t,b,s,n,null))}function Qp(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,d=null,v=null,b=null,_=null,O=null,H=null;for(M in n){var X=n[M];if(n.hasOwnProperty(M)&&X!=null)switch(M){case"checked":break;case"value":break;case"defaultValue":_=X;default:s.hasOwnProperty(M)||ke(e,t,M,null,s,X)}}for(var C in s){var M=s[C];if(X=n[C],s.hasOwnProperty(C)&&(M!=null||X!=null))switch(C){case"type":d=M;break;case"name":o=M;break;case"checked":O=M;break;case"defaultChecked":H=M;break;case"value":v=M;break;case"defaultValue":b=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(137,t));break;default:M!==X&&ke(e,t,C,M,s,X)}}Ol(e,v,b,_,O,H,d,o);return;case"select":M=v=b=C=null;for(d in n)if(_=n[d],n.hasOwnProperty(d)&&_!=null)switch(d){case"value":break;case"multiple":M=_;default:s.hasOwnProperty(d)||ke(e,t,d,null,s,_)}for(o in s)if(d=s[o],_=n[o],s.hasOwnProperty(o)&&(d!=null||_!=null))switch(o){case"value":C=d;break;case"defaultValue":b=d;break;case"multiple":v=d;default:d!==_&&ke(e,t,o,d,s,_)}t=b,n=v,s=M,C!=null?xa(e,!!n,C,!1):!!s!=!!n&&(t!=null?xa(e,!!n,t,!0):xa(e,!!n,n?[]:"",!1));return;case"textarea":M=C=null;for(b in n)if(o=n[b],n.hasOwnProperty(b)&&o!=null&&!s.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ke(e,t,b,null,s,o)}for(v in s)if(o=s[v],d=n[v],s.hasOwnProperty(v)&&(o!=null||d!=null))switch(v){case"value":C=o;break;case"defaultValue":M=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(i(91));break;default:o!==d&&ke(e,t,v,o,s,d)}Pu(e,C,M);return;case"option":for(var le in n)if(C=n[le],n.hasOwnProperty(le)&&C!=null&&!s.hasOwnProperty(le))switch(le){case"selected":e.selected=!1;break;default:ke(e,t,le,null,s,C)}for(_ in s)if(C=s[_],M=n[_],s.hasOwnProperty(_)&&C!==M&&(C!=null||M!=null))switch(_){case"selected":e.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:ke(e,t,_,C,s,M)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in n)C=n[se],n.hasOwnProperty(se)&&C!=null&&!s.hasOwnProperty(se)&&ke(e,t,se,null,s,C);for(O in s)if(C=s[O],M=n[O],s.hasOwnProperty(O)&&C!==M&&(C!=null||M!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(137,t));break;default:ke(e,t,O,C,s,M)}return;default:if(Cl(t)){for(var Ee in n)C=n[Ee],n.hasOwnProperty(Ee)&&C!==void 0&&!s.hasOwnProperty(Ee)&&yc(e,t,Ee,void 0,s,C);for(H in s)C=s[H],M=n[H],!s.hasOwnProperty(H)||C===M||C===void 0&&M===void 0||yc(e,t,H,C,s,M);return}}for(var N in n)C=n[N],n.hasOwnProperty(N)&&C!=null&&!s.hasOwnProperty(N)&&ke(e,t,N,null,s,C);for(X in s)C=s[X],M=n[X],!s.hasOwnProperty(X)||C===M||C==null&&M==null||ke(e,t,X,C,s,M)}var bc=null,xc=null;function $i(e){return e.nodeType===9?e:e.ownerDocument}function Wh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ih(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function _c(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wc=null;function Kp(){var e=window.event;return e&&e.type==="popstate"?e===wc?!1:(wc=e,!0):(wc=null,!1)}var Fh=typeof setTimeout=="function"?setTimeout:void 0,Pp=typeof clearTimeout=="function"?clearTimeout:void 0,e0=typeof Promise=="function"?Promise:void 0,Jp=typeof queueMicrotask=="function"?queueMicrotask:typeof e0<"u"?function(e){return e0.resolve(null).then(e).catch(Zp)}:Fh;function Zp(e){setTimeout(function(){throw e})}function Cn(e){return e==="head"}function t0(e,t){var n=t,s=0,o=0;do{var d=n.nextSibling;if(e.removeChild(n),d&&d.nodeType===8)if(n=d.data,n==="/$"){if(0<s&&8>s){n=s;var v=e.ownerDocument;if(n&1&&ur(v.documentElement),n&2&&ur(v.body),n&4)for(n=v.head,ur(n),v=n.firstChild;v;){var b=v.nextSibling,_=v.nodeName;v[ks]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&v.rel.toLowerCase()==="stylesheet"||n.removeChild(v),v=b}}if(o===0){e.removeChild(d),yr(t);return}o--}else n==="$"||n==="$?"||n==="$!"?o++:s=n.charCodeAt(0)-48;else s=0;n=d}while(n);yr(t)}function Sc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Sc(n),Nl(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Wp(e,t,n,s){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[ks])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Mt(e.nextSibling),e===null)break}return null}function Ip(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Mt(e.nextSibling),e===null))return null;return e}function jc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Fp(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Mt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var kc=null;function n0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function a0(e,t,n){switch(t=$i(n),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function ur(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Nl(e)}var Ot=new Map,s0=new Set;function Hi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var cn=I.d;I.d={f:ev,r:tv,D:nv,C:av,L:sv,m:rv,X:lv,S:iv,M:ov};function ev(){var e=cn.f(),t=Ri();return e||t}function tv(e){var t=pa(e);t!==null&&t.tag===5&&t.type==="form"?jf(t):cn.r(e)}var Za=typeof document>"u"?null:document;function r0(e,t,n){var s=Za;if(s&&typeof t=="string"&&t){var o=jt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),s0.has(o)||(s0.add(o),e={rel:e,crossOrigin:n,href:t},s.querySelector(o)===null&&(t=s.createElement("link"),et(t,"link",e),Ke(t),s.head.appendChild(t)))}}function nv(e){cn.D(e),r0("dns-prefetch",e,null)}function av(e,t){cn.C(e,t),r0("preconnect",e,t)}function sv(e,t,n){cn.L(e,t,n);var s=Za;if(s&&e&&t){var o='link[rel="preload"][as="'+jt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+jt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+jt(n.imageSizes)+'"]')):o+='[href="'+jt(e)+'"]';var d=o;switch(t){case"style":d=Wa(e);break;case"script":d=Ia(e)}Ot.has(d)||(e=y({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Ot.set(d,e),s.querySelector(o)!==null||t==="style"&&s.querySelector(dr(d))||t==="script"&&s.querySelector(fr(d))||(t=s.createElement("link"),et(t,"link",e),Ke(t),s.head.appendChild(t)))}}function rv(e,t){cn.m(e,t);var n=Za;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+jt(s)+'"][href="'+jt(e)+'"]',d=o;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ia(e)}if(!Ot.has(d)&&(e=y({rel:"modulepreload",href:e},t),Ot.set(d,e),n.querySelector(o)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(fr(d)))return}s=n.createElement("link"),et(s,"link",e),Ke(s),n.head.appendChild(s)}}}function iv(e,t,n){cn.S(e,t,n);var s=Za;if(s&&e){var o=va(s).hoistableStyles,d=Wa(e);t=t||"default";var v=o.get(d);if(!v){var b={loading:0,preload:null};if(v=s.querySelector(dr(d)))b.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ot.get(d))&&Ec(e,n);var _=v=s.createElement("link");Ke(_),et(_,"link",e),_._p=new Promise(function(O,H){_.onload=O,_.onerror=H}),_.addEventListener("load",function(){b.loading|=1}),_.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Gi(v,t,s)}v={type:"stylesheet",instance:v,count:1,state:b},o.set(d,v)}}}function lv(e,t){cn.X(e,t);var n=Za;if(n&&e){var s=va(n).hoistableScripts,o=Ia(e),d=s.get(o);d||(d=n.querySelector(fr(o)),d||(e=y({src:e,async:!0},t),(t=Ot.get(o))&&Nc(e,t),d=n.createElement("script"),Ke(d),et(d,"link",e),n.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(o,d))}}function ov(e,t){cn.M(e,t);var n=Za;if(n&&e){var s=va(n).hoistableScripts,o=Ia(e),d=s.get(o);d||(d=n.querySelector(fr(o)),d||(e=y({src:e,async:!0,type:"module"},t),(t=Ot.get(o))&&Nc(e,t),d=n.createElement("script"),Ke(d),et(d,"link",e),n.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(o,d))}}function i0(e,t,n,s){var o=(o=ce.current)?Hi(o):null;if(!o)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Wa(n.href),n=va(o).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Wa(n.href);var d=va(o).hoistableStyles,v=d.get(e);if(v||(o=o.ownerDocument||o,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=o.querySelector(dr(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Ot.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ot.set(e,n),d||cv(o,e,n,v.state))),t&&s===null)throw Error(i(528,""));return v}if(t&&s!==null)throw Error(i(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ia(n),n=va(o).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Wa(e){return'href="'+jt(e)+'"'}function dr(e){return'link[rel="stylesheet"]['+e+"]"}function l0(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function cv(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),et(t,"link",n),Ke(t),e.head.appendChild(t))}function Ia(e){return'[src="'+jt(e)+'"]'}function fr(e){return"script[async]"+e}function o0(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+jt(n.href)+'"]');if(s)return t.instance=s,Ke(s),s;var o=y({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ke(s),et(s,"style",o),Gi(s,n.precedence,e),t.instance=s;case"stylesheet":o=Wa(n.href);var d=e.querySelector(dr(o));if(d)return t.state.loading|=4,t.instance=d,Ke(d),d;s=l0(n),(o=Ot.get(o))&&Ec(s,o),d=(e.ownerDocument||e).createElement("link"),Ke(d);var v=d;return v._p=new Promise(function(b,_){v.onload=b,v.onerror=_}),et(d,"link",s),t.state.loading|=4,Gi(d,n.precedence,e),t.instance=d;case"script":return d=Ia(n.src),(o=e.querySelector(fr(d)))?(t.instance=o,Ke(o),o):(s=n,(o=Ot.get(d))&&(s=y({},n),Nc(s,o)),e=e.ownerDocument||e,o=e.createElement("script"),Ke(o),et(o,"link",s),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Gi(s,n.precedence,e));return t.instance}function Gi(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=s.length?s[s.length-1]:null,d=o,v=0;v<s.length;v++){var b=s[v];if(b.dataset.precedence===t)d=b;else if(d!==o)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Ec(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Nc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Yi=null;function c0(e,t,n){if(Yi===null){var s=new Map,o=Yi=new Map;o.set(n,s)}else o=Yi,s=o.get(n),s||(s=new Map,o.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var d=n[o];if(!(d[ks]||d[nt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(t)||"";v=e+v;var b=s.get(v);b?b.push(d):s.set(v,[d])}}return s}function u0(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function uv(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function d0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var hr=null;function dv(){}function fv(e,t,n){if(hr===null)throw Error(i(475));var s=hr;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var o=Wa(n.href),d=e.querySelector(dr(o));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Vi.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=d,Ke(d);return}d=e.ownerDocument||e,n=l0(n),(o=Ot.get(o))&&Ec(n,o),d=d.createElement("link"),Ke(d);var v=d;v._p=new Promise(function(b,_){v.onload=b,v.onerror=_}),et(d,"link",n),t.instance=d}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(s.count++,t=Vi.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function hv(){if(hr===null)throw Error(i(475));var e=hr;return e.stylesheets&&e.count===0&&Tc(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Tc(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Vi(){if(this.count--,this.count===0){if(this.stylesheets)Tc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Xi=null;function Tc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Xi=new Map,t.forEach(mv,e),Xi=null,Vi.call(e))}function mv(e,t){if(!(t.state.loading&4)){var n=Xi.get(e);if(n)var s=n.get(null);else{n=new Map,Xi.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<o.length;d++){var v=o[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(n.set(v.dataset.precedence,v),s=v)}s&&n.set(null,s)}o=t.instance,v=o.getAttribute("data-precedence"),d=n.get(v)||s,d===s&&n.set(null,o),n.set(v,o),this.count++,s=Vi.bind(this),o.addEventListener("load",s),o.addEventListener("error",s),d?d.parentNode.insertBefore(o,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var mr={$$typeof:U,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function gv(e,t,n,s,o,d,v,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.hiddenUpdates=Sl(null),this.identifierPrefix=s,this.onUncaughtError=o,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function f0(e,t,n,s,o,d,v,b,_,O,H,X){return e=new gv(e,t,n,v,b,_,O,X),t=1,d===!0&&(t|=24),d=pt(3,null,null,t),e.current=d,d.stateNode=e,t=oo(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:s,isDehydrated:n,cache:t},ho(d),e}function h0(e){return e?(e=za,e):za}function m0(e,t,n,s,o,d){o=h0(o),s.context===null?s.context=o:s.pendingContext=o,s=xn(t),s.payload={element:n},d=d===void 0?null:d,d!==null&&(s.callback=d),n=_n(e,s,t),n!==null&&(_t(n,e,t),Vs(n,e,t))}function g0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zc(e,t){g0(e,t),(e=e.alternate)&&g0(e,t)}function p0(e){if(e.tag===13){var t=Ta(e,67108864);t!==null&&_t(t,e,67108864),zc(e,67108864)}}var Qi=!0;function pv(e,t,n,s){var o=G.T;G.T=null;var d=I.p;try{I.p=2,Ac(e,t,n,s)}finally{I.p=d,G.T=o}}function vv(e,t,n,s){var o=G.T;G.T=null;var d=I.p;try{I.p=8,Ac(e,t,n,s)}finally{I.p=d,G.T=o}}function Ac(e,t,n,s){if(Qi){var o=Oc(s);if(o===null)vc(e,t,s,Ki,n),y0(e,s);else if(bv(o,e,t,n,s))s.stopPropagation();else if(y0(e,s),t&4&&-1<yv.indexOf(e)){for(;o!==null;){var d=pa(o);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Xn(d.pendingLanes);if(v!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var _=1<<31-mt(v);b.entanglements[1]|=_,v&=~_}Vt(d),(we&6)===0&&(Ai=Bt()+500,lr(0))}}break;case 13:b=Ta(d,2),b!==null&&_t(b,d,2),Ri(),zc(d,2)}if(d=Oc(s),d===null&&vc(e,t,s,Ki,n),d===o)break;o=d}o!==null&&s.stopPropagation()}else vc(e,t,s,null,n)}}function Oc(e){return e=Dl(e),Rc(e)}var Ki=null;function Rc(e){if(Ki=null,e=ga(e),e!==null){var t=u(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=f(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ki=e,null}function v0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ag()){case Au:return 2;case Ou:return 8;case Br:case sg:return 32;case Ru:return 268435456;default:return 32}default:return 32}}var Cc=!1,Mn=null,Dn=null,Un=null,gr=new Map,pr=new Map,Ln=[],yv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function y0(e,t){switch(e){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":gr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pr.delete(t.pointerId)}}function vr(e,t,n,s,o,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:d,targetContainers:[o]},t!==null&&(t=pa(t),t!==null&&p0(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function bv(e,t,n,s,o){switch(t){case"focusin":return Mn=vr(Mn,e,t,n,s,o),!0;case"dragenter":return Dn=vr(Dn,e,t,n,s,o),!0;case"mouseover":return Un=vr(Un,e,t,n,s,o),!0;case"pointerover":var d=o.pointerId;return gr.set(d,vr(gr.get(d)||null,e,t,n,s,o)),!0;case"gotpointercapture":return d=o.pointerId,pr.set(d,vr(pr.get(d)||null,e,t,n,s,o)),!0}return!1}function b0(e){var t=ga(e.target);if(t!==null){var n=u(t);if(n!==null){if(t=n.tag,t===13){if(t=f(n),t!==null){e.blockedOn=t,fg(e.priority,function(){if(n.tag===13){var s=xt();s=jl(s);var o=Ta(n,s);o!==null&&_t(o,n,s),zc(n,s)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Oc(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Ml=s,n.target.dispatchEvent(s),Ml=null}else return t=pa(n),t!==null&&p0(t),e.blockedOn=n,!1;t.shift()}return!0}function x0(e,t,n){Pi(e)&&n.delete(t)}function xv(){Cc=!1,Mn!==null&&Pi(Mn)&&(Mn=null),Dn!==null&&Pi(Dn)&&(Dn=null),Un!==null&&Pi(Un)&&(Un=null),gr.forEach(x0),pr.forEach(x0)}function Ji(e,t){e.blockedOn===t&&(e.blockedOn=null,Cc||(Cc=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,xv)))}var Zi=null;function _0(e){Zi!==e&&(Zi=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Zi===e&&(Zi=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],o=e[t+2];if(typeof s!="function"){if(Rc(s||n)===null)continue;break}var d=pa(n);d!==null&&(e.splice(t,3),t-=3,Ro(d,{pending:!0,data:o,method:n.method,action:s},s,o))}}))}function yr(e){function t(_){return Ji(_,e)}Mn!==null&&Ji(Mn,e),Dn!==null&&Ji(Dn,e),Un!==null&&Ji(Un,e),gr.forEach(t),pr.forEach(t);for(var n=0;n<Ln.length;n++){var s=Ln[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Ln.length&&(n=Ln[0],n.blockedOn===null);)b0(n),n.blockedOn===null&&Ln.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var o=n[s],d=n[s+1],v=o[lt]||null;if(typeof d=="function")v||_0(n);else if(v){var b=null;if(d&&d.hasAttribute("formAction")){if(o=d,v=d[lt]||null)b=v.formAction;else if(Rc(o)!==null)continue}else b=v.action;typeof b=="function"?n[s+1]=b:(n.splice(s,3),s-=3),_0(n)}}}function Mc(e){this._internalRoot=e}Wi.prototype.render=Mc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current,s=xt();m0(n,s,e,t,null,null)},Wi.prototype.unmount=Mc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;m0(e.current,2,null,e,null,null),Ri(),t[ma]=null}};function Wi(e){this._internalRoot=e}Wi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ln.length&&t!==0&&t<Ln[n].priority;n++);Ln.splice(n,0,e),n===0&&b0(e)}};var w0=a.version;if(w0!=="19.1.1")throw Error(i(527,w0,"19.1.1"));I.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var _v={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ii=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ii.isDisabled&&Ii.supportsFiber)try{ws=Ii.inject(_v),ht=Ii}catch{}}return xr.createRoot=function(e,t){if(!c(e))throw Error(i(299));var n=!1,s="",o=qf,d=Bf,v=$f,b=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(b=t.unstable_transitionCallbacks)),t=f0(e,1,!1,null,null,n,s,o,d,v,b,null),e[ma]=t.current,pc(e),new Mc(t)},xr.hydrateRoot=function(e,t,n){if(!c(e))throw Error(i(299));var s=!1,o="",d=qf,v=Bf,b=$f,_=null,O=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(v=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(_=n.unstable_transitionCallbacks),n.formState!==void 0&&(O=n.formState)),t=f0(e,1,!0,t,n??null,s,o,d,v,b,_,O),t.context=h0(null),n=t.current,s=xt(),s=jl(s),o=xn(s),o.callback=null,_n(n,o,s),n=s,t.current.lanes=n,js(t,n),Vt(t),e[ma]=t.current,pc(e),new Wi(t)},xr.version="19.1.1",xr}var R0;function Cv(){if(R0)return Lc.exports;R0=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(a){console.error(a)}}return l(),Lc.exports=Rv(),Lc.exports}var Mv=Cv();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var C0="popstate";function Dv(l={}){function a(i,c){let{pathname:u,search:f,hash:m}=i.location;return Fc("",{pathname:u,search:f,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(i,c){return typeof c=="string"?c:Or(c)}return Lv(a,r,null,l)}function De(l,a){if(l===!1||l===null||typeof l>"u")throw new Error(a)}function Lt(l,a){if(!l){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function Uv(){return Math.random().toString(36).substring(2,10)}function M0(l,a){return{usr:l.state,key:l.key,idx:a}}function Fc(l,a,r=null,i){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof a=="string"?ys(a):a,state:r,key:a&&a.key||i||Uv()}}function Or({pathname:l="/",search:a="",hash:r=""}){return a&&a!=="?"&&(l+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(l+=r.charAt(0)==="#"?r:"#"+r),l}function ys(l){let a={};if(l){let r=l.indexOf("#");r>=0&&(a.hash=l.substring(r),l=l.substring(0,r));let i=l.indexOf("?");i>=0&&(a.search=l.substring(i),l=l.substring(0,i)),l&&(a.pathname=l)}return a}function Lv(l,a,r,i={}){let{window:c=document.defaultView,v5Compat:u=!1}=i,f=c.history,m="POP",p=null,g=y();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function y(){return(f.state||{idx:null}).idx}function x(){m="POP";let z=y(),q=z==null?null:z-g;g=z,p&&p({action:m,location:B.location,delta:q})}function w(z,q){m="PUSH";let $=Fc(B.location,z,q);g=y()+1;let U=M0($,g),D=B.createHref($);try{f.pushState(U,"",D)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;c.location.assign(D)}u&&p&&p({action:m,location:B.location,delta:1})}function E(z,q){m="REPLACE";let $=Fc(B.location,z,q);g=y();let U=M0($,g),D=B.createHref($);f.replaceState(U,"",D),u&&p&&p({action:m,location:B.location,delta:0})}function T(z){return qv(z)}let B={get action(){return m},get location(){return l(c,f)},listen(z){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(C0,x),p=z,()=>{c.removeEventListener(C0,x),p=null}},createHref(z){return a(c,z)},createURL:T,encodeLocation(z){let q=T(z);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:w,replace:E,go(z){return f.go(z)}};return B}function qv(l,a=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),De(r,"No window.location.(origin|href) available to create URL");let i=typeof l=="string"?l:Or(l);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function vm(l,a,r="/"){return Bv(l,a,r,!1)}function Bv(l,a,r,i){let c=typeof a=="string"?ys(a):a,u=hn(c.pathname||"/",r);if(u==null)return null;let f=ym(l);$v(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=Wv(u);m=Jv(f[p],g,i)}return m}function ym(l,a=[],r=[],i="",c=!1){let u=(f,m,p=c,g)=>{let y={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&p)return;De(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let x=fn([i,y.relativePath]),w=r.concat(y);f.children&&f.children.length>0&&(De(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),ym(f.children,a,w,x,p)),!(f.path==null&&!f.index)&&a.push({path:x,score:Kv(x,f.index),routesMeta:w})};return l.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let p of bm(f.path))u(f,m,!0,p)}),a}function bm(l){let a=l.split("/");if(a.length===0)return[];let[r,...i]=a,c=r.endsWith("?"),u=r.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let f=bm(i.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),c&&m.push(...f),m.map(p=>l.startsWith("/")&&p===""?"/":p)}function $v(l){l.sort((a,r)=>a.score!==r.score?r.score-a.score:Pv(a.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var Hv=/^:[\w-]+$/,Gv=3,Yv=2,Vv=1,Xv=10,Qv=-2,D0=l=>l==="*";function Kv(l,a){let r=l.split("/"),i=r.length;return r.some(D0)&&(i+=Qv),a&&(i+=Yv),r.filter(c=>!D0(c)).reduce((c,u)=>c+(Hv.test(u)?Gv:u===""?Vv:Xv),i)}function Pv(l,a){return l.length===a.length&&l.slice(0,-1).every((i,c)=>i===a[c])?l[l.length-1]-a[a.length-1]:0}function Jv(l,a,r=!1){let{routesMeta:i}=l,c={},u="/",f=[];for(let m=0;m<i.length;++m){let p=i[m],g=m===i.length-1,y=u==="/"?a:a.slice(u.length)||"/",x=hl({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),w=p.route;if(!x&&g&&r&&!i[i.length-1].route.index&&(x=hl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!x)return null;Object.assign(c,x.params),f.push({params:c,pathname:fn([u,x.pathname]),pathnameBase:ty(fn([u,x.pathnameBase])),route:w}),x.pathnameBase!=="/"&&(u=fn([u,x.pathnameBase]))}return f}function hl(l,a){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[r,i]=Zv(l.path,l.caseSensitive,l.end),c=a.match(r);if(!c)return null;let u=c[0],f=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:i.reduce((g,{paramName:y,isOptional:x},w)=>{if(y==="*"){let T=m[w]||"";f=u.slice(0,u.length-T.length).replace(/(.)\/+$/,"$1")}const E=m[w];return x&&!E?g[y]=void 0:g[y]=(E||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:l}}function Zv(l,a=!1,r=!0){Lt(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let i=[],c="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(i.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(i.push({paramName:"*"}),c+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?c+="\\/*$":l!==""&&l!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function Wv(l){try{return l.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Lt(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),l}}function hn(l,a){if(a==="/")return l;if(!l.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,i=l.charAt(r);return i&&i!=="/"?null:l.slice(r)||"/"}function Iv(l,a="/"){let{pathname:r,search:i="",hash:c=""}=typeof l=="string"?ys(l):l;return{pathname:r?r.startsWith("/")?r:Fv(r,a):a,search:ny(i),hash:ay(c)}}function Fv(l,a){let r=a.replace(/\/+$/,"").split("/");return l.split("/").forEach(c=>{c===".."?r.length>1&&r.pop():c!=="."&&r.push(c)}),r.length>1?r.join("/"):"/"}function Hc(l,a,r,i){return`Cannot include a '${l}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ey(l){return l.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function mu(l){let a=ey(l);return a.map((r,i)=>i===a.length-1?r.pathname:r.pathnameBase)}function gu(l,a,r,i=!1){let c;typeof l=="string"?c=ys(l):(c={...l},De(!c.pathname||!c.pathname.includes("?"),Hc("?","pathname","search",c)),De(!c.pathname||!c.pathname.includes("#"),Hc("#","pathname","hash",c)),De(!c.search||!c.search.includes("#"),Hc("#","search","hash",c)));let u=l===""||c.pathname==="",f=u?"/":c.pathname,m;if(f==null)m=r;else{let x=a.length-1;if(!i&&f.startsWith("..")){let w=f.split("/");for(;w[0]==="..";)w.shift(),x-=1;c.pathname=w.join("/")}m=x>=0?a[x]:"/"}let p=Iv(c,m),g=f&&f!=="/"&&f.endsWith("/"),y=(u||f===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}var fn=l=>l.join("/").replace(/\/\/+/g,"/"),ty=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),ny=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,ay=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function sy(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var xm=["POST","PUT","PATCH","DELETE"];new Set(xm);var ry=["GET",...xm];new Set(ry);var bs=S.createContext(null);bs.displayName="DataRouter";var pl=S.createContext(null);pl.displayName="DataRouterState";S.createContext(!1);var _m=S.createContext({isTransitioning:!1});_m.displayName="ViewTransition";var iy=S.createContext(new Map);iy.displayName="Fetchers";var ly=S.createContext(null);ly.displayName="Await";var qt=S.createContext(null);qt.displayName="Navigation";var Mr=S.createContext(null);Mr.displayName="Location";var Kt=S.createContext({outlet:null,matches:[],isDataRoute:!1});Kt.displayName="Route";var pu=S.createContext(null);pu.displayName="RouteError";function oy(l,{relative:a}={}){De(xs(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=S.useContext(qt),{hash:c,pathname:u,search:f}=Dr(l,{relative:a}),m=u;return r!=="/"&&(m=u==="/"?r:fn([r,u])),i.createHref({pathname:m,search:f,hash:c})}function xs(){return S.useContext(Mr)!=null}function Yn(){return De(xs(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Mr).location}var wm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sm(l){S.useContext(qt).static||S.useLayoutEffect(l)}function vu(){let{isDataRoute:l}=S.useContext(Kt);return l?_y():cy()}function cy(){De(xs(),"useNavigate() may be used only in the context of a <Router> component.");let l=S.useContext(bs),{basename:a,navigator:r}=S.useContext(qt),{matches:i}=S.useContext(Kt),{pathname:c}=Yn(),u=JSON.stringify(mu(i)),f=S.useRef(!1);return Sm(()=>{f.current=!0}),S.useCallback((p,g={})=>{if(Lt(f.current,wm),!f.current)return;if(typeof p=="number"){r.go(p);return}let y=gu(p,JSON.parse(u),c,g.relative==="path");l==null&&a!=="/"&&(y.pathname=y.pathname==="/"?a:fn([a,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[a,r,u,c,l])}S.createContext(null);function Dr(l,{relative:a}={}){let{matches:r}=S.useContext(Kt),{pathname:i}=Yn(),c=JSON.stringify(mu(r));return S.useMemo(()=>gu(l,JSON.parse(c),i,a==="path"),[l,c,i,a])}function uy(l,a){return jm(l,a)}function jm(l,a,r,i,c){De(xs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=S.useContext(qt),{matches:f}=S.useContext(Kt),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",y=m?m.pathnameBase:"/",x=m&&m.route;{let $=x&&x.path||"";km(g,!x||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let w=Yn(),E;if(a){let $=typeof a=="string"?ys(a):a;De(y==="/"||$.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${$.pathname}" was given in the \`location\` prop.`),E=$}else E=w;let T=E.pathname||"/",B=T;if(y!=="/"){let $=y.replace(/^\//,"").split("/");B="/"+T.replace(/^\//,"").split("/").slice($.length).join("/")}let z=vm(l,{pathname:B});Lt(x||z!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Lt(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=gy(z&&z.map($=>Object.assign({},$,{params:Object.assign({},p,$.params),pathname:fn([y,u.encodeLocation?u.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?y:fn([y,u.encodeLocation?u.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),f,r,i,c);return a&&q?S.createElement(Mr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},q):q}function dy(){let l=xy(),a=sy(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),r=l instanceof Error?l.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",l),f=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:u},"ErrorBoundary")," or"," ",S.createElement("code",{style:u},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},a),r?S.createElement("pre",{style:c},r):null,f)}var fy=S.createElement(dy,null),hy=class extends S.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,a){return a.location!==l.location||a.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:a.error,location:a.location,revalidation:l.revalidation||a.revalidation}}componentDidCatch(l,a){this.props.unstable_onError?this.props.unstable_onError(l,a):console.error("React Router caught the following error during render",l)}render(){return this.state.error!==void 0?S.createElement(Kt.Provider,{value:this.props.routeContext},S.createElement(pu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function my({routeContext:l,match:a,children:r}){let i=S.useContext(bs);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),S.createElement(Kt.Provider,{value:l},r)}function gy(l,a=[],r=null,i=null,c=null){if(l==null){if(!r)return null;if(r.errors)l=r.matches;else if(a.length===0&&!r.initialized&&r.matches.length>0)l=r.matches;else return null}let u=l,f=r?.errors;if(f!=null){let g=u.findIndex(y=>y.route.id&&f?.[y.route.id]!==void 0);De(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let m=!1,p=-1;if(r)for(let g=0;g<u.length;g++){let y=u[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:x,errors:w}=r,E=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||E){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((g,y,x)=>{let w,E=!1,T=null,B=null;r&&(w=f&&y.route.id?f[y.route.id]:void 0,T=y.route.errorElement||fy,m&&(p<0&&x===0?(km("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,B=null):p===x&&(E=!0,B=y.route.hydrateFallbackElement||null)));let z=a.concat(u.slice(0,x+1)),q=()=>{let $;return w?$=T:E?$=B:y.route.Component?$=S.createElement(y.route.Component,null):y.route.element?$=y.route.element:$=g,S.createElement(my,{match:y,routeContext:{outlet:g,matches:z,isDataRoute:r!=null},children:$})};return r&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?S.createElement(hy,{location:r.location,revalidation:r.revalidation,component:T,error:w,children:q(),routeContext:{outlet:null,matches:z,isDataRoute:!0},unstable_onError:i}):q()},null)}function yu(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function py(l){let a=S.useContext(bs);return De(a,yu(l)),a}function vy(l){let a=S.useContext(pl);return De(a,yu(l)),a}function yy(l){let a=S.useContext(Kt);return De(a,yu(l)),a}function bu(l){let a=yy(l),r=a.matches[a.matches.length-1];return De(r.route.id,`${l} can only be used on routes that contain a unique "id"`),r.route.id}function by(){return bu("useRouteId")}function xy(){let l=S.useContext(pu),a=vy("useRouteError"),r=bu("useRouteError");return l!==void 0?l:a.errors?.[r]}function _y(){let{router:l}=py("useNavigate"),a=bu("useNavigate"),r=S.useRef(!1);return Sm(()=>{r.current=!0}),S.useCallback(async(c,u={})=>{Lt(r.current,wm),r.current&&(typeof c=="number"?l.navigate(c):await l.navigate(c,{fromRouteId:a,...u}))},[l,a])}var U0={};function km(l,a,r){!a&&!U0[l]&&(U0[l]=!0,Lt(!1,r))}S.memo(wy);function wy({routes:l,future:a,state:r,unstable_onError:i}){return jm(l,void 0,r,i,a)}function ll({to:l,replace:a,state:r,relative:i}){De(xs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=S.useContext(qt);Lt(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=S.useContext(Kt),{pathname:f}=Yn(),m=vu(),p=gu(l,mu(u),f,i==="path"),g=JSON.stringify(p);return S.useEffect(()=>{m(JSON.parse(g),{replace:a,state:r,relative:i})},[m,g,i,a,r]),null}function cs(l){De(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Sy({basename:l="/",children:a=null,location:r,navigationType:i="POP",navigator:c,static:u=!1}){De(!xs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=l.replace(/^\/*/,"/"),m=S.useMemo(()=>({basename:f,navigator:c,static:u,future:{}}),[f,c,u]);typeof r=="string"&&(r=ys(r));let{pathname:p="/",search:g="",hash:y="",state:x=null,key:w="default"}=r,E=S.useMemo(()=>{let T=hn(p,f);return T==null?null:{location:{pathname:T,search:g,hash:y,state:x,key:w},navigationType:i}},[f,p,g,y,x,w,i]);return Lt(E!=null,`<Router basename="${f}"> is not able to match the URL "${p}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:S.createElement(qt.Provider,{value:m},S.createElement(Mr.Provider,{children:a,value:E}))}function jy({children:l,location:a}){return uy(eu(l),a)}function eu(l,a=[]){let r=[];return S.Children.forEach(l,(i,c)=>{if(!S.isValidElement(i))return;let u=[...a,c];if(i.type===S.Fragment){r.push.apply(r,eu(i.props.children,u));return}De(i.type===cs,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),De(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=eu(i.props.children,u)),r.push(f)}),r}var ol="get",cl="application/x-www-form-urlencoded";function vl(l){return l!=null&&typeof l.tagName=="string"}function ky(l){return vl(l)&&l.tagName.toLowerCase()==="button"}function Ey(l){return vl(l)&&l.tagName.toLowerCase()==="form"}function Ny(l){return vl(l)&&l.tagName.toLowerCase()==="input"}function Ty(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function zy(l,a){return l.button===0&&(!a||a==="_self")&&!Ty(l)}var Fi=null;function Ay(){if(Fi===null)try{new FormData(document.createElement("form"),0),Fi=!1}catch{Fi=!0}return Fi}var Oy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gc(l){return l!=null&&!Oy.has(l)?(Lt(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cl}"`),null):l}function Ry(l,a){let r,i,c,u,f;if(Ey(l)){let m=l.getAttribute("action");i=m?hn(m,a):null,r=l.getAttribute("method")||ol,c=Gc(l.getAttribute("enctype"))||cl,u=new FormData(l)}else if(ky(l)||Ny(l)&&(l.type==="submit"||l.type==="image")){let m=l.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=l.getAttribute("formaction")||m.getAttribute("action");if(i=p?hn(p,a):null,r=l.getAttribute("formmethod")||m.getAttribute("method")||ol,c=Gc(l.getAttribute("formenctype"))||Gc(m.getAttribute("enctype"))||cl,u=new FormData(m,l),!Ay()){let{name:g,type:y,value:x}=l;if(y==="image"){let w=g?`${g}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else g&&u.append(g,x)}}else{if(vl(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ol,i=null,c=cl,f=l}return u&&c==="text/plain"&&(f=u,u=void 0),{action:i,method:r.toLowerCase(),encType:c,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xu(l,a){if(l===!1||l===null||typeof l>"u")throw new Error(a)}function Cy(l,a,r){let i=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return i.pathname==="/"?i.pathname=`_root.${r}`:a&&hn(i.pathname,a)==="/"?i.pathname=`${a.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function My(l,a){if(l.id in a)return a[l.id];try{let r=await import(l.module);return a[l.id]=r,r}catch(r){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Dy(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function Uy(l,a,r){let i=await Promise.all(l.map(async c=>{let u=a.routes[c.route.id];if(u){let f=await My(u,r);return f.links?f.links():[]}return[]}));return $y(i.flat(1).filter(Dy).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function L0(l,a,r,i,c,u){let f=(p,g)=>r[g]?p.route.id!==r[g].route.id:!0,m=(p,g)=>r[g].pathname!==p.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==p.params["*"];return u==="assets"?a.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?a.filter((p,g)=>{let y=i.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let x=p.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function Ly(l,a,{includeHydrateFallback:r}={}){return qy(l.map(i=>{let c=a.routes[i.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),r&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function qy(l){return[...new Set(l)]}function By(l){let a={},r=Object.keys(l).sort();for(let i of r)a[i]=l[i];return a}function $y(l,a){let r=new Set;return new Set(a),l.reduce((i,c)=>{let u=JSON.stringify(By(c));return r.has(u)||(r.add(u),i.push({key:u,link:c})),i},[])}function Em(){let l=S.useContext(bs);return xu(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function Hy(){let l=S.useContext(pl);return xu(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var _u=S.createContext(void 0);_u.displayName="FrameworkContext";function Nm(){let l=S.useContext(_u);return xu(l,"You must render this element inside a <HydratedRouter> element"),l}function Gy(l,a){let r=S.useContext(_u),[i,c]=S.useState(!1),[u,f]=S.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:y,onTouchStart:x}=a,w=S.useRef(null);S.useEffect(()=>{if(l==="render"&&f(!0),l==="viewport"){let B=q=>{q.forEach($=>{f($.isIntersecting)})},z=new IntersectionObserver(B,{threshold:.5});return w.current&&z.observe(w.current),()=>{z.disconnect()}}},[l]),S.useEffect(()=>{if(i){let B=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(B)}}},[i]);let E=()=>{c(!0)},T=()=>{c(!1),f(!1)};return r?l!=="intent"?[u,w,{}]:[u,w,{onFocus:_r(m,E),onBlur:_r(p,T),onMouseEnter:_r(g,E),onMouseLeave:_r(y,T),onTouchStart:_r(x,E)}]:[!1,w,{}]}function _r(l,a){return r=>{l&&l(r),r.defaultPrevented||a(r)}}function Yy({page:l,...a}){let{router:r}=Em(),i=S.useMemo(()=>vm(r.routes,l,r.basename),[r.routes,l,r.basename]);return i?S.createElement(Xy,{page:l,matches:i,...a}):null}function Vy(l){let{manifest:a,routeModules:r}=Nm(),[i,c]=S.useState([]);return S.useEffect(()=>{let u=!1;return Uy(l,a,r).then(f=>{u||c(f)}),()=>{u=!0}},[l,a,r]),i}function Xy({page:l,matches:a,...r}){let i=Yn(),{manifest:c,routeModules:u}=Nm(),{basename:f}=Em(),{loaderData:m,matches:p}=Hy(),g=S.useMemo(()=>L0(l,a,p,c,i,"data"),[l,a,p,c,i]),y=S.useMemo(()=>L0(l,a,p,c,i,"assets"),[l,a,p,c,i]),x=S.useMemo(()=>{if(l===i.pathname+i.search+i.hash)return[];let T=new Set,B=!1;if(a.forEach(q=>{let $=c.routes[q.route.id];!$||!$.hasLoader||(!g.some(U=>U.route.id===q.route.id)&&q.route.id in m&&u[q.route.id]?.shouldRevalidate||$.hasClientLoader?B=!0:T.add(q.route.id))}),T.size===0)return[];let z=Cy(l,f,"data");return B&&T.size>0&&z.searchParams.set("_routes",a.filter(q=>T.has(q.route.id)).map(q=>q.route.id).join(",")),[z.pathname+z.search]},[f,m,i,c,g,a,l,u]),w=S.useMemo(()=>Ly(y,c),[y,c]),E=Vy(y);return S.createElement(S.Fragment,null,x.map(T=>S.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...r})),w.map(T=>S.createElement("link",{key:T,rel:"modulepreload",href:T,...r})),E.map(({key:T,link:B})=>S.createElement("link",{key:T,nonce:r.nonce,...B})))}function Qy(...l){return a=>{l.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}var Tm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tm&&(window.__reactRouterVersion="7.8.2")}catch{}function Ky({basename:l,children:a,window:r}){let i=S.useRef();i.current==null&&(i.current=Dv({window:r,v5Compat:!0}));let c=i.current,[u,f]=S.useState({action:c.action,location:c.location}),m=S.useCallback(p=>{S.startTransition(()=>f(p))},[f]);return S.useLayoutEffect(()=>c.listen(m),[c,m]),S.createElement(Sy,{basename:l,children:a,location:u.location,navigationType:u.action,navigator:c})}var zm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Am=S.forwardRef(function({onClick:a,discover:r="render",prefetch:i="none",relative:c,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:y,viewTransition:x,...w},E){let{basename:T}=S.useContext(qt),B=typeof g=="string"&&zm.test(g),z,q=!1;if(typeof g=="string"&&B&&(z=g,Tm))try{let V=new URL(window.location.href),Z=g.startsWith("//")?new URL(V.protocol+g):new URL(g),F=hn(Z.pathname,T);Z.origin===V.origin&&F!=null?g=F+Z.search+Z.hash:q=!0}catch{Lt(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=oy(g,{relative:c}),[U,D,R]=Gy(i,w),Q=Wy(g,{replace:f,state:m,target:p,preventScrollReset:y,relative:c,viewTransition:x});function L(V){a&&a(V),V.defaultPrevented||Q(V)}let P=S.createElement("a",{...w,...R,href:z||$,onClick:q||u?a:L,ref:Qy(E,D),target:p,"data-discover":!B&&r==="render"?"true":void 0});return U&&!B?S.createElement(S.Fragment,null,P,S.createElement(Yy,{page:$})):P});Am.displayName="Link";var Py=S.forwardRef(function({"aria-current":a="page",caseSensitive:r=!1,className:i="",end:c=!1,style:u,to:f,viewTransition:m,children:p,...g},y){let x=Dr(f,{relative:g.relative}),w=Yn(),E=S.useContext(pl),{navigator:T,basename:B}=S.useContext(qt),z=E!=null&&nb(x)&&m===!0,q=T.encodeLocation?T.encodeLocation(x).pathname:x.pathname,$=w.pathname,U=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||($=$.toLowerCase(),U=U?U.toLowerCase():null,q=q.toLowerCase()),U&&B&&(U=hn(U,B)||U);const D=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let R=$===q||!c&&$.startsWith(q)&&$.charAt(D)==="/",Q=U!=null&&(U===q||!c&&U.startsWith(q)&&U.charAt(q.length)==="/"),L={isActive:R,isPending:Q,isTransitioning:z},P=R?a:void 0,V;typeof i=="function"?V=i(L):V=[i,R?"active":null,Q?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let Z=typeof u=="function"?u(L):u;return S.createElement(Am,{...g,"aria-current":P,className:V,ref:y,style:Z,to:f,viewTransition:m},typeof p=="function"?p(L):p)});Py.displayName="NavLink";var Jy=S.forwardRef(({discover:l="render",fetcherKey:a,navigate:r,reloadDocument:i,replace:c,state:u,method:f=ol,action:m,onSubmit:p,relative:g,preventScrollReset:y,viewTransition:x,...w},E)=>{let T=eb(),B=tb(m,{relative:g}),z=f.toLowerCase()==="get"?"get":"post",q=typeof m=="string"&&zm.test(m),$=U=>{if(p&&p(U),U.defaultPrevented)return;U.preventDefault();let D=U.nativeEvent.submitter,R=D?.getAttribute("formmethod")||f;T(D||U.currentTarget,{fetcherKey:a,method:R,navigate:r,replace:c,state:u,relative:g,preventScrollReset:y,viewTransition:x})};return S.createElement("form",{ref:E,method:z,action:B,onSubmit:i?p:$,...w,"data-discover":!q&&l==="render"?"true":void 0})});Jy.displayName="Form";function Zy(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Om(l){let a=S.useContext(bs);return De(a,Zy(l)),a}function Wy(l,{target:a,replace:r,state:i,preventScrollReset:c,relative:u,viewTransition:f}={}){let m=vu(),p=Yn(),g=Dr(l,{relative:u});return S.useCallback(y=>{if(zy(y,a)){y.preventDefault();let x=r!==void 0?r:Or(p)===Or(g);m(l,{replace:x,state:i,preventScrollReset:c,relative:u,viewTransition:f})}},[p,m,g,r,i,a,l,c,u,f])}var Iy=0,Fy=()=>`__${String(++Iy)}__`;function eb(){let{router:l}=Om("useSubmit"),{basename:a}=S.useContext(qt),r=by();return S.useCallback(async(i,c={})=>{let{action:u,method:f,encType:m,formData:p,body:g}=Ry(i,a);if(c.navigate===!1){let y=c.fetcherKey||Fy();await l.fetch(y,r,c.action||u,{preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||f,formEncType:c.encType||m,flushSync:c.flushSync})}else await l.navigate(c.action||u,{preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||f,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[l,a,r])}function tb(l,{relative:a}={}){let{basename:r}=S.useContext(qt),i=S.useContext(Kt);De(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),u={...Dr(l||".",{relative:a})},f=Yn();if(l==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(y=>y==="")){m.delete("index"),p.filter(x=>x).forEach(x=>m.append("index",x));let y=m.toString();u.search=y?`?${y}`:""}}return(!l||l===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:fn([r,u.pathname])),Or(u)}function nb(l,{relative:a}={}){let r=S.useContext(_m);De(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Om("useViewTransitionState"),c=Dr(l,{relative:a});if(!r.isTransitioning)return!1;let u=hn(r.currentLocation.pathname,i)||r.currentLocation.pathname,f=hn(r.nextLocation.pathname,i)||r.nextLocation.pathname;return hl(c.pathname,f)!=null||hl(c.pathname,u)!=null}const ab="modulepreload",sb=function(l){return"/"+l},q0={},Ur=function(a,r,i){let c=Promise.resolve();if(r&&r.length>0){let g=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var f=g;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=m?.nonce||m?.getAttribute("nonce");c=g(r.map(y=>{if(y=sb(y),y in q0)return;q0[y]=!0;const x=y.endsWith(".css"),w=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const E=document.createElement("link");if(E.rel=x?"stylesheet":ab,x||(E.as="script"),E.crossOrigin="",E.href=y,p&&E.setAttribute("nonce",p),document.head.appendChild(E),x)return new Promise((T,B)=>{E.addEventListener("load",T),E.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(m){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=m,window.dispatchEvent(p),!p.defaultPrevented)throw m}return c.then(m=>{for(const p of m||[])p.status==="rejected"&&u(p.reason);return a().catch(u)})},rb=l=>{let a;return l?a=l:typeof fetch>"u"?a=(...r)=>Ur(async()=>{const{default:i}=await Promise.resolve().then(()=>_s);return{default:i}},[]).then(({default:i})=>i(...r)):a=fetch,(...r)=>a(...r)};class wu extends Error{constructor(a,r="FunctionsError",i){super(a),this.name=r,this.context=i}}class ib extends wu{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class B0 extends wu{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class $0 extends wu{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var tu;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(tu||(tu={}));var lb=function(l,a,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(y){try{g(i.next(y))}catch(x){f(x)}}function p(y){try{g(i.throw(y))}catch(x){f(x)}}function g(y){y.done?u(y.value):c(y.value).then(m,p)}g((i=i.apply(l,a||[])).next())})};class ob{constructor(a,{headers:r={},customFetch:i,region:c=tu.Any}={}){this.url=a,this.headers=r,this.region=c,this.fetch=rb(i)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a,r={}){var i;return lb(this,void 0,void 0,function*(){try{const{headers:c,method:u,body:f}=r;let m={},{region:p}=r;p||(p=this.region);const g=new URL(`${this.url}/${a}`);p&&p!=="any"&&(m["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let y;f&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=f):typeof f=="string"?(m["Content-Type"]="text/plain",y=f):typeof FormData<"u"&&f instanceof FormData?y=f:(m["Content-Type"]="application/json",y=JSON.stringify(f)));const x=yield this.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),c),body:y}).catch(B=>{throw new ib(B)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new B0(x);if(!x.ok)throw new $0(x);let E=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),T;return E==="application/json"?T=yield x.json():E==="application/octet-stream"?T=yield x.blob():E==="text/event-stream"?T=x:E==="multipart/form-data"?T=yield x.formData():T=yield x.text(),{data:T,error:null,response:x}}catch(c){return{data:null,error:c,response:c instanceof $0||c instanceof B0?c.context:void 0}}})}}var We={},Fa={},es={},ts={},ns={},as={},cb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ms=cb();const ub=ms.fetch,Rm=ms.fetch.bind(ms),Cm=ms.Headers,db=ms.Request,fb=ms.Response,_s=Object.freeze(Object.defineProperty({__proto__:null,Headers:Cm,Request:db,Response:fb,default:Rm,fetch:ub},Symbol.toStringTag,{value:"Module"})),hb=jv(_s);var el={},H0;function Mm(){if(H0)return el;H0=1,Object.defineProperty(el,"__esModule",{value:!0});class l extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return el.default=l,el}var G0;function Dm(){if(G0)return as;G0=1;var l=as&&as.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(as,"__esModule",{value:!0});const a=l(hb),r=l(Mm());class i{constructor(u){var f,m;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(f=u.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=u.signal,this.isMaybeSingle=(m=u.isMaybeSingle)!==null&&m!==void 0?m:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,f){return this.headers=new Headers(this.headers),this.headers.set(u,f),this}then(u,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var y,x,w,E;let T=null,B=null,z=null,q=g.status,$=g.statusText;if(g.ok){if(this.method!=="HEAD"){const Q=await g.text();Q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?B=Q:B=JSON.parse(Q))}const D=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),R=(w=g.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");D&&R&&R.length>1&&(z=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(B)&&(B.length>1?(T={code:"PGRST116",details:`Results contain ${B.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},B=null,z=null,q=406,$="Not Acceptable"):B.length===1?B=B[0]:B=null)}else{const D=await g.text();try{T=JSON.parse(D),Array.isArray(T)&&g.status===404&&(B=[],T=null,q=200,$="OK")}catch{g.status===404&&D===""?(q=204,$="No Content"):T={message:D}}if(T&&this.isMaybeSingle&&(!((E=T?.details)===null||E===void 0)&&E.includes("0 rows"))&&(T=null,q=200,$="OK"),T&&this.shouldThrowOnError)throw new r.default(T)}return{error:T,data:B,count:z,status:q,statusText:$}});return this.shouldThrowOnError||(p=p.catch(g=>{var y,x,w;return{error:{message:`${(y=g?.name)!==null&&y!==void 0?y:"FetchError"}: ${g?.message}`,details:`${(x=g?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(w=g?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),p.then(u,f)}returns(){return this}overrideTypes(){return this}}return as.default=i,as}var Y0;function Um(){if(Y0)return ns;Y0=1;var l=ns&&ns.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ns,"__esModule",{value:!0});const a=l(Dm());class r extends a.default{select(c){let u=!1;const f=(c??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:f,foreignTable:m,referencedTable:p=m}={}){const g=p?`${p}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${c}.${u?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:f=u}={}){const m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${c}`),this}range(c,u,{foreignTable:f,referencedTable:m=f}={}){const p=typeof m>"u"?"offset":`${m}.offset`,g=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${c}`),this.url.searchParams.set(g,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:f=!1,buffers:m=!1,wal:p=!1,format:g="text"}={}){var y;const x=[c?"analyze":null,u?"verbose":null,f?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),w=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${w}"; options=${x};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return ns.default=r,ns}var V0;function Su(){if(V0)return ts;V0=1;var l=ts&&ts.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ts,"__esModule",{value:!0});const a=l(Um());class r extends a.default{eq(c,u){return this.url.searchParams.append(c,`eq.${u}`),this}neq(c,u){return this.url.searchParams.append(c,`neq.${u}`),this}gt(c,u){return this.url.searchParams.append(c,`gt.${u}`),this}gte(c,u){return this.url.searchParams.append(c,`gte.${u}`),this}lt(c,u){return this.url.searchParams.append(c,`lt.${u}`),this}lte(c,u){return this.url.searchParams.append(c,`lte.${u}`),this}like(c,u){return this.url.searchParams.append(c,`like.${u}`),this}likeAllOf(c,u){return this.url.searchParams.append(c,`like(all).{${u.join(",")}}`),this}likeAnyOf(c,u){return this.url.searchParams.append(c,`like(any).{${u.join(",")}}`),this}ilike(c,u){return this.url.searchParams.append(c,`ilike.${u}`),this}ilikeAllOf(c,u){return this.url.searchParams.append(c,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(c,u){return this.url.searchParams.append(c,`ilike(any).{${u.join(",")}}`),this}is(c,u){return this.url.searchParams.append(c,`is.${u}`),this}in(c,u){const f=Array.from(new Set(u)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(c,`in.(${f})`),this}contains(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cs.{${u.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(u)}`),this}containedBy(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cd.{${u.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(u)}`),this}rangeGt(c,u){return this.url.searchParams.append(c,`sr.${u}`),this}rangeGte(c,u){return this.url.searchParams.append(c,`nxl.${u}`),this}rangeLt(c,u){return this.url.searchParams.append(c,`sl.${u}`),this}rangeLte(c,u){return this.url.searchParams.append(c,`nxr.${u}`),this}rangeAdjacent(c,u){return this.url.searchParams.append(c,`adj.${u}`),this}overlaps(c,u){return typeof u=="string"?this.url.searchParams.append(c,`ov.${u}`):this.url.searchParams.append(c,`ov.{${u.join(",")}}`),this}textSearch(c,u,{config:f,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const g=f===void 0?"":`(${f})`;return this.url.searchParams.append(c,`${p}fts${g}.${u}`),this}match(c){return Object.entries(c).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(c,u,f){return this.url.searchParams.append(c,`not.${u}.${f}`),this}or(c,{foreignTable:u,referencedTable:f=u}={}){const m=f?`${f}.or`:"or";return this.url.searchParams.append(m,`(${c})`),this}filter(c,u,f){return this.url.searchParams.append(c,`${u}.${f}`),this}}return ts.default=r,ts}var X0;function Lm(){if(X0)return es;X0=1;var l=es&&es.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(es,"__esModule",{value:!0});const a=l(Su());class r{constructor(c,{headers:u={},schema:f,fetch:m}){this.url=c,this.headers=new Headers(u),this.schema=f,this.fetch=m}select(c,{head:u=!1,count:f}={}){const m=u?"HEAD":"GET";let p=!1;const g=(c??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",g),f&&this.headers.append("Prefer",`count=${f}`),new a.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:f=!0}={}){var m;const p="POST";if(u&&this.headers.append("Prefer",`count=${u}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const g=c.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(g.length>0){const y=[...new Set(g)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new a.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:f=!1,count:m,defaultToNull:p=!0}={}){var g;const y="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const x=c.reduce((w,E)=>w.concat(Object.keys(E)),[]);if(x.length>0){const w=[...new Set(x)].map(E=>`"${E}"`);this.url.searchParams.set("columns",w.join(","))}}return new a.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(c,{count:u}={}){var f;const m="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new a.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:c}={}){var u;const f="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new a.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return es.default=r,es}var Q0;function mb(){if(Q0)return Fa;Q0=1;var l=Fa&&Fa.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Fa,"__esModule",{value:!0});const a=l(Lm()),r=l(Su());class i{constructor(u,{headers:f={},schema:m,fetch:p}={}){this.url=u,this.headers=new Headers(f),this.schemaName=m,this.fetch=p}from(u){const f=new URL(`${this.url}/${u}`);return new a.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new i(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,f={},{head:m=!1,get:p=!1,count:g}={}){var y;let x;const w=new URL(`${this.url}/rpc/${u}`);let E;m||p?(x=m?"HEAD":"GET",Object.entries(f).filter(([B,z])=>z!==void 0).map(([B,z])=>[B,Array.isArray(z)?`{${z.join(",")}}`:`${z}`]).forEach(([B,z])=>{w.searchParams.append(B,z)})):(x="POST",E=f);const T=new Headers(this.headers);return g&&T.set("Prefer",`count=${g}`),new r.default({method:x,url:w,headers:T,schema:this.schemaName,body:E,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return Fa.default=i,Fa}var K0;function gb(){if(K0)return We;K0=1;var l=We&&We.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(We,"__esModule",{value:!0}),We.PostgrestError=We.PostgrestBuilder=We.PostgrestTransformBuilder=We.PostgrestFilterBuilder=We.PostgrestQueryBuilder=We.PostgrestClient=void 0;const a=l(mb());We.PostgrestClient=a.default;const r=l(Lm());We.PostgrestQueryBuilder=r.default;const i=l(Su());We.PostgrestFilterBuilder=i.default;const c=l(Um());We.PostgrestTransformBuilder=c.default;const u=l(Dm());We.PostgrestBuilder=u.default;const f=l(Mm());return We.PostgrestError=f.default,We.default={PostgrestClient:a.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:f.default},We}var pb=gb();const vb=Sv(pb),{PostgrestClient:yb,PostgrestQueryBuilder:jw,PostgrestFilterBuilder:kw,PostgrestTransformBuilder:Ew,PostgrestBuilder:Nw,PostgrestError:Tw}=vb;class bb{static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let r=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(r+=`

Suggested solution: ${a.workaround}`),new Error(r)}static createWebSocket(a,r){const i=this.getWebSocketConstructor();return new i(a,r)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const xb="2.15.1",_b=`realtime-js/${xb}`,wb="1.0.0",nu=1e4,Sb=1e3,jb=100;var Er;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(Er||(Er={}));var Xe;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(Xe||(Xe={}));var Ut;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(Ut||(Ut={}));var au;(function(l){l.websocket="websocket"})(au||(au={}));var fa;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(fa||(fa={}));class kb{constructor(){this.HEADER_LENGTH=1}decode(a,r){return a.constructor===ArrayBuffer?r(this._binaryDecode(a)):r(typeof a=="string"?JSON.parse(a):{})}_binaryDecode(a){const r=new DataView(a),i=new TextDecoder;return this._decodeBroadcast(a,r,i)}_decodeBroadcast(a,r,i){const c=r.getUint8(1),u=r.getUint8(2);let f=this.HEADER_LENGTH+2;const m=i.decode(a.slice(f,f+c));f=f+c;const p=i.decode(a.slice(f,f+u));f=f+u;const g=JSON.parse(i.decode(a.slice(f,a.byteLength)));return{ref:null,topic:m,event:p,payload:g}}}let qm=class{constructor(a,r){this.callback=a,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Oe;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Oe||(Oe={}));const P0=(l,a,r={})=>{var i;const c=(i=r.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(a).reduce((u,f)=>(u[f]=Eb(f,l,a,c),u),{})},Eb=(l,a,r,i)=>{const c=a.find(m=>m.name===l),u=c?.type,f=r[l];return u&&!i.includes(u)?Bm(u,f):su(f)},Bm=(l,a)=>{if(l.charAt(0)==="_"){const r=l.slice(1,l.length);return Ab(a,r)}switch(l){case Oe.bool:return Nb(a);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return Tb(a);case Oe.json:case Oe.jsonb:return zb(a);case Oe.timestamp:return Ob(a);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return su(a);default:return su(a)}},su=l=>l,Nb=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},Tb=l=>{if(typeof l=="string"){const a=parseFloat(l);if(!Number.isNaN(a))return a}return l},zb=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(a){return console.log(`JSON parse error: ${a}`),l}return l},Ab=(l,a)=>{if(typeof l!="string")return l;const r=l.length-1,i=l[r];if(l[0]==="{"&&i==="}"){let u;const f=l.slice(1,r);try{u=JSON.parse("["+f+"]")}catch{u=f?f.split(","):[]}return u.map(m=>Bm(a,m))}return l},Ob=l=>typeof l=="string"?l.replace(" ","T"):l,$m=l=>{let a=l;return a=a.replace(/^ws/i,"http"),a=a.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),a.replace(/\/+$/,"")+"/api/broadcast"};class Yc{constructor(a,r,i={},c=nu){this.channel=a,this.event=r,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,r){var i;return this._hasReceived(a)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:a,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:r}){this.recHooks.filter(i=>i.status===a).forEach(i=>i.callback(r))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var J0;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(J0||(J0={}));class Nr{constructor(a,r){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:u,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nr.syncState(this.state,c,u,f),this.pendingDiffs.forEach(p=>{this.state=Nr.syncDiff(this.state,p,u,f)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},c=>{const{onJoin:u,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Nr.syncDiff(this.state,c,u,f),m())}),this.onJoin((c,u,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:f})}),this.onLeave((c,u,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,r,i,c){const u=this.cloneDeep(a),f=this.transformState(r),m={},p={};return this.map(u,(g,y)=>{f[g]||(p[g]=y)}),this.map(f,(g,y)=>{const x=u[g];if(x){const w=y.map(z=>z.presence_ref),E=x.map(z=>z.presence_ref),T=y.filter(z=>E.indexOf(z.presence_ref)<0),B=x.filter(z=>w.indexOf(z.presence_ref)<0);T.length>0&&(m[g]=T),B.length>0&&(p[g]=B)}else m[g]=y}),this.syncDiff(u,{joins:m,leaves:p},i,c)}static syncDiff(a,r,i,c){const{joins:u,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(u,(m,p)=>{var g;const y=(g=a[m])!==null&&g!==void 0?g:[];if(a[m]=this.cloneDeep(p),y.length>0){const x=a[m].map(E=>E.presence_ref),w=y.filter(E=>x.indexOf(E.presence_ref)<0);a[m].unshift(...w)}i(m,y,p)}),this.map(f,(m,p)=>{let g=a[m];if(!g)return;const y=p.map(x=>x.presence_ref);g=g.filter(x=>y.indexOf(x.presence_ref)<0),a[m]=g,c(m,g,p),g.length===0&&delete a[m]}),a}static map(a,r){return Object.getOwnPropertyNames(a).map(i=>r(i,a[i]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((r,i)=>{const c=a[i];return"metas"in c?r[i]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):r[i]=c,r},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Z0;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(Z0||(Z0={}));var Tr;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(Tr||(Tr={}));var dn;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(dn||(dn={}));class ju{constructor(a,r={config:{}},i){this.topic=a,this.params=r,this.socket=i,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Yc(this,Ut.join,this.params,this.timeout),this.rejoinTimer=new qm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ut.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new Nr(this),this.broadcastEndpointURL=$m(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(a,r=this.timeout){var i,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:u,presence:f,private:m}}=this.params,p=(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&c!==void 0?c:[],g=!!this.bindings[Tr.PRESENCE]&&this.bindings[Tr.PRESENCE].length>0,y={},x={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:g}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(w=>a?.(dn.CHANNEL_ERROR,w)),this._onClose(()=>a?.(dn.CLOSED)),this.updateJoinPayload(Object.assign({config:x},y)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:w})=>{var E;if(this.socket.setAuth(),w===void 0){a?.(dn.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,B=(E=T?.length)!==null&&E!==void 0?E:0,z=[];for(let q=0;q<B;q++){const $=T[q],{filter:{event:U,schema:D,table:R,filter:Q}}=$,L=w&&w[q];if(L&&L.event===U&&L.schema===D&&L.table===R&&L.filter===Q)z.push(Object.assign(Object.assign({},$),{id:L.id}));else{this.unsubscribe(),this.state=Xe.errored,a?.(dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=z,a&&a(dn.SUBSCRIBED);return}}).receive("error",w=>{this.state=Xe.errored,a?.(dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{a?.(dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,r={}){return await this.send({type:"presence",event:"track",payload:a},r.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,r,i){return this.state===Xe.joined&&a===Tr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,r,i)}async send(a,r={}){var i,c;if(!this._canPush()&&a.type==="broadcast"){const{event:u,payload:f}=a,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:f,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var f,m,p;const g=this._push(a.type,a,r.timeout||this.timeout);a.type==="broadcast"&&!(!((p=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=Xe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ut.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new Yc(this,Ut.leave,{},a),i.receive("ok",()=>{r(),c("ok")}).receive("timeout",()=>{r(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xe.closed,this.bindings={}}async _fetchWithTimeout(a,r,i){const c=new AbortController,u=setTimeout(()=>c.abort(),i),f=await this.socket.fetch(a,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(u),f}_push(a,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Yc(this,a,r,i);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>jb){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(a,r,i){return r}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,r,i){var c,u;const f=a.toLocaleLowerCase(),{close:m,error:p,leave:g,join:y}=Ut;if(i&&[m,p,g,y].indexOf(f)>=0&&i!==this._joinRef())return;let w=this._onMessage(f,r,i);if(r&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(E=>{var T,B,z;return((T=E.filter)===null||T===void 0?void 0:T.event)==="*"||((z=(B=E.filter)===null||B===void 0?void 0:B.event)===null||z===void 0?void 0:z.toLocaleLowerCase())===f}).map(E=>E.callback(w,i)):(u=this.bindings[f])===null||u===void 0||u.filter(E=>{var T,B,z,q,$,U;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in E){const D=E.id,R=(T=E.filter)===null||T===void 0?void 0:T.event;return D&&((B=r.ids)===null||B===void 0?void 0:B.includes(D))&&(R==="*"||R?.toLocaleLowerCase()===((z=r.data)===null||z===void 0?void 0:z.type.toLocaleLowerCase()))}else{const D=($=(q=E?.filter)===null||q===void 0?void 0:q.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return D==="*"||D===((U=r?.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===f}).map(E=>{if(typeof w=="object"&&"ids"in w){const T=w.data,{schema:B,table:z,commit_timestamp:q,type:$,errors:U}=T;w=Object.assign(Object.assign({},{schema:B,table:z,commit_timestamp:q,eventType:$,new:{},old:{},errors:U}),this._getPayloadRecords(T))}E.callback(w,i)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,r,i){const c=a.toLocaleLowerCase(),u={type:c,filter:r,callback:i};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(a,r){const i=a.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&ju.isEqual(c.filter,r))})),this}static isEqual(a,r){if(Object.keys(a).length!==Object.keys(r).length)return!1;for(const i in a)if(a[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(Ut.close,{},a)}_onError(a){this._on(Ut.error,{},r=>a(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const r={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(r.new=P0(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(r.old=P0(a.columns,a.old_record)),r}}const W0=()=>{},tl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Rb=[1e3,2e3,5e3,1e4],Cb=1e4,Mb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Db{constructor(a,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nu,this.transport=null,this.heartbeatIntervalMs=tl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=W0,this.ref=0,this.reconnectTimer=null,this.logger=W0,this.conn=null,this.sendBuffer=[],this.serializer=new kb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let u;return c?u=c:typeof fetch>"u"?u=(...f)=>Ur(async()=>{const{default:m}=await Promise.resolve().then(()=>_s);return{default:m}},void 0).then(({default:m})=>m(...f)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...f)=>u(...f)},!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${a}/${au.websocket}`,this.httpEndpoint=$m(a),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bb.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const r=a.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wb}))}disconnect(a,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},a?this.conn.close(a,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const r=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const a=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,r,i){this.logger(a,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Er.connecting:return fa.Connecting;case Er.open:return fa.Open;case Er.closing:return fa.Closing;default:return fa.Closed}}isConnected(){return this.connectionState()===fa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,r={config:{}}){const i=`realtime:${a}`,c=this.getChannels().find(u=>u.topic===i);if(c)return c;{const u=new ju(`realtime:${a}`,r,this);return this.channels.push(u),u}}push(a){const{topic:r,event:i,payload:c,ref:u}=a,f=()=>{this.encode(a,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${r} ${i} (${u})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(Sb,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},tl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let r=this.channels.find(i=>i.topic===a&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${a}"`),r.unsubscribe())}_remove(a){this.channels=this.channels.filter(r=>r.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:c,payload:u,ref:f}=r,m=f?`(${f})`:"",p=u.status||"";this.log("receive",`${p} ${i} ${c} ${m}`.trim(),u),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(c,u,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(a){var r;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var r;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(Ut.error))}_appendParams(a,r){if(Object.keys(r).length===0)return a;const i=a.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${a}${i}${c}`}_workerObjectUrl(a){let r;if(a)r=a;else{const i=new Blob([Mb],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(a,r=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(a=null){let r;a?r=a:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const c={access_token:r,version:_b};r&&i.updateJoinPayload(c),i.joinedOnce&&i._isJoined()&&i._push(Ut.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${a}`,r)})}_triggerStateCallbacks(a,r){try{this.stateChangeCallbacks[a].forEach(i=>{try{i(r)}catch(c){this.log("error",`error in ${a} callback`,c)}})}catch(i){this.log("error",`error triggering ${a} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new qm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},tl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var r,i,c,u,f,m,p,g;if(this.transport=(r=a?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=a?.timeout)!==null&&i!==void 0?i:nu,this.heartbeatIntervalMs=(c=a?.heartbeatIntervalMs)!==null&&c!==void 0?c:tl.HEARTBEAT_INTERVAL,this.worker=(u=a?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(f=a?.accessToken)!==null&&f!==void 0?f:null,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=a?.reconnectAfterMs)!==null&&m!==void 0?m:(y=>Rb[y-1]||Cb),this.encode=(p=a?.encode)!==null&&p!==void 0?p:((y,x)=>x(JSON.stringify(y))),this.decode=(g=a?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}class ku extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function Qe(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class Ub extends ku{constructor(a,r,i){super(a),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ru extends ku{constructor(a,r){super(a),this.name="StorageUnknownError",this.originalError=r}}var Lb=function(l,a,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(y){try{g(i.next(y))}catch(x){f(x)}}function p(y){try{g(i.throw(y))}catch(x){f(x)}}function g(y){y.done?u(y.value):c(y.value).then(m,p)}g((i=i.apply(l,a||[])).next())})};const Hm=l=>{let a;return l?a=l:typeof fetch>"u"?a=(...r)=>Ur(async()=>{const{default:i}=await Promise.resolve().then(()=>_s);return{default:i}},void 0).then(({default:i})=>i(...r)):a=fetch,(...r)=>a(...r)},qb=()=>Lb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ur(()=>Promise.resolve().then(()=>_s),void 0)).Response:Response}),iu=l=>{if(Array.isArray(l))return l.map(r=>iu(r));if(typeof l=="function"||l!==Object(l))return l;const a={};return Object.entries(l).forEach(([r,i])=>{const c=r.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));a[c]=iu(i)}),a},Bb=l=>{if(typeof l!="object"||l===null)return!1;const a=Object.getPrototypeOf(l);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)};var ha=function(l,a,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(y){try{g(i.next(y))}catch(x){f(x)}}function p(y){try{g(i.throw(y))}catch(x){f(x)}}function g(y){y.done?u(y.value):c(y.value).then(m,p)}g((i=i.apply(l,a||[])).next())})};const Vc=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),$b=(l,a,r)=>ha(void 0,void 0,void 0,function*(){const i=yield qb();l instanceof i&&!r?.noResolveJson?l.json().then(c=>{const u=l.status||500,f=c?.statusCode||u+"";a(new Ub(Vc(c),u,f))}).catch(c=>{a(new ru(Vc(c),c))}):a(new ru(Vc(l),l))}),Hb=(l,a,r,i)=>{const c={method:l,headers:a?.headers||{}};return l==="GET"||!i?c:(Bb(i)?(c.headers=Object.assign({"Content-Type":"application/json"},a?.headers),c.body=JSON.stringify(i)):c.body=i,a?.duplex&&(c.duplex=a.duplex),Object.assign(Object.assign({},c),r))};function Lr(l,a,r,i,c,u){return ha(this,void 0,void 0,function*(){return new Promise((f,m)=>{l(r,Hb(a,i,c,u)).then(p=>{if(!p.ok)throw p;return i?.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>$b(p,m,i))})})}function ml(l,a,r,i){return ha(this,void 0,void 0,function*(){return Lr(l,"GET",a,r,i)})}function Xt(l,a,r,i,c){return ha(this,void 0,void 0,function*(){return Lr(l,"POST",a,i,c,r)})}function lu(l,a,r,i,c){return ha(this,void 0,void 0,function*(){return Lr(l,"PUT",a,i,c,r)})}function Gb(l,a,r,i){return ha(this,void 0,void 0,function*(){return Lr(l,"HEAD",a,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function Gm(l,a,r,i,c){return ha(this,void 0,void 0,function*(){return Lr(l,"DELETE",a,i,c,r)})}var it=function(l,a,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(y){try{g(i.next(y))}catch(x){f(x)}}function p(y){try{g(i.throw(y))}catch(x){f(x)}}function g(y){y.done?u(y.value):c(y.value).then(m,p)}g((i=i.apply(l,a||[])).next())})};const Yb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},I0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vb{constructor(a,r={},i,c){this.url=a,this.headers=r,this.bucketId=i,this.fetch=Hm(c)}uploadOrUpdate(a,r,i,c){return it(this,void 0,void 0,function*(){try{let u;const f=Object.assign(Object.assign({},I0),c);let m=Object.assign(Object.assign({},this.headers),a==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),p&&u.append("metadata",this.encodeMetadata(p)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",f.cacheControl),p&&u.append("metadata",this.encodeMetadata(p))):(u=i,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),c?.headers&&(m=Object.assign(Object.assign({},m),c.headers));const g=this._removeEmptyFolders(r),y=this._getFinalPath(g),x=yield(a=="PUT"?lu:Xt)(this.fetch,`${this.url}/object/${y}`,u,Object.assign({headers:m},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:g,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(Qe(u))return{data:null,error:u};throw u}})}upload(a,r,i){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,r,i)})}uploadToSignedUrl(a,r,i,c){return it(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(a),f=this._getFinalPath(u),m=new URL(this.url+`/object/upload/sign/${f}`);m.searchParams.set("token",r);try{let p;const g=Object.assign({upsert:I0.upsert},c),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",g.cacheControl)):(p=i,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const x=yield lu(this.fetch,m.toString(),p,{headers:y});return{data:{path:u,fullPath:x.Key},error:null}}catch(p){if(Qe(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(a,r){return it(this,void 0,void 0,function*(){try{let i=this._getFinalPath(a);const c=Object.assign({},this.headers);r?.upsert&&(c["x-upsert"]="true");const u=yield Xt(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:c}),f=new URL(this.url+u.url),m=f.searchParams.get("token");if(!m)throw new ku("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:m},error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}update(a,r,i){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,r,i)})}move(a,r,i){return it(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(Qe(c))return{data:null,error:c};throw c}})}copy(a,r,i){return it(this,void 0,void 0,function*(){try{return{data:{path:(yield Xt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(Qe(c))return{data:null,error:c};throw c}})}createSignedUrl(a,r,i){return it(this,void 0,void 0,function*(){try{let c=this._getFinalPath(a),u=yield Xt(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:r},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${f}`)},{data:u,error:null}}catch(c){if(Qe(c))return{data:null,error:c};throw c}})}createSignedUrls(a,r,i){return it(this,void 0,void 0,function*(){try{const c=yield Xt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:a},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${u}`):null})),error:null}}catch(c){if(Qe(c))return{data:null,error:c};throw c}})}download(a,r){return it(this,void 0,void 0,function*(){const c=typeof r?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(r?.transform||{}),f=u?`?${u}`:"";try{const m=this._getFinalPath(a);return{data:yield(yield ml(this.fetch,`${this.url}/${c}/${m}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(Qe(m))return{data:null,error:m};throw m}})}info(a){return it(this,void 0,void 0,function*(){const r=this._getFinalPath(a);try{const i=yield ml(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:iu(i),error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}exists(a){return it(this,void 0,void 0,function*(){const r=this._getFinalPath(a);try{return yield Gb(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Qe(i)&&i instanceof ru){const c=i.originalError;if([400,404].includes(c?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(a,r){const i=this._getFinalPath(a),c=[],u=r?.download?`download=${r.download===!0?"":r.download}`:"";u!==""&&c.push(u);const m=typeof r?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(r?.transform||{});p!==""&&c.push(p);let g=c.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${g}`)}}}remove(a){return it(this,void 0,void 0,function*(){try{return{data:yield Gm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}list(a,r,i){return it(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Yb),r),{prefix:a||""});return{data:yield Xt(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},i),error:null}}catch(c){if(Qe(c))return{data:null,error:c};throw c}})}listV2(a,r){return it(this,void 0,void 0,function*(){try{const i=Object.assign({},a);return{data:yield Xt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const r=[];return a.width&&r.push(`width=${a.width}`),a.height&&r.push(`height=${a.height}`),a.resize&&r.push(`resize=${a.resize}`),a.format&&r.push(`format=${a.format}`),a.quality&&r.push(`quality=${a.quality}`),r.join("&")}}const Xb="2.11.0",Qb={"X-Client-Info":`storage-js/${Xb}`};var ss=function(l,a,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(y){try{g(i.next(y))}catch(x){f(x)}}function p(y){try{g(i.throw(y))}catch(x){f(x)}}function g(y){y.done?u(y.value):c(y.value).then(m,p)}g((i=i.apply(l,a||[])).next())})};class Kb{constructor(a,r={},i,c){const u=new URL(a);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},Qb),r),this.fetch=Hm(i)}listBuckets(){return ss(this,void 0,void 0,function*(){try{return{data:yield ml(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(a){if(Qe(a))return{data:null,error:a};throw a}})}getBucket(a){return ss(this,void 0,void 0,function*(){try{return{data:yield ml(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}createBucket(a,r={public:!1}){return ss(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}updateBucket(a,r){return ss(this,void 0,void 0,function*(){try{return{data:yield lu(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}emptyBucket(a){return ss(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}deleteBucket(a){return ss(this,void 0,void 0,function*(){try{return{data:yield Gm(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}}class Pb extends Kb{constructor(a,r={},i,c){super(a,r,i,c)}from(a){return new Vb(this.url,this.headers,a,this.fetch)}}const Jb="2.56.0";let kr="";typeof Deno<"u"?kr="deno":typeof document<"u"?kr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kr="react-native":kr="node";const Zb={"X-Client-Info":`supabase-js-${kr}/${Jb}`},Wb={headers:Zb},Ib={schema:"public"},Fb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ex={};var tx=function(l,a,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(y){try{g(i.next(y))}catch(x){f(x)}}function p(y){try{g(i.throw(y))}catch(x){f(x)}}function g(y){y.done?u(y.value):c(y.value).then(m,p)}g((i=i.apply(l,a||[])).next())})};const nx=l=>{let a;return l?a=l:typeof fetch>"u"?a=Rm:a=fetch,(...r)=>a(...r)},ax=()=>typeof Headers>"u"?Cm:Headers,sx=(l,a,r)=>{const i=nx(r),c=ax();return(u,f)=>tx(void 0,void 0,void 0,function*(){var m;const p=(m=yield a())!==null&&m!==void 0?m:l;let g=new c(f?.headers);return g.has("apikey")||g.set("apikey",l),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),i(u,Object.assign(Object.assign({},f),{headers:g}))})};var rx=function(l,a,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(y){try{g(i.next(y))}catch(x){f(x)}}function p(y){try{g(i.throw(y))}catch(x){f(x)}}function g(y){y.done?u(y.value):c(y.value).then(m,p)}g((i=i.apply(l,a||[])).next())})};function ix(l){return l.endsWith("/")?l:l+"/"}function lx(l,a){var r,i;const{db:c,auth:u,realtime:f,global:m}=l,{db:p,auth:g,realtime:y,global:x}=a,w={db:Object.assign(Object.assign({},p),c),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},y),f),storage:{},global:Object.assign(Object.assign(Object.assign({},x),m),{headers:Object.assign(Object.assign({},(r=x?.headers)!==null&&r!==void 0?r:{}),(i=m?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>rx(this,void 0,void 0,function*(){return""})};return l.accessToken?w.accessToken=l.accessToken:delete w.accessToken,w}const Ym="2.71.1",us=30*1e3,ou=3,Xc=ou*us,ox="http://localhost:9999",cx="supabase.auth.token",ux={"X-Client-Info":`gotrue-js/${Ym}`},cu="X-Supabase-Api-Version",Vm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fx=600*1e3;class Eu extends Error{constructor(a,r,i){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function ue(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class hx extends Eu{constructor(a,r,i){super(a,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function mx(l){return ue(l)&&l.name==="AuthApiError"}class Xm extends Eu{constructor(a,r){super(a),this.name="AuthUnknownError",this.originalError=r}}class Vn extends Eu{constructor(a,r,i,c){super(a,i,c),this.name=r,this.status=i}}class $n extends Vn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function gx(l){return ue(l)&&l.name==="AuthSessionMissingError"}class nl extends Vn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class al extends Vn{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class sl extends Vn{constructor(a,r=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function px(l){return ue(l)&&l.name==="AuthImplicitGrantRedirectError"}class F0 extends Vn{constructor(a,r=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uu extends Vn{constructor(a,r){super(a,"AuthRetryableFetchError",r,void 0)}}function Qc(l){return ue(l)&&l.name==="AuthRetryableFetchError"}class em extends Vn{constructor(a,r,i){super(a,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class du extends Vn{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const gl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tm=` 	
\r=`.split(""),vx=(()=>{const l=new Array(128);for(let a=0;a<l.length;a+=1)l[a]=-1;for(let a=0;a<tm.length;a+=1)l[tm[a].charCodeAt(0)]=-2;for(let a=0;a<gl.length;a+=1)l[gl[a].charCodeAt(0)]=a;return l})();function nm(l,a,r){if(l!==null)for(a.queue=a.queue<<8|l,a.queuedBits+=8;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;r(gl[i]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const i=a.queue>>a.queuedBits-6&63;r(gl[i]),a.queuedBits-=6}}function Qm(l,a,r){const i=vx[l];if(i>-1)for(a.queue=a.queue<<6|i,a.queuedBits+=6;a.queuedBits>=8;)r(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function am(l){const a=[],r=f=>{a.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=f=>{xx(f,i,r)};for(let f=0;f<l.length;f+=1)Qm(l.charCodeAt(f),c,u);return a.join("")}function yx(l,a){if(l<=127){a(l);return}else if(l<=2047){a(192|l>>6),a(128|l&63);return}else if(l<=65535){a(224|l>>12),a(128|l>>6&63),a(128|l&63);return}else if(l<=1114111){a(240|l>>18),a(128|l>>12&63),a(128|l>>6&63),a(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function bx(l,a){for(let r=0;r<l.length;r+=1){let i=l.charCodeAt(r);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(l.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}yx(i,a)}}function xx(l,a,r){if(a.utf8seq===0){if(l<=127){r(l);return}for(let i=1;i<6;i+=1)if((l>>7-i&1)===0){a.utf8seq=i;break}if(a.utf8seq===2)a.codepoint=l&31;else if(a.utf8seq===3)a.codepoint=l&15;else if(a.utf8seq===4)a.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|l&63,a.utf8seq-=1,a.utf8seq===0&&r(a.codepoint)}}function _x(l){const a=[],r={queue:0,queuedBits:0},i=c=>{a.push(c)};for(let c=0;c<l.length;c+=1)Qm(l.charCodeAt(c),r,i);return new Uint8Array(a)}function wx(l){const a=[];return bx(l,r=>a.push(r)),new Uint8Array(a)}function Sx(l){const a=[],r={queue:0,queuedBits:0},i=c=>{a.push(c)};return l.forEach(c=>nm(c,r,i)),nm(null,r,i),a.join("")}function jx(l){return Math.round(Date.now()/1e3)+l}function kx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const a=Math.random()*16|0;return(l=="x"?a:a&3|8).toString(16)})}const Dt=()=>typeof window<"u"&&typeof document<"u",ca={tested:!1,writable:!1},Km=()=>{if(!Dt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ca.tested)return ca.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),ca.tested=!0,ca.writable=!0}catch{ca.tested=!0,ca.writable=!1}return ca.writable};function Ex(l){const a={},r=new URL(l);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,u)=>{a[u]=c})}catch{}return r.searchParams.forEach((i,c)=>{a[c]=i}),a}const Pm=l=>{let a;return l?a=l:typeof fetch>"u"?a=(...r)=>Ur(async()=>{const{default:i}=await Promise.resolve().then(()=>_s);return{default:i}},void 0).then(({default:i})=>i(...r)):a=fetch,(...r)=>a(...r)},Nx=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",ds=async(l,a,r)=>{await l.setItem(a,JSON.stringify(r))},ua=async(l,a)=>{const r=await l.getItem(a);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Bn=async(l,a)=>{await l.removeItem(a)};class yl{constructor(){this.promise=new yl.promiseConstructor((a,r)=>{this.resolve=a,this.reject=r})}}yl.promiseConstructor=Promise;function Kc(l){const a=l.split(".");if(a.length!==3)throw new du("Invalid JWT structure");for(let i=0;i<a.length;i++)if(!dx.test(a[i]))throw new du("JWT not in base64url format");return{header:JSON.parse(am(a[0])),payload:JSON.parse(am(a[1])),signature:_x(a[2]),raw:{header:a[0],payload:a[1]}}}async function Tx(l){return await new Promise(a=>{setTimeout(()=>a(null),l)})}function zx(l,a){return new Promise((i,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const f=await l(u);if(!a(u,null,f)){i(f);return}}catch(f){if(!a(u,f)){c(f);return}}})()})}function Ax(l){return("0"+l.toString(16)).substr(-2)}function Ox(){const a=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let c="";for(let u=0;u<56;u++)c+=r.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(a),Array.from(a,Ax).join("")}async function Rx(l){const r=new TextEncoder().encode(l),i=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(i);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function Cx(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const r=await Rx(l);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rs(l,a,r=!1){const i=Ox();let c=i;r&&(c+="/PASSWORD_RECOVERY"),await ds(l,`${a}-code-verifier`,c);const u=await Cx(i);return[u,i===u?"plain":"s256"]}const Mx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Dx(l){const a=l.headers.get(cu);if(!a||!a.match(Mx))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function Ux(l){if(!l)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(l<=a)throw new Error("JWT has expired")}function Lx(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const qx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function is(l){if(!qx.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pc(){const l={};return new Proxy(l,{get:(a,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sm(l){return JSON.parse(JSON.stringify(l))}var Bx=function(l,a){var r={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&a.indexOf(i)<0&&(r[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(l);c<i.length;c++)a.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(l,i[c])&&(r[i[c]]=l[i[c]]);return r};const da=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),$x=[502,503,504];async function rm(l){var a;if(!Nx(l))throw new uu(da(l),0);if($x.includes(l.status))throw new uu(da(l),l.status);let r;try{r=await l.json()}catch(u){throw new Xm(da(u),u)}let i;const c=Dx(l);if(c&&c.getTime()>=Vm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new em(da(r),l.status,((a=r.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(i==="session_not_found")throw new $n}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((u,f)=>u&&typeof f=="string",!0))throw new em(da(r),l.status,r.weak_password.reasons);throw new hx(da(r),l.status||500,i)}const Hx=(l,a,r,i)=>{const c={method:l,headers:a?.headers||{}};return l==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),r))};async function pe(l,a,r,i){var c;const u=Object.assign({},i?.headers);u[cu]||(u[cu]=Vm["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const f=(c=i?.query)!==null&&c!==void 0?c:{};i?.redirectTo&&(f.redirect_to=i.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await Gx(l,a,r+m,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(p):{data:Object.assign({},p),error:null}}async function Gx(l,a,r,i,c,u){const f=Hx(a,i,c,u);let m;try{m=await l(r,Object.assign({},f))}catch(p){throw console.error(p),new uu(da(p),0)}if(m.ok||await rm(m),i?.noResolveJson)return m;try{return await m.json()}catch(p){await rm(p)}}function un(l){var a;let r=null;Qx(l)&&(r=Object.assign({},l),l.expires_at||(r.expires_at=jx(l.expires_in)));const i=(a=l.user)!==null&&a!==void 0?a:l;return{data:{session:r,user:i},error:null}}function im(l){const a=un(l);return!a.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(a.data.weak_password=l.weak_password),a}function Hn(l){var a;return{data:{user:(a=l.user)!==null&&a!==void 0?a:l},error:null}}function Yx(l){return{data:l,error:null}}function Vx(l){const{action_link:a,email_otp:r,hashed_token:i,redirect_to:c,verification_type:u}=l,f=Bx(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:a,email_otp:r,hashed_token:i,redirect_to:c,verification_type:u},p=Object.assign({},f);return{data:{properties:m,user:p},error:null}}function Xx(l){return l}function Qx(l){return l.access_token&&l.refresh_token&&l.expires_in}const Jc=["global","local","others"];var Kx=function(l,a){var r={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&a.indexOf(i)<0&&(r[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(l);c<i.length;c++)a.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(l,i[c])&&(r[i[c]]=l[i[c]]);return r};class Px{constructor({url:a="",headers:r={},fetch:i}){this.url=a,this.headers=r,this.fetch=Pm(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(a,r=Jc[0]){if(Jc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jc.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}}async inviteUserByEmail(a,r={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Hn})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async generateLink(a){try{const{options:r}=a,i=Kx(a,["options"]),c=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(c.new_email=i?.newEmail,delete c.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Vx,redirectTo:r?.redirectTo})}catch(r){if(ue(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(a){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:Hn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async listUsers(a){var r,i,c,u,f,m,p;try{const g={nextPage:null,lastPage:0,total:0},y=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(u=(c=a?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:Xx});if(y.error)throw y.error;const x=await y.json(),w=(f=y.headers.get("x-total-count"))!==null&&f!==void 0?f:0,E=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return E.length>0&&(E.forEach(T=>{const B=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),z=JSON.parse(T.split(";")[1].split("=")[1]);g[`${z}Page`]=B}),g.total=parseInt(w)),{data:Object.assign(Object.assign({},x),g),error:null}}catch(g){if(ue(g))return{data:{users:[]},error:g};throw g}}async getUserById(a){is(a);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:Hn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async updateUserById(a,r){is(a);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:r,headers:this.headers,xform:Hn})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async deleteUser(a,r=!1){is(a);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:r},xform:Hn})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async _listFactors(a){is(a.userId);try{const{data:r,error:i}=await pe(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:i}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _deleteFactor(a){is(a.userId),is(a.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}}function lm(l={}){return{getItem:a=>l[a]||null,setItem:(a,r)=>{l[a]=r},removeItem:a=>{delete l[a]}}}function Jx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ls={debug:!!(globalThis&&Km()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jm extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class Zx extends Jm{}async function Wx(l,a,r){ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,a);const i=new globalThis.AbortController;return a>0&&setTimeout(()=>{i.abort(),ls.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,c.name);try{return await r()}finally{ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,c.name)}}else{if(a===0)throw ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Zx(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(ls.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Jx();const Ix={url:ox,storageKey:cx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ux,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function om(l,a,r){return await r()}const os={};class Rr{constructor(a){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Rr.nextInstanceID,Rr.nextInstanceID+=1,this.instanceID>0&&Dt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},Ix),a);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Px({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Pm(c.fetch),this.lock=c.lock||om,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:Dt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Wx:this.lock=om,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Km()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lm(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=lm(this.memoryStorage)),Dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var a,r;return(r=(a=os[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(a){os[this.storageKey]=Object.assign(Object.assign({},os[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,r;return(r=(a=os[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){os[this.storageKey]=Object.assign(Object.assign({},os[this.storageKey]),{cachedAt:a})}_debug(...a){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ym}) ${new Date().toISOString()}`,...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{const r=Ex(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),Dt()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:u}=await this._getSessionFromURL(r,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),px(u)){const p=(a=u.details)===null||a===void 0?void 0:a.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:f,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ue(r)?{error:r}:{error:new Xm("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var r,i,c;try{const u=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=a?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=a?.options)===null||c===void 0?void 0:c.captchaToken}},xform:un}),{data:f,error:m}=u;if(m||!f)return{data:{user:null,session:null},error:m};const p=f.session,g=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(u){if(ue(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(a){var r,i,c;try{let u;if("email"in a){const{email:y,password:x,options:w}=a;let E=null,T=null;this.flowType==="pkce"&&([E,T]=await rs(this.storage,this.storageKey)),u=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:y,password:x,data:(r=w?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:E,code_challenge_method:T},xform:un})}else if("phone"in a){const{phone:y,password:x,options:w}=a;u=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(i=w?.data)!==null&&i!==void 0?i:{},channel:(c=w?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:un})}else throw new al("You must provide either an email or phone number and a password");const{data:f,error:m}=u;if(m||!f)return{data:{user:null,session:null},error:m};const p=f.session,g=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(u){if(ue(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(a){try{let r;if("email"in a){const{email:u,password:f,options:m}=a;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:im})}else if("phone"in a){const{phone:u,password:f,options:m}=a;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:im})}else throw new al("You must provide either an email or phone number and a password");const{data:i,error:c}=r;return c?{data:{user:null,session:null},error:c}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new nl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(a){var r,i,c,u;return await this._handleProviderSignIn(a.provider,{redirectTo:(r=a.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=a.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=a.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=a.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:r}=a;if(r==="solana")return await this.signInWithSolana(a);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(a){var r,i,c,u,f,m,p,g,y,x,w,E;let T,B;if("message"in a)T=a.message,B=a.signature;else{const{chain:z,wallet:q,statement:$,options:U}=a;let D;if(Dt())if(typeof q=="object")D=q;else{const Q=window;if("solana"in Q&&typeof Q.solana=="object"&&("signIn"in Q.solana&&typeof Q.solana.signIn=="function"||"signMessage"in Q.solana&&typeof Q.solana.signMessage=="function"))D=Q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=q}const R=new URL((r=U?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in D&&D.signIn){const Q=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U?.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),$?{statement:$}:null));let L;if(Array.isArray(Q)&&Q[0]&&typeof Q[0]=="object")L=Q[0];else if(Q&&typeof Q=="object"&&"signedMessage"in Q&&"signature"in Q)L=Q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)T=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),B=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${R.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(c=(i=U?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=U?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((f=U?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((m=U?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((p=U?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((g=U?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((x=(y=U?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...U.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const Q=await D.signMessage(new TextEncoder().encode(T),"utf8");if(!Q||!(Q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");B=Q}}try{const{data:z,error:q}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:Sx(B)},!((w=a.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(E=a.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:un});if(q)throw q;return!z||!z.session||!z.user?{data:{user:null,session:null},error:new nl}:(z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),{data:Object.assign({},z),error:q})}catch(z){if(ue(z))return{data:{user:null,session:null},error:z};throw z}}async _exchangeCodeForSession(a){const r=await ua(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(r??"").split("/");try{const{data:u,error:f}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:i},xform:un});if(await Bn(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new nl}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:f})}catch(u){if(ue(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(a){try{const{options:r,provider:i,token:c,access_token:u,nonce:f}=a,m=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:u,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:un}),{data:p,error:g}=m;return g?{data:{user:null,session:null},error:g}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new nl}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:g})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(a){var r,i,c,u,f;try{if("email"in a){const{email:m,options:p}=a;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await rs(this.storage,this.storageKey));const{error:x}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(i=p?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in a){const{phone:m,options:p}=a,{data:g,error:y}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=p?.data)!==null&&c!==void 0?c:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(f=p?.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:y}}throw new al("You must provide either an email or phone number.")}catch(m){if(ue(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(a){var r,i;try{let c,u;"options"in a&&(c=(r=a.options)===null||r===void 0?void 0:r.redirectTo,u=(i=a.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:m}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:un});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,g=f.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(c){if(ue(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(a){var r,i,c;try{let u=null,f=null;return this.flowType==="pkce"&&([u,f]=await rs(this.storage,this.storageKey)),await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(i=(r=a.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=a?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:Yx})}catch(u){if(ue(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:r},error:i}=a;if(i)throw i;if(!r)throw new $n;const{error:c}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:c}})}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async resend(a){try{const r=`${this.url}/resend`;if("email"in a){const{email:i,type:c,options:u}=a,{error:f}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in a){const{phone:i,type:c,options:u}=a,{data:f,error:m}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:f?.message_id},error:m}}throw new al("You must provide either an email or phone number and a type")}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(a,r){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await a(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const r=await ua(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?a=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const i=a.expires_at?a.expires_at*1e3-Date.now()<Xc:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",a.expires_at),!i){if(this.userStorage){const f=await ua(this.userStorage,this.storageKey+"-user");f?.user?a.user=f.user:a.user=Pc()}if(this.storage.isServer&&a.user){let f=this.suppressGetSessionWarning;a=new Proxy(a,{get:(p,g,y)=>(!f&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,g,y))})}return{data:{session:a},error:null}}const{session:c,error:u}=await this._callRefreshToken(a.refresh_token);return u?{data:{session:null},error:u}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{return a?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:Hn}):await this._useSession(async r=>{var i,c,u;const{data:f,error:m}=r;if(m)throw m;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $n}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:Hn})})}catch(r){if(ue(r))return gx(r)&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(a,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,r))}async _updateUser(a,r={}){try{return await this._useSession(async i=>{const{data:c,error:u}=i;if(u)throw u;if(!c.session)throw new $n;const f=c.session;let m=null,p=null;this.flowType==="pkce"&&a.email!=null&&([m,p]=await rs(this.storage,this.storageKey));const{data:g,error:y}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:m,code_challenge_method:p}),jwt:f.access_token,xform:Hn});if(y)throw y;return f.user=g.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new $n;const r=Date.now()/1e3;let i=r,c=!0,u=null;const{payload:f}=Kc(a.access_token);if(f.exp&&(i=f.exp,c=i<=r),c){const{session:m,error:p}=await this._callRefreshToken(a.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:p}=await this._getUser(a.access_token);if(p)throw p;u={access_token:a.access_token,refresh_token:a.refresh_token,user:m.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(r){if(ue(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async r=>{var i;if(!a){const{data:f,error:m}=r;if(m)throw m;a=(i=f.session)!==null&&i!==void 0?i:void 0}if(!a?.refresh_token)throw new $n;const{session:c,error:u}=await this._callRefreshToken(a.refresh_token);return u?{data:{user:null,session:null},error:u}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(a,r){try{if(!Dt())throw new sl("No browser detected.");if(a.error||a.error_description||a.error_code)throw new sl(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new F0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new F0("No code detected.");const{data:$,error:U}=await this._exchangeCodeForSession(a.code);if(U)throw U;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:u,refresh_token:f,expires_in:m,expires_at:p,token_type:g}=a;if(!u||!m||!f||!g)throw new sl("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(m);let w=y+x;p&&(w=parseInt(p));const E=w-y;E*1e3<=us&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${x}s`);const T=w-x;y-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,w,y):y-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,w,y);const{data:B,error:z}=await this._getUser(u);if(z)throw z;const q={provider_token:i,provider_refresh_token:c,access_token:u,expires_in:x,expires_at:w,refresh_token:f,token_type:g,user:B.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:q,redirectType:a.type},error:null}}catch(i){if(ue(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){const r=await ua(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&r)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:c,error:u}=r;if(u)return{error:u};const f=(i=c.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:m}=await this.admin.signOut(f,a);if(m&&!(mx(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return a!=="others"&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(a){const r=kx(),i={id:r,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(a){return await this._useSession(async r=>{var i,c;try{const{data:{session:u},error:f}=r;if(f)throw f;await((i=this.stateChangeEmitters.get(a))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",a,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(a))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",u),console.error(u)}})}async resetPasswordForEmail(a,r={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await rs(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(u){if(ue(u))return{data:null,error:u};throw u}}async getUserIdentities(){var a;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(a=r.user.identities)!==null&&a!==void 0?a:[]},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async linkIdentity(a){var r;try{const{data:i,error:c}=await this._useSession(async u=>{var f,m,p,g,y;const{data:x,error:w}=u;if(w)throw w;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=a.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=a.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",E,{headers:this.headers,jwt:(y=(g=x.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(c)throw c;return Dt()&&!(!((r=a.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:a.provider,url:i?.url},error:null}}catch(i){if(ue(i))return{data:{provider:a.provider,url:null},error:i};throw i}}async unlinkIdentity(a){try{return await this._useSession(async r=>{var i,c;const{data:u,error:f}=r;if(f)throw f;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(c=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _refreshAccessToken(a){const r=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await zx(async c=>(c>0&&await Tx(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:un})),(c,u)=>{const f=200*Math.pow(2,c);return u&&Qc(u)&&Date.now()+f-i<us})}catch(i){if(this._debug(r,"error",i),ue(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",r,"url",i),Dt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:a,url:i},error:null}}async _recoverAndRefresh(){var a,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await ua(this.storage,this.storageKey);if(c&&this.userStorage){let f=await ua(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await ds(this.userStorage,this.storageKey+"-user",f)),c.user=(a=f?.user)!==null&&a!==void 0?a:Pc()}else if(c&&!c.user&&!c.user){const f=await ua(this.storage,this.storageKey+"-user");f&&f?.user?(c.user=f.user,await Bn(this.storage,this.storageKey+"-user"),await ds(this.storage,this.storageKey,c)):c.user=Pc()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const u=((r=c.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Xc;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${Xc}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),Qc(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(c.access_token);!m&&f?.user?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(a){var r,i;if(!a)throw new $n;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new yl;const{data:u,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!u.session)throw new $n;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={session:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(c,"error",u),ue(u)){const f={session:null,error:u};return Qc(u)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(a,r,i=!0){const c=`#_notifyAllSubscribers(${a})`;this._debug(c,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:a,session:r});const u=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(a,r)}catch(p){u.push(p)}});if(await Promise.all(f),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;const r=Object.assign({},a),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await ds(this.userStorage,this.storageKey+"-user",{user:r.user});const c=Object.assign({},r);delete c.user;const u=sm(c);await ds(this.storage,this.storageKey,u)}else{const c=sm(r);await ds(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await Bn(this.storage,this.storageKey),await Bn(this.storage,this.storageKey+"-code-verifier"),await Bn(this.storage,this.storageKey+"-user"),this.userStorage&&await Bn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&Dt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),us);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-a)/us);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${us}ms, refresh threshold is ${ou} ticks`),c<=ou&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof Jm)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const r=`#_onVisibilityChanged(${a})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,r,i){const c=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,f]=await rs(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(m.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);c.push(u.toString())}return i?.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${a}?${c.join("&")}`}async _unenroll(a){try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;return u?{data:null,error:u}:await pe(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _enroll(a){try{return await this._useSession(async r=>{var i,c;const{data:u,error:f}=r;if(f)return{data:null,error:f};const m=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:{issuer:a.issuer}),{data:p,error:g}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return g?{data:null,error:g}:(a.factorType==="totp"&&(!((c=p?.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;if(u)return{data:null,error:u};const{data:f,error:m}=await pe(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:{code:a.code,challenge_id:a.challengeId},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:m})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;return u?{data:null,error:u}:await pe(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:{channel:a.channel},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(a){const{data:r,error:i}=await this._challenge({factorId:a.factorId});return i?{data:null,error:i}:await this._verify({factorId:a.factorId,challengeId:r.id,code:a.code})}async _listFactors(){const{data:{user:a},error:r}=await this.getUser();if(r)return{data:null,error:r};const i=a?.factors||[],c=i.filter(f=>f.factor_type==="totp"&&f.status==="verified"),u=i.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:i,totp:c,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async a=>{var r,i;const{data:{session:c},error:u}=a;if(u)return{data:null,error:u};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Kc(c.access_token);let m=null;f.aal&&(m=f.aal);let p=m;((i=(r=c.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const y=f.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(a,r={keys:[]}){let i=r.keys.find(m=>m.kid===a);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(m=>m.kid===a),i&&this.jwks_cached_at+fx>c)return i;const{data:u,error:f}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,i=u.keys.find(m=>m.kid===a),!i)?null:i}async getClaims(a,r={}){try{let i=a;if(!i){const{data:E,error:T}=await this.getSession();if(T||!E.session)return{data:null,error:T};i=E.session.access_token}const{header:c,payload:u,signature:f,raw:{header:m,payload:p}}=Kc(i);r?.allowExpired||Ux(u.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!g){const{error:E}=await this.getUser(i);if(E)throw E;return{data:{claims:u,header:c,signature:f},error:null}}const y=Lx(c.alg),x=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,x,f,wx(`${m}.${p}`)))throw new du("Invalid JWT signature");return{data:{claims:u,header:c,signature:f},error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}}}Rr.nextInstanceID=0;const Fx=Rr;class e_ extends Fx{constructor(a){super(a)}}var t_=function(l,a,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(y){try{g(i.next(y))}catch(x){f(x)}}function p(y){try{g(i.throw(y))}catch(x){f(x)}}function g(y){y.done?u(y.value):c(y.value).then(m,p)}g((i=i.apply(l,a||[])).next())})};class n_{constructor(a,r,i){var c,u,f;if(this.supabaseUrl=a,this.supabaseKey=r,!a)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const m=ix(a),p=new URL(m);this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const g=`sb-${p.hostname.split(".")[0]}-auth-token`,y={db:Ib,realtime:ex,auth:Object.assign(Object.assign({},Fb),{storageKey:g}),global:Wb},x=lx(i??{},y);this.storageKey=(c=x.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(w,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=x.auth)!==null&&f!==void 0?f:{},this.headers,x.global.fetch),this.fetch=sx(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new yb(new URL("rest/v1",p).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new Pb(this.storageUrl.href,this.headers,this.fetch,i?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new ob(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,r={},i={}){return this.rest.rpc(a,r,i)}channel(a,r={config:{}}){return this.realtime.channel(a,r)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var a,r;return t_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:r,detectSessionInUrl:i,storage:c,storageKey:u,flowType:f,lock:m,debug:p},g,y){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new e_({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),g),storageKey:u,autoRefreshToken:a,persistSession:r,detectSessionInUrl:i,storage:c,flowType:f,lock:m,debug:p,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(a){return new Db(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i?.access_token)})}_handleTokenChanged(a,r,i){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:a==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const a_=(l,a,r)=>new n_(l,a,r);function s_(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const a=l.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}s_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const r_="https://czibbjsjjkyelhomalwy.supabase.co",i_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6aWJianNqamt5ZWxob21hbHd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc1NzAwODIsImV4cCI6MjA3MzE0NjA4Mn0.UZgscutBl1COx7dllGstTEsP4ja3Xr45XyxscGxnzwY",J=a_(r_,i_,{realtime:{params:{eventsPerSecond:1e3},timeout:45e3,heartbeatIntervalMs:15e3},db:{schema:"public"},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});class wr{static REDIRECT_URL=`${window.location.origin}/auth/callback`;static async signInWithGoogle(){try{console.log(" Initiating Google OAuth sign-in...");const{error:a}=await J.auth.signInWithOAuth({provider:"google",options:{redirectTo:this.REDIRECT_URL,queryParams:{access_type:"offline",prompt:"consent"},scopes:"email profile"}});return a?(console.error(" Google OAuth initiation failed:",a),{success:!1,error:a.message}):(console.log(" Google OAuth initiated successfully"),{success:!0,message:"Redirecting to Google..."})}catch(a){return console.error(" Unexpected error during Google OAuth:",a),{success:!1,error:a.message||"Failed to initiate Google sign-in"}}}static async signUpWithGoogle(){return this.signInWithGoogle()}static async handleGoogleCallback(){try{console.log(" Processing Google OAuth callback...");const{data:a,error:r}=await J.auth.getSession();if(r)return console.error(" Failed to get session from callback:",r),{success:!1,error:`Session error: ${r.message}`};if(!a.session)return console.warn(" No session found in callback"),{success:!1,error:"No authentication session found. Please try signing in again."};const{user:i}=a.session;if(!i)return{success:!1,error:"No user data received from Google. Please try again."};console.log(" Google OAuth session established:",i.email),console.log(" Supabase user data:",{id:i.id,email:i.email,metadata:i.user_metadata});const c=await this.createOrUpdateUser(i);return c.success?(console.log(" User successfully processed:",c.data?.username),{success:!0,data:c.data,message:"Successfully authenticated with Google"}):(console.error(" User creation/update failed:",c.error),c)}catch(a){return console.error(" Error processing Google callback:",a),{success:!1,error:`Callback processing failed: ${a.message||a}`}}}static async createOrUpdateUser(a){try{const r=a.email,i=a.user_metadata?.full_name||a.user_metadata?.name||r?.split("@")[0]||"GoogleUser";console.log(" Attempting to create/update user:",{id:a.id,email:r,name:i});const{data:c,error:u}=await J.from("users_v2").select("*").eq("id",a.id).maybeSingle();if(u)return console.error(" Error checking existing user:",u),{success:!1,error:`Database check failed: ${u.message}`};let f;if(c){console.log(" Updating existing user:",c.email);const{data:m,error:p}=await J.from("users_v2").update({email:r,display_name:i,last_active:new Date().toISOString(),is_online:!0}).eq("id",a.id).select().single();if(p)return console.error(" Failed to update user:",p),{success:!1,error:`User update failed: ${p.message}`};f=m}else{console.log(" Creating new user for Google OAuth:",r);const m=await this.generateUniqueUsername(i);console.log(" Generated username:",m);const p={id:a.id,email:r,username:m,display_name:i,role:"normal",theme:"light",is_online:!0,last_active:new Date().toISOString(),created_at:new Date().toISOString()};console.log(" Inserting user data:",p);let g=await J.from("users_v2").insert([p]).select().single();if(g.error){console.log(" Direct insert failed, trying RPC function...");const{error:y}=await J.rpc("create_oauth_user",{user_id:a.id,user_email:r,user_username:m,user_display_name:i,user_role:"normal"});if(y)console.log(" RPC also failed, trying service role..."),g=await J.from("users_v2").upsert(p,{onConflict:"id",ignoreDuplicates:!1}).select().single();else{const{data:x,error:w}=await J.from("users_v2").select("*").eq("id",a.id).single();if(w)return{success:!1,error:`User created but fetch failed: ${w.message}`};f=x}}if(g.error)return console.error(" All user creation methods failed:",g.error),g.error.code==="42501"?{success:!1,error:"Database permission error. Please contact administrator."}:{success:!1,error:`User creation failed: ${g.error.message} (Code: ${g.error.code})`};f||(f=g.data)}return f?(console.log(" User processed successfully:",f.username),{success:!0,data:f}):{success:!1,error:"Failed to create or retrieve user data"}}catch(r){return console.error(" Error creating/updating user:",r),{success:!1,error:`User processing failed: ${r.message||r}`}}}static async generateUniqueUsername(a){try{let r=a.toLowerCase().replace(/[^a-z0-9]/g,"").substring(0,20);r||(r="googleuser");const{data:i}=await J.from("users_v2").select("username").eq("username",r).single();if(!i)return r;for(let c=1;c<=999;c++){const u=`${r}${c}`,{data:f}=await J.from("users_v2").select("username").eq("username",u).single();if(!f)return u}return`googleuser${Date.now()}`}catch(r){return console.error(" Error generating username:",r),`googleuser${Date.now()}`}}static async signOut(){try{console.log(" Signing out Google user...");const{error:a}=await J.auth.signOut();return a?(console.error(" Sign out failed:",a),{success:!1,error:a.message}):(console.log(" Successfully signed out"),{success:!0,message:"Successfully signed out"})}catch(a){return console.error(" Error during sign out:",a),{success:!1,error:a.message||"Failed to sign out"}}}static async getCurrentUser(){try{const{data:a,error:r}=await J.auth.getSession();if(r)return console.error(" Failed to get session:",r),{success:!1,error:r.message};if(!a.session)return{success:!0,data:null,message:"No active session"};const{user:i}=a.session,{data:c,error:u}=await J.from("users_v2").select("*").eq("id",i.id).single();return u?(console.error(" Failed to get user data:",u),{success:!1,error:u.message}):{success:!0,data:c}}catch(a){return console.error(" Error getting current user:",a),{success:!1,error:a.message||"Failed to get current user"}}}static async isAuthenticated(){try{const{data:a}=await J.auth.getSession();return!!a.session}catch(a){return console.error(" Error checking authentication:",a),!1}}static async refreshSession(){try{const{error:a}=await J.auth.refreshSession();return a?{success:!1,error:a.message}:{success:!0,message:"Session refreshed successfully"}}catch(a){return console.error(" Error refreshing session:",a),{success:!1,error:a.message||"Failed to refresh session"}}}}const Zm=S.createContext(void 0),wt=()=>{const l=S.useContext(Zm);if(l===void 0)throw new Error("useAuth must be used within an AuthProvider");return l},l_=()=>`guest_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,cm=async()=>{try{const{data:l,error:a}=await J.rpc("generate_reddit_style_username");if(a)throw a;return l||`Guest${Date.now()}`}catch(l){return console.error("Error generating username:",l),`Guest${Date.now()}`}},o_=({children:l})=>{const[a,r]=S.useState(null),[i,c]=S.useState(!1),u=a?.role==="guest",f=a?.role==="normal",m=a?.role==="admin",p=a?.role==="operator";S.useEffect(()=>{(async()=>{try{const{data:F}=await J.auth.getSession();if(F.session){const oe=await wr.getCurrentUser();if(oe.success&&oe.data){r(oe.data),c(!0),localStorage.setItem("openchat_user",JSON.stringify(oe.data)),localStorage.removeItem("openchat_guest_session");return}}}catch(F){console.error("Error checking session:",F)}const V=localStorage.getItem("openchat_user"),Z=localStorage.getItem("openchat_guest_session");if(V)try{const F=JSON.parse(V);r(F),c(!0)}catch(F){console.error("Error parsing saved user:",F),localStorage.removeItem("openchat_user")}else if(Z)try{const F=JSON.parse(Z);new Date(F.expires_at)>new Date?g(F):localStorage.removeItem("openchat_guest_session")}catch(F){console.error("Error parsing guest session:",F),localStorage.removeItem("openchat_guest_session")}})();const{data:{subscription:P}}=J.auth.onAuthStateChange(async(V,Z)=>{if(console.log("Auth state changed:",V,Z?.user?.email),V==="SIGNED_IN"&&Z){if(!window.location.pathname.includes("/auth/callback")){const F=await wr.getCurrentUser();F.success&&F.data&&(r(F.data),c(!0),localStorage.setItem("openchat_user",JSON.stringify(F.data)),localStorage.removeItem("openchat_guest_session"))}}else V==="SIGNED_OUT"&&(r(null),c(!1),localStorage.removeItem("openchat_user"))});return()=>{P.unsubscribe()}},[]),S.useEffect(()=>{if(!i||!a)return;const L=async()=>{try{await J.from("users_v2").update({last_active:new Date().toISOString(),is_online:!0}).eq("id",a.id)}catch(Z){console.error("Failed to update last_active:",Z)}};L();const P=setInterval(L,3e4),V=async()=>{try{await J.from("users_v2").update({is_online:!1}).eq("id",a.id)}catch(Z){console.error("Failed to update offline status:",Z)}};return window.addEventListener("beforeunload",V),()=>{clearInterval(P),window.removeEventListener("beforeunload",V),a&&(async()=>{try{await J.from("users_v2").update({is_online:!1}).eq("id",a.id)}catch(Z){console.error("Failed to update offline status:",Z)}})()}},[i,a]);const g=async L=>{try{const{data:P,error:V}=await J.from("users_v2").select("*").eq("session_token",L.session_token).eq("role","guest").single();P&&!V?(r(P),c(!0)):localStorage.removeItem("openchat_guest_session")}catch(P){console.error("Error restoring guest session:",P),localStorage.removeItem("openchat_guest_session")}},Q={user:a,isAuthenticated:i,isGuest:u,isNormal:f,isAdmin:m,isOperator:p,loginWithEmail:async L=>{try{const{data:P,error:V}=await J.auth.signInWithPassword({email:L.email,password:L.password});if(V)return{success:!1,error:V.message};if(!P.user)return{success:!1,error:"Login failed"};const{data:Z,error:F}=await J.from("users_v2").select("*").eq("id",P.user.id).single();if(F)return{success:!1,error:F.message};const{data:oe,error:Re}=await J.from("users_v2").update({last_active:new Date().toISOString(),is_online:!0}).eq("id",Z.id).select().single();Re&&console.error("Error updating last active:",Re);const Ne=oe||Z;return r(Ne),c(!0),localStorage.setItem("openchat_user",JSON.stringify(Ne)),localStorage.removeItem("openchat_guest_session"),{success:!0,data:Ne,message:"Login successful"}}catch(P){return console.error("Login error:",P),{success:!1,error:P.message||"Login failed"}}},loginAsGuest:async()=>{try{const L=l_(),P=await cm(),V=new Date(Date.now()+1440*60*1e3),{data:Z,error:F}=await J.from("users_v2").insert({username:P,role:"guest",theme:"light",session_token:L,is_online:!0}).select().single();if(F)return{success:!1,error:F.message};const oe={session_token:L,username:P,expires_at:V.toISOString()};return r(Z),c(!0),localStorage.setItem("openchat_guest_session",JSON.stringify(oe)),localStorage.removeItem("openchat_user"),{success:!0,data:oe,message:"Guest session created"}}catch(L){return console.error("Guest login error:",L),{success:!1,error:L.message||"Guest login failed"}}},logout:async()=>{try{a&&await J.from("users_v2").update({is_online:!1}).eq("id",a.id),u||await J.auth.signOut(),u&&a&&await J.from("users_v2").delete().eq("id",a.id)}catch(L){console.error("Logout error:",L)}finally{r(null),c(!1),localStorage.removeItem("openchat_user"),localStorage.removeItem("openchat_guest_session")}},signInWithGoogle:async()=>wr.signInWithGoogle(),signUpWithGoogle:async()=>wr.signUpWithGoogle(),handleGoogleCallback:async()=>{try{const L=await wr.handleGoogleCallback();return L.success&&L.data&&(r(L.data),c(!0),localStorage.setItem("openchat_user",JSON.stringify(L.data)),localStorage.removeItem("openchat_guest_session")),L}catch(L){return console.error("Error in Google callback handler:",L),{success:!1,error:L.message||"Failed to handle Google callback"}}},updateUser:async L=>{if(!a)return{success:!1,error:"No user logged in"};try{const{data:P,error:V}=await J.from("users_v2").update(L).eq("id",a.id).select().single();if(V)return{success:!1,error:V.message};if(r(P),u){const Z=localStorage.getItem("openchat_guest_session");if(Z){const F=JSON.parse(Z);F.username=P.username,localStorage.setItem("openchat_guest_session",JSON.stringify(F))}}else localStorage.setItem("openchat_user",JSON.stringify(P));return{success:!0,data:P,message:"User updated successfully"}}catch(P){return console.error("Update user error:",P),{success:!1,error:P.message||"Update failed"}}},registerUser:async(L,P,V)=>{try{const Z=await cm(),{data:F,error:oe}=await J.auth.signUp({email:L,password:P});if(oe)return{success:!1,error:oe.message};if(!F.user)return{success:!1,error:"Registration failed"};const{data:Re,error:Ne}=await J.from("users_v2").insert({id:F.user.id,email:L,username:Z,role:"normal",display_name:V,theme:"light"}).select().single();return Ne?{success:!1,error:Ne.message}:(r(Re),c(!0),localStorage.setItem("openchat_user",JSON.stringify(Re)),localStorage.removeItem("openchat_guest_session"),{success:!0,data:Re,message:"Registration successful"})}catch(Z){return console.error("Registration error:",Z),{success:!1,error:Z.message||"Registration failed"}}},hasRole:L=>a?.role===L,canAccessGroups:()=>a?.role!=="guest",canCreateGroups:()=>a?.role==="normal"||a?.role==="admin"||a?.role==="operator",canManageUsers:()=>a?.role==="admin"||a?.role==="operator"};return h.jsx(Zm.Provider,{value:Q,children:l})},c_=S.createContext(void 0),u_=({children:l})=>{const[a,r]=S.useState(()=>{const u=localStorage.getItem("chat_theme");return u==="dark"||u==="light"?u:"light"});S.useEffect(()=>{document.documentElement.classList.toggle("dark",a==="dark"),localStorage.setItem("chat_theme",a)},[a]);const i=u=>r(u),c=()=>r(u=>u==="light"?"dark":"light");return h.jsx(c_.Provider,{value:{theme:a,toggleTheme:c,setTheme:i},children:l})};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),f_=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,r,i)=>i?i.toUpperCase():r.toLowerCase()),um=l=>{const a=f_(l);return a.charAt(0).toUpperCase()+a.slice(1)},Wm=(...l)=>l.filter((a,r,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===r).join(" ").trim(),h_=l=>{for(const a in l)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=S.forwardRef(({color:l="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:f,...m},p)=>S.createElement("svg",{ref:p,...m_,width:a,height:a,stroke:l,strokeWidth:i?Number(r)*24/Number(a):r,className:Wm("lucide",c),...!u&&!h_(m)&&{"aria-hidden":"true"},...m},[...f.map(([g,y])=>S.createElement(g,y)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(l,a)=>{const r=S.forwardRef(({className:i,...c},u)=>S.createElement(g_,{ref:u,iconNode:a,className:Wm(`lucide-${d_(um(l))}`,`lucide-${l}`,i),...c}));return r.displayName=um(l),r};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],fu=ve("bell",p_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],y_=ve("chart-column",v_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Im=ve("check",b_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],__=ve("chevron-left",x_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Fm=ve("circle-alert",w_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],j_=ve("circle-check-big",S_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],E_=ve("circle-x",k_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gs=ve("clock",N_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Zc=ve("coffee",T_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ps=ve("crown",z_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],O_=ve("database",A_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],C_=ve("info",R_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],D_=ve("key",M_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],L_=ve("loader-circle",U_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],B_=ve("lock",q_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],H_=ve("log-out",$_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Y_=ve("mail",G_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],X_=ve("megaphone",V_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],K_=ve("menu",Q_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ul=ve("message-circle",P_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Z_=ve("moon",J_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],I_=ve("palette",W_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],e1=ve("pen",F_);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],fs=ve("pin",t1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],a1=ve("plus",n1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],r1=ve("save",s1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],eg=ve("send",i1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zr=ve("settings",l1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],c1=ve("shield",o1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],d1=ve("sun",u1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],h1=ve("timer",f1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],dl=ve("trash-2",m1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],dm=ve("user-plus",g1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ar=ve("user",p1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Cr=ve("users",v1);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Nu=ve("x",y1),b1=()=>{const[l,a]=S.useState("guest"),[r,i]=S.useState({email:"",password:""}),[c,u]=S.useState(""),[f,m]=S.useState(!1),[p,g]=S.useState(""),[y,x]=S.useState(""),{loginWithEmail:w,loginAsGuest:E,registerUser:T,signInWithGoogle:B,signUpWithGoogle:z}=wt(),q=async U=>{U.preventDefault(),m(!0),g(""),x("");try{let D;switch(l){case"guest":D=await E();break;case"login":D=await w(r);break;case"register":D=await T(r.email,r.password,c);break}D.success?x(D.message||"Success!"):g(D.error||"An error occurred")}catch(D){g(D.message||"An unexpected error occurred")}finally{m(!1)}},$=U=>{a(U),g(""),x(""),i({email:"",password:""}),u("")};return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-blue-50 dark:from-zinc-900 dark:via-zinc-800 dark:to-zinc-900 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-md w-full space-y-8",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"flex justify-center",children:h.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg",children:h.jsx(ul,{className:"w-8 h-8 text-white"})})}),h.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-zinc-900 dark:text-white",children:"Welcome to OpenChat"}),h.jsx("p",{className:"mt-2 text-sm text-zinc-600 dark:text-zinc-400",children:"Choose how you'd like to join the conversation"})]}),h.jsxs("div",{className:"flex space-x-1 bg-zinc-100 dark:bg-zinc-800 p-1 rounded-lg",children:[h.jsxs("button",{onClick:()=>$("guest"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-all duration-200 ${l==="guest"?"bg-white dark:bg-zinc-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-200"}`,children:[h.jsx(Zc,{className:"w-4 h-4 inline mr-1"}),"Guest"]}),h.jsxs("button",{onClick:()=>$("login"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-all duration-200 ${l==="login"?"bg-white dark:bg-zinc-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-200"}`,children:[h.jsx(Ar,{className:"w-4 h-4 inline mr-1"}),"Sign In"]}),h.jsxs("button",{onClick:()=>$("register"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-all duration-200 ${l==="register"?"bg-white dark:bg-zinc-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-200"}`,children:[h.jsx(dm,{className:"w-4 h-4 inline mr-1"}),"Sign Up"]})]}),(l==="login"||l==="register")&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-zinc-300 dark:border-zinc-600"})}),h.jsx("div",{className:"relative flex justify-center text-sm",children:h.jsx("span",{className:"px-2 bg-white dark:bg-zinc-900 text-zinc-500 dark:text-zinc-400",children:"Or continue with"})})]}),h.jsxs("button",{type:"button",onClick:async()=>{m(!0),g("");try{const U=l==="register"?await z():await B();U.success||g(U.error||"Google authentication failed")}catch(U){g(U.message||"Failed to authenticate with Google")}finally{m(!1)}},disabled:f,className:"w-full flex justify-center items-center px-4 py-3 border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:[h.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",fill:"currentColor",children:[h.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),f?"Connecting...":`${l==="register"?"Sign up":"Sign in"} with Google`]})]}),h.jsxs("form",{className:"mt-8 space-y-6",onSubmit:q,children:[h.jsxs("div",{className:"space-y-4",children:[l==="guest"&&h.jsxs("div",{className:"text-center p-6 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[h.jsx(Zc,{className:"w-12 h-12 text-green-600 dark:text-green-400 mx-auto mb-3"}),h.jsx("h3",{className:"text-lg font-medium text-green-900 dark:text-green-100 mb-2",children:"Join as Guest"}),h.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mb-4",children:"Quick access to Direct Chat. No registration required. Your session will last 24 hours."}),h.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 space-y-1",children:[h.jsx("div",{children:" Instant access to Direct Chat"}),h.jsx("div",{children:" Auto-generated username"}),h.jsx("div",{children:" Cannot create or join groups"}),h.jsx("div",{children:" Session expires in 24 hours"})]})]}),(l==="login"||l==="register")&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Email Address"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Y_,{className:"h-5 w-5 text-zinc-400"})}),h.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:r.email,onChange:U=>i({...r,email:U.target.value}),className:"block w-full pl-10 pr-3 py-3 border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white placeholder-zinc-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors",placeholder:"Enter your email"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(B_,{className:"h-5 w-5 text-zinc-400"})}),h.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:r.password,onChange:U=>i({...r,password:U.target.value}),className:"block w-full pl-10 pr-3 py-3 border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white placeholder-zinc-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors",placeholder:"Enter your password"})]})]}),l==="register"&&h.jsxs("div",{children:[h.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Display Name (Optional)"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Ar,{className:"h-5 w-5 text-zinc-400"})}),h.jsx("input",{id:"displayName",name:"displayName",type:"text",value:c,onChange:U=>u(U.target.value),className:"block w-full pl-10 pr-3 py-3 border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white placeholder-zinc-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors",placeholder:"Your display name"})]})]})]})]}),p&&h.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:h.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:p})}),y&&h.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:h.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:y})}),h.jsx("button",{type:"submit",disabled:f,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"}),l==="guest"?"Creating Session...":l==="login"?"Signing In...":"Creating Account..."]}):h.jsxs(h.Fragment,{children:[l==="guest"&&h.jsxs(h.Fragment,{children:[h.jsx(Zc,{className:"w-5 h-5 mr-2"}),"Join as Guest"]}),l==="login"&&h.jsxs(h.Fragment,{children:[h.jsx(Ar,{className:"w-5 h-5 mr-2"}),"Sign In"]}),l==="register"&&h.jsxs(h.Fragment,{children:[h.jsx(dm,{className:"w-5 h-5 mr-2"}),"Create Account"]})]})}),h.jsxs("div",{className:"text-center space-y-2",children:[l==="login"&&h.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Don't have an account?"," ",h.jsx("button",{type:"button",onClick:()=>$("register"),className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Sign up here"})]}),l==="register"&&h.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Already have an account?"," ",h.jsx("button",{type:"button",onClick:()=>$("login"),className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Sign in here"})]}),h.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-500",children:["Need a quick chat? Try"," ",h.jsx("button",{type:"button",onClick:()=>$("guest"),className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Guest Mode"})]})]})]}),h.jsx("div",{className:"text-center",children:h.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-500",children:"OpenChat V2 - Real-time messaging with groups and roles"})})]})})},rl=43200,fm=1440,hm=Symbol.for("constructDateFrom");function Tu(l,a){return typeof l=="function"?l(a):l&&typeof l=="object"&&hm in l?l[hm](a):l instanceof Date?new l.constructor(a):new Date(a)}function Gn(l,a){return Tu(l,l)}let x1={};function _1(){return x1}function mm(l){const a=Gn(l),r=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return r.setUTCFullYear(a.getFullYear()),+l-+r}function zu(l,...a){const r=Tu.bind(null,l||a.find(i=>typeof i=="object"));return a.map(r)}function fl(l,a){const r=+Gn(l)-+Gn(a);return r<0?-1:r>0?1:r}function w1(l){return Tu(l,Date.now())}function S1(l,a,r){const[i,c]=zu(r?.in,l,a),u=i.getFullYear()-c.getFullYear(),f=i.getMonth()-c.getMonth();return u*12+f}function j1(l){return a=>{const i=(l?Math[l]:Math.trunc)(a);return i===0?0:i}}function k1(l,a){return+Gn(l)-+Gn(a)}function E1(l,a){const r=Gn(l);return r.setHours(23,59,59,999),r}function N1(l,a){const r=Gn(l),i=r.getMonth();return r.setFullYear(r.getFullYear(),i+1,0),r.setHours(23,59,59,999),r}function T1(l,a){const r=Gn(l);return+E1(r)==+N1(r)}function z1(l,a,r){const[i,c,u]=zu(r?.in,l,l,a),f=fl(c,u),m=Math.abs(S1(c,u));if(m<1)return 0;c.getMonth()===1&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-f*m);let p=fl(c,u)===-f;T1(i)&&m===1&&fl(i,u)===1&&(p=!1);const g=f*(m-+p);return g===0?0:g}function A1(l,a,r){const i=k1(l,a)/1e3;return j1(r?.roundingMethod)(i)}const O1={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},R1=(l,a,r)=>{let i;const c=O1[l];return typeof c=="string"?i=c:a===1?i=c.one:i=c.other.replace("{{count}}",a.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function Wc(l){return(a={})=>{const r=a.width?String(a.width):l.defaultWidth;return l.formats[r]||l.formats[l.defaultWidth]}}const C1={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},M1={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},D1={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},U1={date:Wc({formats:C1,defaultWidth:"full"}),time:Wc({formats:M1,defaultWidth:"full"}),dateTime:Wc({formats:D1,defaultWidth:"full"})},L1={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},q1=(l,a,r,i)=>L1[l];function Sr(l){return(a,r)=>{const i=r?.context?String(r.context):"standalone";let c;if(i==="formatting"&&l.formattingValues){const f=l.defaultFormattingWidth||l.defaultWidth,m=r?.width?String(r.width):f;c=l.formattingValues[m]||l.formattingValues[f]}else{const f=l.defaultWidth,m=r?.width?String(r.width):l.defaultWidth;c=l.values[m]||l.values[f]}const u=l.argumentCallback?l.argumentCallback(a):a;return c[u]}}const B1={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$1={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},H1={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},G1={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Y1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},V1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},X1=(l,a)=>{const r=Number(l),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Q1={ordinalNumber:X1,era:Sr({values:B1,defaultWidth:"wide"}),quarter:Sr({values:$1,defaultWidth:"wide",argumentCallback:l=>l-1}),month:Sr({values:H1,defaultWidth:"wide"}),day:Sr({values:G1,defaultWidth:"wide"}),dayPeriod:Sr({values:Y1,defaultWidth:"wide",formattingValues:V1,defaultFormattingWidth:"wide"})};function jr(l){return(a,r={})=>{const i=r.width,c=i&&l.matchPatterns[i]||l.matchPatterns[l.defaultMatchWidth],u=a.match(c);if(!u)return null;const f=u[0],m=i&&l.parsePatterns[i]||l.parsePatterns[l.defaultParseWidth],p=Array.isArray(m)?P1(m,x=>x.test(f)):K1(m,x=>x.test(f));let g;g=l.valueCallback?l.valueCallback(p):p,g=r.valueCallback?r.valueCallback(g):g;const y=a.slice(f.length);return{value:g,rest:y}}}function K1(l,a){for(const r in l)if(Object.prototype.hasOwnProperty.call(l,r)&&a(l[r]))return r}function P1(l,a){for(let r=0;r<l.length;r++)if(a(l[r]))return r}function J1(l){return(a,r={})=>{const i=a.match(l.matchPattern);if(!i)return null;const c=i[0],u=a.match(l.parsePattern);if(!u)return null;let f=l.valueCallback?l.valueCallback(u[0]):u[0];f=r.valueCallback?r.valueCallback(f):f;const m=a.slice(c.length);return{value:f,rest:m}}}const Z1=/^(\d+)(th|st|nd|rd)?/i,W1=/\d+/i,I1={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},F1={any:[/^b/i,/^(a|c)/i]},ew={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tw={any:[/1/i,/2/i,/3/i,/4/i]},nw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},aw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},iw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ow={ordinalNumber:J1({matchPattern:Z1,parsePattern:W1,valueCallback:l=>parseInt(l,10)}),era:jr({matchPatterns:I1,defaultMatchWidth:"wide",parsePatterns:F1,defaultParseWidth:"any"}),quarter:jr({matchPatterns:ew,defaultMatchWidth:"wide",parsePatterns:tw,defaultParseWidth:"any",valueCallback:l=>l+1}),month:jr({matchPatterns:nw,defaultMatchWidth:"wide",parsePatterns:aw,defaultParseWidth:"any"}),day:jr({matchPatterns:sw,defaultMatchWidth:"wide",parsePatterns:rw,defaultParseWidth:"any"}),dayPeriod:jr({matchPatterns:iw,defaultMatchWidth:"any",parsePatterns:lw,defaultParseWidth:"any"})},cw={code:"en-US",formatDistance:R1,formatLong:U1,formatRelative:q1,localize:Q1,match:ow,options:{weekStartsOn:0,firstWeekContainsDate:1}};function uw(l,a,r){const i=_1(),c=r?.locale??i.locale??cw,u=2520,f=fl(l,a);if(isNaN(f))throw new RangeError("Invalid time value");const m=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:f}),[p,g]=zu(r?.in,...f>0?[a,l]:[l,a]),y=A1(g,p),x=(mm(g)-mm(p))/1e3,w=Math.round((y-x)/60);let E;if(w<2)return r?.includeSeconds?y<5?c.formatDistance("lessThanXSeconds",5,m):y<10?c.formatDistance("lessThanXSeconds",10,m):y<20?c.formatDistance("lessThanXSeconds",20,m):y<40?c.formatDistance("halfAMinute",0,m):y<60?c.formatDistance("lessThanXMinutes",1,m):c.formatDistance("xMinutes",1,m):w===0?c.formatDistance("lessThanXMinutes",1,m):c.formatDistance("xMinutes",w,m);if(w<45)return c.formatDistance("xMinutes",w,m);if(w<90)return c.formatDistance("aboutXHours",1,m);if(w<fm){const T=Math.round(w/60);return c.formatDistance("aboutXHours",T,m)}else{if(w<u)return c.formatDistance("xDays",1,m);if(w<rl){const T=Math.round(w/fm);return c.formatDistance("xDays",T,m)}else if(w<rl*2)return E=Math.round(w/rl),c.formatDistance("aboutXMonths",E,m)}if(E=z1(g,p),E<12){const T=Math.round(w/rl);return c.formatDistance("xMonths",T,m)}else{const T=E%12,B=Math.trunc(E/12);return T<3?c.formatDistance("aboutXYears",B,m):T<9?c.formatDistance("overXYears",B,m):c.formatDistance("almostXYears",B+1,m)}}function vs(l,a){return uw(l,w1(l),a)}class dw{intervalId=null;CLEANUP_INTERVAL=3600*1e3;start(){this.intervalId||(this.cleanup(),this.intervalId=setInterval(()=>{this.cleanup()},this.CLEANUP_INTERVAL),console.log("Message cleanup service started"))}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,console.log("Message cleanup service stopped"))}async cleanup(){try{const a=new Date().toISOString(),{count:r,error:i}=await J.from("messages").delete().lt("expires_at",a);if(i){console.error("Error during message cleanup:",i);return}r&&r>0&&console.log(`Cleaned up ${r} expired messages`);const c=new Date(Date.now()-10080*60*1e3).toISOString(),{error:u}=await J.from("users").delete().lt("last_active",c).eq("is_op",!1);u&&console.error("Error during user cleanup:",u)}catch(a){console.error("Unexpected error during cleanup:",a)}}async triggerCleanup(){await this.cleanup()}isMessageExpired(a){return new Date(a)<=new Date}getTimeRemaining(a){const r=new Date,c=new Date(a).getTime()-r.getTime();if(c<=0)return{hours:0,minutes:0,expired:!0};const u=Math.floor(c/(1e3*60*60)),f=Math.floor(c%(1e3*60*60)/(1e3*60));return{hours:u,minutes:f,expired:!1}}formatTimeRemaining(a){const{hours:r,minutes:i,expired:c}=this.getTimeRemaining(a);return c?"Expired":r===0?`${i}m left`:`${r}h ${i}m left`}}const hs=new dw,fw=({expiresAt:l,isOwn:a,className:r=""})=>{const[i,c]=S.useState(""),[u,f]=S.useState(!1),[m,p]=S.useState("normal");S.useEffect(()=>{const y=()=>{const w=new Date().getTime(),T=new Date(l).getTime()-w;if(T<=0){c("Expired"),f(!0),p("critical");return}const B=Math.floor(T/(1e3*60*60)),z=Math.floor(T%(1e3*60*60)/(1e3*60)),q=Math.floor(T%(1e3*60)/1e3);T<=3e5?p("critical"):T<=18e5?p("warning"):p("normal"),B>0?c(`${B}h ${z}m`):z>0?c(`${z}m ${q}s`):c(`${q}s`)};y();const x=setInterval(y,1e3);return()=>clearInterval(x)},[l]);const g=()=>{if(u)return a?"bg-red-500/20 text-red-200 border border-red-400/30":"bg-red-100 text-red-800 border border-red-300 dark:bg-red-900/20 dark:text-red-400 dark:border-red-700";switch(m){case"critical":return a?"bg-red-500/20 text-red-200 border border-red-400/30 animate-pulse":"bg-red-100 text-red-800 border border-red-300 dark:bg-red-900/20 dark:text-red-400 dark:border-red-700 animate-pulse";case"warning":return a?"bg-amber-500/20 text-amber-200 border border-amber-400/30":"bg-amber-100 text-amber-800 border border-amber-300 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-700";default:return a?"bg-green-500/20 text-green-200 border border-green-400/30":"bg-green-100 text-green-800 border border-green-300 dark:bg-green-900/20 dark:text-green-400 dark:border-green-700"}};return h.jsxs("span",{className:`inline-flex items-center space-x-1 px-2 py-0.5 rounded-full text-xs font-medium ${g()} ${r}`,children:[h.jsx(h1,{className:"w-3 h-3"}),h.jsx("span",{children:i})]})},gm=()=>{const[l,a]=S.useState([]),[r,i]=S.useState(""),[c,u]=S.useState(!0),[f,m]=S.useState(null),[p,g]=S.useState(!1),y=S.useRef(null),x=S.useRef(null),{user:w}=wt(),E=()=>{y.current?.scrollIntoView({behavior:"smooth"})};S.useEffect(()=>{E()},[l]),S.useEffect(()=>{T();const z="openchat_messages_realtime";let q=null,$=0;const U=3,D=()=>{console.log(` Setting up real-time subscription on channel: ${z} (attempt ${$+1})`),q&&J.removeChannel(q),q=J.channel(z,{config:{presence:{key:`user-${Date.now()}`},broadcast:{self:!0}}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages_v2",filter:"message_type=eq.direct"},L=>{const P=Date.now();console.log(" New message received via real-time:",L.new);const V=L.new,Z=new Date(V.created_at).getTime(),F=P-Z;F>2e3?console.warn(` High latency detected: ${F}ms`):console.log(` Message delivered in ${F}ms`),a(oe=>oe.some(Ne=>Ne.id===V.id)?(console.log(" Message already exists, replacing if needed:",V.id),oe.map(Ne=>Ne.id.startsWith("temp-")&&Ne.content===V.content&&Ne.user_id===V.user_id||Ne.id===V.id?V:Ne)):(console.log(" Adding new message to state:",V.id),m(V.id),setTimeout(()=>m(null),3e3),[...oe,V]))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages_v2"},L=>{console.log(" Message deleted via real-time:",L.old);const P=L.old;a(V=>V.filter(Z=>Z.id!==P.id))}).subscribe((L,P)=>{console.log(" Real-time subscription status:",L),P&&console.error(" Real-time subscription error:",P),L==="SUBSCRIBED"?(console.log(" Successfully subscribed to real-time updates!"),$=0):L==="CHANNEL_ERROR"?(console.error(" Error with real-time subscription"),$<U?($++,console.log(` Retrying connection in 1 second (${$}/${U})...`),setTimeout(D,1e3)):console.error(" Max retries reached. Real-time disabled, using periodic sync only.")):L==="TIMED_OUT"?(console.error(" Real-time subscription timed out"),$<U&&($++,console.log(` Retrying connection in 2 seconds (${$}/${U})...`),setTimeout(D,2e3))):L==="CLOSED"&&console.log(" Real-time subscription closed")})};D();const R=setInterval(()=>{a(L=>L.filter(P=>!hs.isMessageExpired(P.expires_at)))},6e4),Q=setInterval(async()=>{try{console.log(" Performing periodic message sync...");const{data:L,error:P}=await J.from("messages_v2").select("*").eq("message_type","direct").order("created_at",{ascending:!0});if(P){console.error(" Error during periodic sync:",P);return}const V=(L||[]).filter(Z=>!hs.isMessageExpired(Z.expires_at));a(Z=>{const F=V.filter(oe=>!Z.some(Re=>Re.id===oe.id));return F.length>0?(console.log(` Found ${F.length} new messages during sync`),V):Z})}catch(L){console.error(" Error during periodic message sync:",L)}},5e3);return()=>{console.log(" Cleaning up real-time subscription and intervals"),q&&J.removeChannel(q),clearInterval(R),clearInterval(Q)}},[]);const T=async()=>{try{const{data:z,error:q}=await J.from("messages_v2").select("*").eq("message_type","direct").order("created_at",{ascending:!0});if(q)throw q;const $=(z||[]).filter(U=>!hs.isMessageExpired(U.expires_at));a($)}catch(z){console.error("Error fetching messages:",z)}finally{u(!1)}},B=async z=>{if(z.preventDefault(),!r.trim()||!w||p)return;g(!0);const q=r.trim(),$=`temp-${Date.now()}-${Math.random()}`,U=new Date(Date.now()+1440*60*1e3).toISOString(),D={id:$,user_id:w.id,username:w.username,display_name:w.display_name,content:q,created_at:new Date().toISOString(),expires_at:U,message_type:"direct",user_role:w.role};a(R=>[...R,D]),i("");try{console.log("Sending message using new TTL infrastructure:",q);const{data:R,error:Q}=await J.rpc("send_message_v2_guest",{p_user_id:w.id,p_content:q,p_message_type:"direct",p_group_id:null,p_custom_retention_hours:null});if(Q)throw Q;console.log("Message sent successfully with TTL, database ID:",R);const{data:L,error:P}=await J.from("messages_v2").select("*").eq("id",R).single();if(P)throw console.error("Failed to fetch stored message:",P),P;L&&a(V=>V.map(Z=>Z.id===$?(console.log("Replacing optimistic message with real TTL message:",L.id),L):Z)),setTimeout(()=>{x.current?.focus()},100)}catch(R){console.error("Error sending message:",R),i(q),a(Q=>Q.filter(L=>L.id!==$)),alert("Failed to send message. Please try again.")}finally{g(!1)}};return c?h.jsx("div",{className:"h-full flex items-center justify-center bg-zinc-100 dark:bg-zinc-900",children:h.jsx("div",{className:"w-10 h-10 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):h.jsxs("div",{className:"h-full flex flex-col bg-zinc-100 dark:bg-zinc-900",children:[h.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6",children:[l.map(z=>{const q=z.user_id===w?.id,$=hs.getTimeRemaining(z.expires_at),U=z.display_name||z.username,D=f===z.id;return h.jsxs("div",{className:`flex items-start gap-3 ${q?"flex-row-reverse":""} ${D?"animate-pulse bg-blue-50 dark:bg-blue-900/10 rounded-lg p-2 -m-2":""}`,children:[h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold text-white flex-shrink-0 ${q?"bg-indigo-500":"bg-zinc-400"}`,children:U.charAt(0).toUpperCase()}),h.jsxs("div",{className:`max-w-lg ${q?"items-end":"items-start"} flex flex-col space-y-1`,children:[h.jsxs("div",{className:`flex items-center space-x-2 ${q?"flex-row-reverse space-x-reverse":""}`,children:[h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx("span",{className:`text-xs font-semibold ${q?"text-indigo-600 dark:text-indigo-400":"text-zinc-700 dark:text-zinc-300"}`,children:U}),z.display_name&&h.jsxs("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["(@",z.username,")"]})]}),h.jsxs("div",{className:"flex items-center space-x-1",children:[z.user_role==="operator"&&h.jsx(ps,{className:"w-3.5 h-3.5 text-amber-500"}),h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full font-medium ${z.user_role==="operator"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":z.user_role==="admin"?"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400":z.user_role==="normal"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-zinc-100 text-zinc-600 dark:bg-zinc-700 dark:text-zinc-400"}`,children:z.user_role})]})]}),D&&!q&&h.jsx("div",{className:"absolute -top-1 -left-1 w-3 h-3 bg-blue-500 rounded-full animate-ping"}),h.jsxs("div",{className:`p-3.5 rounded-2xl shadow-sm ${q?"bg-indigo-500 text-white rounded-br-none":"bg-white dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 rounded-bl-none border border-zinc-200 dark:border-zinc-600"} ${$.expired?"opacity-50":""}`,children:[h.jsx("p",{className:"text-sm break-words leading-relaxed",children:z.content}),h.jsxs("div",{className:`flex items-center justify-between mt-2 text-xs ${q?"text-indigo-100":"text-zinc-400 dark:text-zinc-500"}`,children:[h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(gs,{className:"w-3 h-3"}),h.jsx("span",{children:vs(new Date(z.created_at),{addSuffix:!0})})]}),h.jsx(fw,{expiresAt:z.expires_at,isOwn:q,className:"ml-2"})]})]})]})]},z.id)}),h.jsx("div",{ref:y})]}),h.jsx("div",{className:"bg-white dark:bg-zinc-800 p-4 border-t border-zinc-200 dark:border-zinc-700",children:h.jsxs("form",{onSubmit:B,className:"flex items-center space-x-3",children:[h.jsx("div",{className:"flex-1 relative",children:h.jsx("input",{ref:x,type:"text",value:r,onChange:z=>i(z.target.value),placeholder:"Type a message...",className:"w-full px-5 py-3 bg-zinc-100 dark:bg-zinc-700 border-transparent rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow",disabled:p,autoFocus:!0})}),h.jsx("button",{type:"submit",disabled:!r.trim()||p,className:"p-3 bg-indigo-500 text-white rounded-full disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-zinc-800 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:p?h.jsx("div",{className:"w-5 h-5 border-2 border-white/50 border-t-white rounded-full animate-spin"}):h.jsx(eg,{size:20})})]})})]})},hw=()=>{const[l,a]=S.useState([]),[r,i]=S.useState(""),[c,u]=S.useState(null),[f,m]=S.useState(""),[p,g]=S.useState(!0),[y,x]=S.useState(!1),{user:w,isOperator:E}=wt();S.useEffect(()=>{T();const D=J.channel("pinned_messages").on("postgres_changes",{event:"*",schema:"public",table:"pinned_messages"},R=>{R.eventType==="INSERT"?a(Q=>[...Q,R.new]):R.eventType==="DELETE"?a(Q=>Q.filter(L=>L.id!==R.old.id)):R.eventType==="UPDATE"&&a(Q=>Q.map(L=>L.id===R.new.id?R.new:L))}).subscribe();return()=>{J.removeChannel(D)}},[]);const T=async()=>{try{const{data:D,error:R}=await J.from("pinned_messages").select("*").order("created_at",{ascending:!1});if(R)throw R;a(D||[])}catch(D){console.error("Error fetching pinned messages:",D)}finally{g(!1)}},B=async D=>{if(D.preventDefault(),!r.trim()||!w||!E||y)return;x(!0);const R=r.trim(),Q=`temp-${Date.now()}`,L={id:Q,user_id:w.id,username:w.username,content:R,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};a(P=>[L,...P]),i("");try{const{data:P,error:V}=await J.from("pinned_messages").insert([{user_id:w.id,username:w.username,content:R}]).select();if(V)throw V;a(Z=>Z.map(F=>F.id===Q?P[0]:F))}catch(P){console.error("Error adding pinned message:",P),alert("Failed to add pinned message. Please try again."),a(V=>V.filter(Z=>Z.id!==Q))}finally{x(!1)}},z=D=>{u(D.id),m(D.content)},q=()=>{u(null),m("")},$=async D=>{if(!f.trim())return;const R=l.find(Q=>Q.id===D)?.content;a(Q=>Q.map(L=>L.id===D?{...L,content:f.trim(),updated_at:new Date().toISOString()}:L)),u(null),m("");try{const{error:Q}=await J.from("pinned_messages").update({content:f.trim(),updated_at:new Date().toISOString()}).eq("id",D);if(Q)throw Q}catch(Q){console.error("Error updating pinned message:",Q),alert("Failed to update message. Please try again."),a(L=>L.map(P=>P.id===D?{...P,content:R||P.content,updated_at:P.created_at}:P))}},U=async D=>{if(!confirm(`Are you sure you want to permanently delete this pinned message?

This action cannot be undone, and the message will be removed forever.`))return;const R=[...l];a(Q=>Q.filter(L=>L.id!==D));try{const{error:Q}=await J.from("pinned_messages").delete().eq("id",D);if(Q)throw Q}catch(Q){console.error("Error deleting pinned message:",Q),alert("Failed to delete message. Please try again."),a(R)}};return p?h.jsx("div",{className:"h-full flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:h.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[h.jsx("div",{className:"w-8 h-8 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin"}),h.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Loading pinned messages..."})]})}):h.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[h.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-900/20 dark:to-yellow-900/20 border-b border-amber-200 dark:border-amber-800 p-6",children:h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-yellow-600 rounded-2xl flex items-center justify-center shadow-lg",children:h.jsx(X_,{className:"w-6 h-6 text-white"})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:"Pinned Messages"}),h.jsx("p",{className:"text-amber-700 dark:text-amber-300",children:"Permanent announcements from moderators - never auto-deleted"})]})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:l.length===0?h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-100 to-yellow-100 dark:from-amber-900/30 dark:to-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:h.jsx(fs,{className:"w-10 h-10 text-amber-500"})}),h.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"No pinned messages yet"}),h.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Permanent announcements will appear here"}),E&&h.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:" Add your first permanent announcement below"})]})}):h.jsx("div",{className:"space-y-6",children:l.map(D=>h.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-900/20 dark:to-yellow-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-yellow-600 rounded-full flex items-center justify-center flex-shrink-0 shadow-md",children:h.jsx(ps,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-semibold text-amber-900 dark:text-amber-100",children:D.username}),h.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-amber-200 dark:bg-amber-800 rounded-full",children:[h.jsx(ps,{className:"w-3 h-3 text-amber-700 dark:text-amber-300"}),h.jsx("span",{className:"text-xs font-medium text-amber-800 dark:text-amber-200",children:"OP"})]})]}),h.jsxs("div",{className:"text-xs text-amber-600 dark:text-amber-400",children:[vs(new Date(D.created_at),{addSuffix:!0}),D.updated_at!==D.created_at&&h.jsxs("span",{className:"ml-1 italic",children:["(edited ",vs(new Date(D.updated_at),{addSuffix:!0}),")"]})]})]}),c===D.id?h.jsxs("div",{className:"space-y-4",children:[h.jsx("textarea",{value:f,onChange:R=>m(R.target.value),className:"w-full min-h-[120px] px-4 py-3 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all duration-200 resize-y",placeholder:"Enter your permanent announcement..."}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-xs text-amber-600 dark:text-amber-400",children:" This announcement will be permanent until manually deleted by OP"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>$(D.id),className:"inline-flex items-center px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg transition-colors duration-200",children:[h.jsx(Im,{className:"w-4 h-4 mr-1"}),"Save"]}),h.jsxs("button",{onClick:q,className:"inline-flex items-center px-3 py-2 bg-slate-300 hover:bg-slate-400 dark:bg-slate-600 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 text-sm font-medium rounded-lg transition-colors duration-200",children:[h.jsx(Nu,{className:"w-4 h-4 mr-1"}),"Cancel"]})]})]})]}):h.jsx("div",{className:"bg-white/50 dark:bg-slate-800/50 rounded-xl p-4 border border-amber-200/50 dark:border-amber-700/50",children:h.jsx("p",{className:"text-slate-900 dark:text-slate-100 leading-relaxed whitespace-pre-wrap",children:D.content})})]}),E&&c!==D.id&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>z(D),className:"p-2 text-amber-600 hover:text-amber-800 dark:text-amber-400 dark:hover:text-amber-200 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg transition-all duration-200",title:"Edit message",children:h.jsx(e1,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>U(D.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-all duration-200",title:"Delete message",children:h.jsx(dl,{className:"w-4 h-4"})})]})]})},D.id))})}),E?h.jsx("div",{className:"border-t border-amber-200 dark:border-amber-800 bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-900/20 dark:to-yellow-900/20 p-6",children:h.jsxs("form",{onSubmit:B,className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-amber-500 to-yellow-600 rounded-full flex items-center justify-center",children:h.jsx(fs,{className:"w-4 h-4 text-white"})}),h.jsx("h3",{className:"text-lg font-semibold text-amber-900 dark:text-amber-100",children:"Add Permanent Announcement"})]}),h.jsx("div",{className:"mb-3 p-3 bg-amber-100 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700 rounded-lg",children:h.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[h.jsx(fs,{className:"w-4 h-4"}),h.jsx("span",{className:"font-medium",children:"Important:"}),h.jsx("span",{children:"Pinned messages are permanent and will never be automatically deleted. Only OP can remove them."})]})}),h.jsx("div",{className:"relative",children:h.jsx("textarea",{value:r,onChange:D=>i(D.target.value),placeholder:"Share a permanent announcement with all users...\\n\\nThis message will remain visible until manually deleted by a moderator.",className:"w-full min-h-[120px] px-4 py-4 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-y transition-all duration-200 shadow-sm",disabled:y})}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"text-sm text-amber-600 dark:text-amber-400 flex items-center gap-2",children:[h.jsx(fs,{className:"w-4 h-4"}),h.jsx("span",{children:" Permanent announcement - no character limit"})]}),h.jsx("button",{type:"submit",disabled:!r.trim()||y,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-amber-600 to-yellow-600 hover:from-amber-700 hover:to-yellow-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2",children:y?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Pinning..."]}):h.jsxs(h.Fragment,{children:[h.jsx(fs,{className:"w-5 h-5 mr-2"}),"Pin Message"]})})]})]})}):h.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-100 dark:bg-slate-800 p-6",children:h.jsx("div",{className:"flex items-center justify-center text-slate-600 dark:text-slate-400",children:h.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/50 dark:bg-slate-700/50 rounded-xl border border-slate-200 dark:border-slate-600",children:[h.jsx(Fm,{className:"w-5 h-5 text-amber-500"}),h.jsx("span",{className:"font-medium",children:"Only moderators can add pinned messages"})]})})})]})};class Qt{static channels=new Map;static messageHandlers=new Map;static async subscribe(a,r,i,c,u){const f=this.getChannelName(a,r);this.unsubscribe(f),console.log(` Subscribing to hybrid channel: ${f}`);const m=J.channel(f,{config:{broadcast:{self:!1},presence:{key:`user-${Date.now()}`}}});m.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages_v2",filter:a==="direct"?"message_type=eq.direct":`group_id=eq.${r}`},g=>{console.log(" Received database message:",g.new);const y=g.new,x={id:y.id,user_id:y.user_id,username:y.username,display_name:y.display_name,content:y.content,created_at:y.created_at,expires_at:y.expires_at,group_id:y.group_id,message_type:y.message_type,user_role:y.user_role};i(x)}),m.on("broadcast",{event:"new_message"},g=>{console.log(" Received broadcast message:",g.payload),i(g.payload)}),m.on("postgres_changes",{event:"DELETE",schema:"public",table:"messages_v2"},g=>{console.log(" Message deleted from database:",g.old)}),(c||u)&&(m.on("presence",{event:"sync"},()=>{const g=m.presenceState();console.log(" Presence state changed:",g)}),m.on("presence",{event:"join"},({newPresences:g})=>{console.log(" User joined:",g),g.forEach(y=>c?.(y.user))}),m.on("presence",{event:"leave"},({leftPresences:g})=>{console.log(" User left:",g),g.forEach(y=>u?.(y.user))}));const p=await m.subscribe();console.log(` Channel subscription status: ${p}`),this.channels.set(f,m),this.messageHandlers.set(f,i)}static async sendMessage(a,r,i,c,u){const f=this.getChannelName(r,i);try{console.log(" Sending message with hybrid approach:",a);const{data:m,error:p}=await J.rpc("send_message_v2_guest",{p_user_id:c.id,p_content:a,p_message_type:r,p_group_id:i,p_custom_retention_hours:u});if(p)throw console.error(" Database storage failed:",p),new Error(`Failed to store message: ${p.message}`);console.log(" Message stored in database with ID:",m);const{data:g,error:y}=await J.from("messages_v2").select("*").eq("id",m).single();if(y)throw console.error(" Failed to fetch stored message:",y),new Error(`Failed to fetch message: ${y.message}`);const x={id:g.id,user_id:g.user_id,username:g.username,display_name:g.display_name,content:g.content,created_at:g.created_at,expires_at:g.expires_at,group_id:g.group_id,message_type:g.message_type,user_role:g.user_role},w=this.channels.get(f);if(w){const E=await w.send({type:"broadcast",event:"new_message",payload:x});E==="ok"?console.log(" Message broadcasted for instant delivery"):console.warn(" Broadcast failed, but message is stored in DB:",E)}return x}catch(m){throw console.error(" Failed to send message:",m),m}}static async loadMessageHistory(a,r,i=50){try{console.log(" Loading message history from database:",a,r);let c=J.from("messages_v2").select("*").order("created_at",{ascending:!0}).limit(i);a==="direct"?c=c.eq("message_type","direct"):a==="group"&&r&&(c=c.eq("message_type","group").eq("group_id",r));const{data:u,error:f}=await c;if(f)throw console.error(" Failed to load message history:",f),new Error(`Failed to load messages: ${f.message}`);const m=(u||[]).map(p=>({id:p.id,user_id:p.user_id,username:p.username,display_name:p.display_name,content:p.content,created_at:p.created_at,expires_at:p.expires_at,group_id:p.group_id,message_type:p.message_type,user_role:p.user_role}));return console.log(` Loaded ${m.length} messages from history`),m}catch(c){return console.error(" Error loading message history:",c),[]}}static async getMessageRetentionHours(){try{const{data:a,error:r}=await J.rpc("get_message_retention_hours");return r?(console.error(" Failed to get retention settings:",r),24):a||24}catch(a){return console.error(" Error getting retention settings:",a),24}}static async updateMessageRetentionHours(a,r){try{const{error:i}=await J.from("app_settings").update({setting_value:a.toString(),updated_by:r,updated_at:new Date().toISOString()}).eq("setting_key","default_message_retention_hours");return i?(console.error(" Failed to update retention settings:",i),!1):(console.log(` Updated message retention to ${a} hours`),!0)}catch(i){return console.error(" Error updating retention settings:",i),!1}}static async cleanupExpiredMessages(){try{const{data:a,error:r}=await J.rpc("cleanup_expired_messages");return r?(console.error(" Failed to cleanup expired messages:",r),0):(console.log(` Cleaned up ${a} expired messages`),a||0)}catch(a){return console.error(" Error cleaning up messages:",a),0}}static async getMessageStatistics(){try{const{count:a}=await J.from("messages_v2").select("*",{count:"exact",head:!0}),{count:r}=await J.from("messages_v2").select("*",{count:"exact",head:!0}).gte("created_at",new Date(Date.now()-1440*60*1e3).toISOString()),i=await this.getMessageRetentionHours();return{totalMessages:a||0,messagesLast24h:r||0,averageRetentionHours:i,nextCleanupTime:new Date(Date.now()+3600*1e3).toISOString()}}catch(a){return console.error(" Error getting message statistics:",a),{totalMessages:0,messagesLast24h:0,averageRetentionHours:24,nextCleanupTime:new Date().toISOString()}}}static async updatePresence(a,r,i){const c=this.getChannelName(a,r),u=this.channels.get(c);u&&await u.track({user:{id:i.id,username:i.username,display_name:i.display_name,role:i.role,online_at:new Date().toISOString()}})}static getOnlineUsers(a,r){const i=this.getChannelName(a,r),c=this.channels.get(i);if(!c)return[];const u=c.presenceState(),f=[];return Object.keys(u).forEach(m=>{const p=u[m];p&&p.length>0&&f.push(p[0].user)}),f}static unsubscribe(a){const r=this.channels.get(a);r&&(console.log(` Unsubscribing from channel: ${a}`),J.removeChannel(r),this.channels.delete(a),this.messageHandlers.delete(a))}static cleanup(){console.log(" Cleaning up all hybrid subscriptions"),this.channels.forEach((a,r)=>{this.unsubscribe(r)})}static getChannelName(a,r){return a==="direct"?"direct_chat":`group_${r}`}}const mw=()=>{const[l,a]=S.useState(24),[r,i]=S.useState({totalMessages:0,messagesLast24h:0,averageRetentionHours:24,nextCleanupTime:""}),[c,u]=S.useState(!0),[f,m]=S.useState(!1),[p,g]=S.useState(!1),[y,x]=S.useState(""),[w,E]=S.useState(""),{user:T,isOperator:B}=wt();S.useEffect(()=>{B&&T&&z()},[B,T]);const z=async()=>{try{u(!0);const U=await Qt.getMessageRetentionHours();a(U);const D=await Qt.getMessageStatistics();i(D)}catch(U){console.error("Failed to load operator data:",U),E("Failed to load settings")}finally{u(!1)}},q=async U=>{if(U.preventDefault(),!(!T||!B)){m(!0),E(""),x("");try{await Qt.updateMessageRetentionHours(l,T.id)?(x(`Message retention updated to ${l} hours`),await z()):E("Failed to update retention settings")}catch(D){console.error("Error updating retention:",D),E("Failed to update retention settings")}finally{m(!1)}}},$=async()=>{if(!(!T||!B)){g(!0),E(""),x("");try{const U=await Qt.cleanupExpiredMessages();x(`Cleaned up ${U} expired messages`),await z()}catch(U){console.error("Error cleaning up messages:",U),E("Failed to cleanup messages")}finally{g(!1)}}};return B?c?h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-indigo-600 border-t-transparent mx-auto mb-4"}),h.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Loading operator settings..."})]})}):h.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx(zr,{className:"w-8 h-8 text-red-600"}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:"Operator Settings"}),h.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Configure message retention and manage system settings"})]})]}),y&&h.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:h.jsx("p",{className:"text-green-700 dark:text-green-300",children:y})}),w&&h.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:h.jsx("p",{className:"text-red-700 dark:text-red-300",children:w})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx("div",{className:"bg-white dark:bg-zinc-800 p-6 rounded-lg border border-zinc-200 dark:border-zinc-700",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx(O_,{className:"w-8 h-8 text-blue-600"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Total Messages"}),h.jsx("p",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:r.totalMessages.toLocaleString()})]})]})}),h.jsx("div",{className:"bg-white dark:bg-zinc-800 p-6 rounded-lg border border-zinc-200 dark:border-zinc-700",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx(y_,{className:"w-8 h-8 text-green-600"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Last 24 Hours"}),h.jsx("p",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:r.messagesLast24h.toLocaleString()})]})]})}),h.jsx("div",{className:"bg-white dark:bg-zinc-800 p-6 rounded-lg border border-zinc-200 dark:border-zinc-700",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx(gs,{className:"w-8 h-8 text-amber-600"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Retention"}),h.jsxs("p",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:[r.averageRetentionHours,"h"]})]})]})}),h.jsx("div",{className:"bg-white dark:bg-zinc-800 p-6 rounded-lg border border-zinc-200 dark:border-zinc-700",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx(dl,{className:"w-8 h-8 text-red-600"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Next Cleanup"}),h.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:new Date(r.nextCleanupTime).toLocaleTimeString()})]})]})})]}),h.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700 p-6",children:[h.jsxs("h2",{className:"text-xl font-semibold text-zinc-900 dark:text-white mb-4 flex items-center space-x-2",children:[h.jsx(gs,{className:"w-5 h-5"}),h.jsx("span",{children:"Message Retention"})]}),h.jsxs("form",{onSubmit:q,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Default Message Retention (Hours)"}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("input",{type:"number",min:"1",max:"8760",value:l,onChange:U=>a(parseInt(U.target.value)||24),className:"w-32 px-3 py-2 border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent",disabled:f}),h.jsxs("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:["hours (",Math.round(l/24*10)/10," days)"]})]}),h.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:"Messages will be automatically deleted after this duration"})]}),h.jsxs("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2",children:[f?h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}):h.jsx(zr,{className:"w-4 h-4"}),h.jsx("span",{children:f?"Saving...":"Update Retention"})]})]})]}),h.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700 p-6",children:[h.jsxs("h2",{className:"text-xl font-semibold text-zinc-900 dark:text-white mb-4 flex items-center space-x-2",children:[h.jsx(dl,{className:"w-5 h-5"}),h.jsx("span",{children:"Manual Cleanup"})]}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-4",children:"Manually clean up expired messages. This will remove all messages that have passed their retention time."}),h.jsxs("button",{onClick:$,disabled:p,className:"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2",children:[p?h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}):h.jsx(dl,{className:"w-4 h-4"}),h.jsx("span",{children:p?"Cleaning...":"Cleanup Expired Messages"})]})]}),h.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-6",children:[h.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100 mb-2",children:"How the Hybrid System Works"}),h.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[h.jsx("li",{children:" Messages are delivered instantly via real-time channels"}),h.jsx("li",{children:" Messages are also stored in the database for persistence"}),h.jsx("li",{children:" Users can see message history when they join/refresh"}),h.jsx("li",{children:" Messages are automatically deleted after the retention period"}),h.jsx("li",{children:" Operators can manually trigger cleanup anytime"})]})]})]}):h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsxs("div",{className:"text-center",children:[h.jsx(zr,{className:"w-16 h-16 text-zinc-400 mx-auto mb-4"}),h.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Operator privileges required to access these settings"})]})})},gw=()=>{const{user:l,isOperator:a,updateUser:r}=wt(),[i,c]=S.useState("profile"),[u,f]=S.useState(l?.username||""),[m,p]=S.useState(l?.theme||"light"),[g,y]=S.useState(!1),[x,w]=S.useState(""),E=async T=>{if(T.preventDefault(),!u.trim()){w("Username cannot be empty");return}y(!0),w("");try{await r({username:u.trim(),theme:m}),w("Settings saved successfully!"),m==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}catch(B){console.error("Error updating settings:",B),w("Failed to save settings. Please try again.")}finally{y(!1),setTimeout(()=>w(""),3e3)}};return h.jsx("div",{className:"h-full overflow-y-auto bg-zinc-100 dark:bg-zinc-900",children:h.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[h.jsx("div",{className:"mb-8",children:h.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[h.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg",children:h.jsx(zr,{className:"w-6 h-6 text-white"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-white",children:"Settings"}),h.jsx("p",{className:"text-zinc-600 dark:text-zinc-400",children:"Customize your anonymous chat experience"})]})]})}),a&&h.jsxs("div",{className:"flex space-x-1 bg-zinc-100 dark:bg-zinc-800 p-1 rounded-lg mb-6",children:[h.jsx("button",{onClick:()=>c("profile"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-md transition-colors ${i==="profile"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white"}`,children:"Profile Settings"}),h.jsx("button",{onClick:()=>c("operator"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-md transition-colors ${i==="operator"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white"}`,children:"Operator Settings"})]}),i==="operator"&&a?h.jsx(mw,{}):h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsx("div",{className:"lg:col-span-1"}),h.jsx("div",{className:"lg:col-span-1",children:h.jsx("div",{className:"bg-white dark:bg-zinc-800 rounded-2xl shadow-sm border border-zinc-200 dark:border-zinc-700 p-6 sticky top-6",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-zinc-500 to-zinc-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:h.jsx("span",{className:"text-white font-bold text-2xl",children:l?.username?.charAt(0)?.toUpperCase()})}),h.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[h.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:l?.username}),a&&h.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-red-100 dark:bg-red-900/40 rounded-full",children:[h.jsx(ps,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),h.jsx("span",{className:"text-xs font-medium text-red-700 dark:text-red-300",children:"Operator"})]})]}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-6",children:a?"System Operator":"Anonymous Member"}),h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-100 dark:bg-zinc-700/50 rounded-xl",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(gs,{className:"w-4 h-4 text-zinc-500"}),h.jsx("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Member since"})]}),h.jsx("span",{className:"text-zinc-900 dark:text-white font-medium",children:l?.created_at?new Date(l.created_at).toLocaleDateString():"Unknown"})]}),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-100 dark:bg-zinc-700/50 rounded-xl",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),h.jsx("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Status"})]}),h.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Online"})]})]})]})})}),h.jsx("div",{className:"lg:col-span-2 space-y-6",children:h.jsxs("form",{onSubmit:E,className:"space-y-6",children:[h.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-2xl shadow-sm border border-zinc-200 dark:border-zinc-700 p-6",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[h.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl flex items-center justify-center",children:h.jsx(Ar,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-white",children:"Profile Settings"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Update your display name and preferences"})]})]}),h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{children:[h.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Username"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Ar,{className:"h-5 w-5 text-zinc-400"})}),h.jsx("input",{type:"text",id:"username",value:u,onChange:T=>f(T.target.value),className:"w-full pl-10 pr-4 py-3 bg-zinc-50 dark:bg-zinc-700 border border-zinc-200 dark:border-zinc-600 rounded-xl text-zinc-900 dark:text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your username",maxLength:50,disabled:g})]}),h.jsx("p",{className:"mt-2 text-xs text-zinc-500 dark:text-zinc-400",children:"This name will be visible to other users in the chat."})]})})]}),h.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-2xl shadow-sm border border-zinc-200 dark:border-zinc-700 p-6",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[h.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl flex items-center justify-center",children:h.jsx(I_,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-white",children:"Appearance"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Choose your preferred theme"})]})]}),h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-4",children:"Theme Preference"}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("label",{className:"relative cursor-pointer",children:[h.jsx("input",{type:"radio",name:"theme",value:"light",checked:m==="light",onChange:T=>p(T.target.value),className:"sr-only",disabled:g}),h.jsx("div",{className:`p-4 border-2 rounded-xl transition-all duration-200 ${m==="light"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 shadow-md":"border-zinc-200 dark:border-zinc-700 hover:border-zinc-300 dark:hover:border-zinc-600"}`,children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-white border-2 border-zinc-200 rounded-xl flex items-center justify-center shadow-sm",children:h.jsx(d1,{className:"w-5 h-5 text-amber-500"})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold text-zinc-900 dark:text-white",children:"Light"}),h.jsx("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Clean and bright"})]})]})})]}),h.jsxs("label",{className:"relative cursor-pointer",children:[h.jsx("input",{type:"radio",name:"theme",value:"dark",checked:m==="dark",onChange:T=>p(T.target.value),className:"sr-only",disabled:g}),h.jsx("div",{className:`p-4 border-2 rounded-xl transition-all duration-200 ${m==="dark"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 shadow-md":"border-zinc-200 dark:border-zinc-700 hover:border-zinc-300 dark:hover:border-zinc-600"}`,children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-zinc-800 border-2 border-zinc-700 rounded-xl flex items-center justify-center shadow-sm",children:h.jsx(Z_,{className:"w-5 h-5 text-indigo-400"})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold text-zinc-900 dark:text-white",children:"Dark"}),h.jsx("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Easy on the eyes"})]})]})})]})]})]})})]}),h.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 border border-green-200 dark:border-green-800 rounded-2xl p-6",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/40 rounded-xl flex items-center justify-center",children:h.jsx(c1,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),h.jsx("h4",{className:"text-lg font-semibold text-green-900 dark:text-green-100",children:"Privacy Protection"})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),h.jsx("span",{className:"text-green-800 dark:text-green-200",children:"Messages auto-delete after 24 hours"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),h.jsx("span",{className:"text-green-800 dark:text-green-200",children:"End-to-end encrypted communication"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),h.jsx("span",{className:"text-green-800 dark:text-green-200",children:"No personal data collection"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),h.jsx("span",{className:"text-green-800 dark:text-green-200",children:"Anonymous and temporary chats"})]})]})]}),x&&h.jsx("div",{className:`p-4 rounded-xl border-l-4 transition-all ${x.includes("successfully")?"bg-green-50 dark:bg-green-900/30 border-green-500 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/30 border-red-500 text-red-800 dark:text-red-200"}`,children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${x.includes("successfully")?"bg-green-500":"bg-red-500"}`,children:h.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:x.includes("successfully")?"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z":"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),h.jsx("span",{className:"font-medium",children:x})]})}),h.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-zinc-200 dark:border-zinc-700",children:[h.jsx("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Changes are saved automatically to your browser."}),h.jsx("button",{type:"submit",disabled:g||!u.trim(),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-zinc-800",children:g?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Saving..."]}):h.jsxs(h.Fragment,{children:[h.jsx(r1,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]})]})})]})]})})};class Ic{static async createGroup(a,r){try{const{data:i,error:c}=await J.rpc("generate_access_code");if(c)return{success:!1,error:c.message};const{data:u,error:f}=await J.from("groups").insert({name:a.name,description:a.description,access_code:i,admin_user_id:r,message_deletion_timer:a.message_deletion_timer||3600,max_members:a.max_members||100}).select().single();if(f)return{success:!1,error:f.message};const{error:m}=await J.from("group_members").insert({user_id:r,group_id:u.id,role:"moderator"});return m?(await J.from("groups").delete().eq("id",u.id),{success:!1,error:"Failed to add creator to group"}):{success:!0,data:u,message:`Group "${u.name}" created successfully! Access code: ${i}`}}catch(i){return console.error("Error creating group:",i),{success:!1,error:i.message||"Failed to create group"}}}static async joinGroup(a,r){try{const{data:i,error:c}=await J.from("groups").select("*").eq("access_code",a.access_code.toUpperCase()).eq("is_active",!0).single();if(c||!i)return{success:!1,error:"Invalid access code or group not found"};const{data:u,error:f}=await J.from("group_members").select("*").eq("user_id",r).eq("group_id",i.id).eq("is_active",!0).single();if(u&&!f)return{success:!1,error:"You are already a member of this group"};const{count:m,error:p}=await J.from("group_members").select("*",{count:"exact"}).eq("group_id",i.id).eq("is_active",!0);if(p)return{success:!1,error:"Failed to check group capacity"};if(m&&m>=i.max_members)return{success:!1,error:"Group is at maximum capacity"};const{error:g}=await J.from("group_members").insert({user_id:r,group_id:i.id,role:"member"});return g?{success:!1,error:g.message}:{success:!0,data:i,message:`Successfully joined "${i.name}"!`}}catch(i){return console.error("Error joining group:",i),{success:!1,error:i.message||"Failed to join group"}}}static async leaveGroup(a,r){try{const{data:i,error:c}=await J.from("groups").select("admin_user_id").eq("id",a).single();if(c)return{success:!1,error:"Group not found"};if(i.admin_user_id===r)return{success:!1,error:"Group admin cannot leave. Transfer admin rights or delete the group."};const{error:u}=await J.from("group_members").update({is_active:!1}).eq("user_id",r).eq("group_id",a);return u?{success:!1,error:u.message}:{success:!0,message:"Successfully left the group"}}catch(i){return console.error("Error leaving group:",i),{success:!1,error:i.message||"Failed to leave group"}}}static async getUserGroups(a){try{const{data:r,error:i}=await J.from("group_members_with_details").select("*").eq("user_id",a).eq("is_active",!0);if(i)return{success:!1,error:i.message};const c=new Map;for(const f of r||[]){c.has(f.group_id)||c.set(f.group_id,{id:f.group_id,name:f.group_name,description:"",access_code:f.access_code,admin_user_id:"",message_deletion_timer:3600,max_members:100,is_active:!0,created_at:"",updated_at:"",member_count:0,user_role:f.role,members:[]});const m=c.get(f.group_id);m.member_count++,m.members.push({id:f.id,user_id:f.user_id,group_id:f.group_id,joined_at:f.joined_at,role:f.role,is_active:f.is_active,username:f.username,display_name:f.display_name,user_role:f.user_role,group_name:f.group_name})}return{success:!0,data:Array.from(c.values())}}catch(r){return console.error("Error fetching user groups:",r),{success:!1,error:r.message||"Failed to fetch groups"}}}static async getGroupDetails(a,r){try{const{data:i,error:c}=await J.from("group_members").select("role").eq("user_id",r).eq("group_id",a).eq("is_active",!0).single();if(c||!i)return{success:!1,error:"You are not a member of this group"};const{data:u,error:f}=await J.from("groups").select("*").eq("id",a).single();if(f||!u)return{success:!1,error:"Group not found"};const{data:m,error:p}=await J.from("group_members_with_details").select("*").eq("group_id",a).eq("is_active",!0);return p?{success:!1,error:"Failed to fetch group members"}:{success:!0,data:{...u,member_count:m?.length||0,user_role:i.role,members:m?.map(y=>({id:y.id,user_id:y.user_id,group_id:y.group_id,joined_at:y.joined_at,role:y.role,is_active:y.is_active,username:y.username,display_name:y.display_name,user_role:y.user_role,group_name:y.group_name}))||[]}}}catch(i){return console.error("Error fetching group details:",i),{success:!1,error:i.message||"Failed to fetch group details"}}}static async updateGroup(a,r,i){try{const{data:c,error:u}=await J.from("groups").select("admin_user_id").eq("id",a).single();if(u||!c)return{success:!1,error:"Group not found"};if(c.admin_user_id!==i)return{success:!1,error:"Only group admin can update settings"};const{data:f,error:m}=await J.from("groups").update({...r,updated_at:new Date().toISOString()}).eq("id",a).select().single();return m?{success:!1,error:m.message}:{success:!0,data:f,message:"Group updated successfully"}}catch(c){return console.error("Error updating group:",c),{success:!1,error:c.message||"Failed to update group"}}}static async deleteGroup(a,r){try{const{data:i,error:c}=await J.from("groups").select("admin_user_id, name").eq("id",a).single();if(c||!i)return{success:!1,error:"Group not found"};if(i.admin_user_id!==r)return{success:!1,error:"Only group admin can delete the group"};const{error:u}=await J.from("groups").update({is_active:!1}).eq("id",a);return u?{success:!1,error:u.message}:{success:!0,message:`Group "${i.name}" deleted successfully`}}catch(i){return console.error("Error deleting group:",i),{success:!1,error:i.message||"Failed to delete group"}}}static async removeMember(a,r,i){try{const{data:c,error:u}=await J.from("groups").select("admin_user_id").eq("id",a).single();if(u||!c)return{success:!1,error:"Group not found"};const{data:f,error:m}=await J.from("group_members").select("role").eq("user_id",i).eq("group_id",a).eq("is_active",!0).single();if(m||!f)return{success:!1,error:"You are not a member of this group"};const p=c.admin_user_id===i,g=f.role==="moderator";if(!p&&!g)return{success:!1,error:"Only admins and moderators can remove members"};if(r===c.admin_user_id)return{success:!1,error:"Cannot remove group admin"};const{error:y}=await J.from("group_members").update({is_active:!1}).eq("user_id",r).eq("group_id",a);return y?{success:!1,error:y.message}:{success:!0,message:"Member removed successfully"}}catch(c){return console.error("Error removing member:",c),{success:!1,error:c.message||"Failed to remove member"}}}}const pm=({onGroupSelect:l})=>{const[a,r]=S.useState("list"),[i,c]=S.useState([]),[u,f]=S.useState(!1),[m,p]=S.useState(""),[g,y]=S.useState(""),{user:x,canCreateGroups:w}=wt(),[E,T]=S.useState({name:"",description:"",message_deletion_timer:3600,max_members:100}),[B,z]=S.useState({access_code:""});S.useEffect(()=>{x&&q()},[x]);const q=async()=>{if(!x)return;f(!0);const D=await Ic.getUserGroups(x.id);D.success?c(D.data||[]):p(D.error||"Failed to load groups"),f(!1)},$=async D=>{if(D.preventDefault(),!x)return;f(!0),p(""),y("");const R=await Ic.createGroup(E,x.id);R.success?(y(R.message||"Group created successfully!"),T({name:"",description:"",message_deletion_timer:3600,max_members:100}),await q(),r("list")):p(R.error||"Failed to create group"),f(!1)},U=async D=>{if(D.preventDefault(),!x)return;f(!0),p(""),y("");const R=await Ic.joinGroup(B,x.id);R.success?(y(R.message||"Joined group successfully!"),z({access_code:""}),await q(),r("list")):p(R.error||"Failed to join group"),f(!1)};return w()?h.jsxs("div",{className:"h-full flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-700",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[a!=="list"&&h.jsx("button",{onClick:()=>{r("list"),p(""),y("")},className:"p-2 text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300",children:""}),h.jsxs("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-white",children:[a==="list"&&"My Groups",a==="create"&&"Create Group",a==="join"&&"Join Group"]})]}),a==="list"&&h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("button",{onClick:()=>r("join"),className:"p-2 text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Join Group",children:h.jsx(D_,{className:"w-5 h-5"})}),h.jsx("button",{onClick:()=>r("create"),className:"p-2 text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Create Group",children:h.jsx(a1,{className:"w-5 h-5"})})]})]}),m&&h.jsx("div",{className:"mx-4 mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:h.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:m})}),g&&h.jsx("div",{className:"mx-4 mt-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:h.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:g})}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a==="list"&&h.jsx("div",{className:"space-y-4",children:u?h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-indigo-500 border-t-transparent mx-auto"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2",children:"Loading groups..."})]}):i.length===0?h.jsxs("div",{className:"text-center py-8",children:[h.jsx(Cr,{className:"w-12 h-12 text-zinc-400 mx-auto mb-4"}),h.jsx("h3",{className:"text-lg font-medium text-zinc-900 dark:text-white mb-2",children:"No Groups Yet"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-4",children:"Create your first group or join an existing one."}),h.jsxs("div",{className:"flex justify-center space-x-3",children:[h.jsx("button",{onClick:()=>r("create"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Create Group"}),h.jsx("button",{onClick:()=>r("join"),className:"px-4 py-2 border border-zinc-300 dark:border-zinc-600 text-zinc-700 dark:text-zinc-300 rounded-lg hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors",children:"Join Group"})]})]}):i.map(D=>h.jsxs("div",{className:"p-4 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>l?.(D),children:[h.jsx("h3",{className:"font-medium text-zinc-900 dark:text-white",children:D.name}),D.description&&h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:D.description}),h.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-zinc-500 dark:text-zinc-400",children:[h.jsxs("span",{children:[D.member_count," members"]}),h.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${D.user_role==="admin"?"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400":D.user_role==="moderator"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-zinc-100 text-zinc-800 dark:bg-zinc-700 dark:text-zinc-300"}`,children:D.user_role})]})]},D.id))}),a==="create"&&h.jsxs("form",{onSubmit:$,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Group Name *"}),h.jsx("input",{type:"text",required:!0,value:E.name,onChange:D=>T({...E,name:D.target.value}),className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter group name",maxLength:100})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Description (Optional)"}),h.jsx("textarea",{value:E.description,onChange:D=>T({...E,description:D.target.value}),className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:"Describe your group",rows:3,maxLength:500})]}),h.jsx("button",{type:"submit",disabled:u,className:"w-full py-2 px-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-medium rounded-lg transition-colors",children:u?"Creating...":"Create Group"})]}),a==="join"&&h.jsxs("form",{onSubmit:U,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Access Code *"}),h.jsx("input",{type:"text",required:!0,value:B.access_code,onChange:D=>z({access_code:D.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent font-mono text-center text-lg tracking-wider",placeholder:"ENTER CODE",maxLength:20}),h.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:"Enter the 8-character access code provided by the group admin."})]}),h.jsx("button",{type:"submit",disabled:u,className:"w-full py-2 px-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-medium rounded-lg transition-colors",children:u?"Joining...":"Join Group"})]})]})]}):h.jsxs("div",{className:"p-6 text-center",children:[h.jsx(Cr,{className:"w-12 h-12 text-zinc-400 mx-auto mb-4"}),h.jsx("h3",{className:"text-lg font-medium text-zinc-900 dark:text-white mb-2",children:"Groups Not Available"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Guest users cannot access groups. Please create an account to join or create groups."})]})},pw=({context:l,group:a,onBack:r,className:i=""})=>{const[c,u]=S.useState([]),[f,m]=S.useState(""),[p,g]=S.useState(!1),[y,x]=S.useState(!0),[w,E]=S.useState([]),[T,B]=S.useState(""),z=S.useRef(null),{user:q}=wt(),$=()=>{z.current?.scrollIntoView({behavior:"smooth"})};S.useEffect(()=>{$()},[c]),S.useEffect(()=>{if(!q)return;let V=!0;return(async()=>{try{const F=await Qt.loadMessageHistory(l,a?.id);V&&(u(F),x(!1)),await Qt.subscribe(l,a?.id||null,U,D,R),await Qt.updatePresence(l,a?.id||null,q);const oe=Qt.getOnlineUsers(l,a?.id||null);V&&E(oe)}catch(F){console.error("Failed to initialize chat:",F),V&&(B("Failed to connect to chat"),x(!1))}})(),()=>{V=!1;const F=l==="direct"?"direct_chat":`group_${a?.id}`;Qt.unsubscribe(F)}},[q,l,a?.id]);const U=V=>{u(Z=>Z.some(Re=>Re.id===V.id)?Z:[...Z,V].sort((Re,Ne)=>new Date(Re.created_at).getTime()-new Date(Ne.created_at).getTime()))},D=V=>{E(Z=>Z.some(oe=>oe.id===V.id)?Z:[...Z,V])},R=V=>{E(Z=>Z.filter(F=>F.id!==V.id))},Q=async V=>{if(V.preventDefault(),!q||!f.trim())return;g(!0),B("");const Z=f.trim();m("");try{await Qt.sendMessage(Z,l,a?.id||null,q)}catch(F){console.error("Error sending message:",F),B("Failed to send message. Please try again."),m(Z)}finally{g(!1)}},L=V=>{const Z=new Date,oe=new Date(V).getTime()-Z.getTime();if(oe<=0)return"Expired";const Re=Math.floor(oe/(1e3*60*60)),Ne=Math.floor(oe%(1e3*60*60)/(1e3*60));return Re===0?`${Ne}m left`:`${Re}h ${Ne}m left`},P=V=>{switch(V){case"operator":return"text-red-600 dark:text-red-400";case"admin":return"text-amber-600 dark:text-amber-400";case"normal":return"text-blue-600 dark:text-blue-400";case"guest":return"text-zinc-500 dark:text-zinc-400";default:return"text-zinc-700 dark:text-zinc-300"}};return q?h.jsxs("div",{className:`flex flex-col h-full ${i}`,children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-800",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[r&&h.jsx("button",{onClick:r,className:"p-2 text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-lg transition-colors",title:"Back to Groups",children:""}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-zinc-900 dark:text-white",children:l==="direct"?"Direct Chat":a?.name||"Group Chat"}),l==="group"&&a&&h.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:a.description||`${a.member_count} members`})]})]}),h.jsxs("div",{className:"flex items-center space-x-4 text-sm text-zinc-500 dark:text-zinc-400",children:[h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(Cr,{className:"w-4 h-4"}),h.jsxs("span",{children:[w.length," online"]})]}),l==="group"&&a&&h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(gs,{className:"w-4 h-4"}),h.jsxs("span",{children:[Math.floor(a.message_deletion_timer/3600),"h timer"]})]})]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-zinc-50 dark:bg-zinc-900",children:[y?h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-indigo-600 border-t-transparent mx-auto mb-4"}),h.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Loading messages..."})]}):c.length===0?h.jsx("div",{className:"text-center py-8",children:h.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:l==="direct"?"Messages are stored in database and auto-deleted based on Operator settings.":"Messages are stored and auto-deleted according to group settings."})}):c.map(V=>h.jsx("div",{className:`flex ${V.user_id===q.id?"justify-end":"justify-start"}`,children:h.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-3 rounded-lg ${V.user_id===q.id?"bg-indigo-600 text-white":"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white border border-zinc-200 dark:border-zinc-700"}`,children:[V.user_id!==q.id&&h.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[h.jsx("span",{className:`text-sm font-medium ${P(V.user_role)}`,children:V.display_name||V.username}),h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full text-xs ${V.user_role==="operator"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":V.user_role==="admin"?"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-400":V.user_role==="normal"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-zinc-100 text-zinc-800 dark:bg-zinc-700 dark:text-zinc-300"}`,children:V.user_role})]}),h.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:V.content}),h.jsxs("div",{className:`flex items-center justify-between mt-2 text-xs ${V.user_id===q.id?"text-indigo-200":"text-zinc-500 dark:text-zinc-400"}`,children:[h.jsx("span",{children:vs(new Date(V.created_at),{addSuffix:!0})}),h.jsxs("span",{className:"flex items-center space-x-1",children:[h.jsx(gs,{className:"w-3 h-3"}),h.jsx("span",{children:L(V.expires_at)})]})]})]})},V.id)),h.jsx("div",{ref:z})]}),T&&h.jsx("div",{className:"mx-4 mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:h.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:T})}),h.jsxs("form",{onSubmit:Q,className:"p-4 border-t border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-800",children:[h.jsxs("div",{className:"flex space-x-3",children:[h.jsx("input",{type:"text",value:f,onChange:V=>m(V.target.value),placeholder:`Message ${l==="direct"?"direct chat":a?.name||"group"}...`,className:"flex-1 px-4 py-2 border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white placeholder-zinc-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors",maxLength:1e3,disabled:p}),h.jsxs("button",{type:"submit",disabled:p||!f.trim(),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2",children:[p?h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}):h.jsx(eg,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:p?"Sending...":"Send"})]})]}),h.jsxs("div",{className:"mt-2 text-xs text-zinc-500 dark:text-zinc-400",children:[l==="direct"&&h.jsx("p",{children:"Messages stored in database  Auto-deleted by Operator settings  Real-time delivery"}),l==="group"&&a&&h.jsxs("p",{children:["Messages stored in database  Auto-deleted after ",Math.floor(a.message_deletion_timer/3600),"h",Math.floor(a.message_deletion_timer%3600/60)>0&&` ${Math.floor(a.message_deletion_timer%3600/60)}m`,"  Real-time delivery"]})]})]})]}):h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Please log in to access chat"})})},vw=({isOpen:l,onClose:a,className:r=""})=>{const[i,c]=S.useState([]),[u,f]=S.useState([]),[m,p]=S.useState(!0),[g,y]=S.useState(null),{user:x}=wt(),w=S.useRef(null);S.useEffect(()=>{if(!x||!l)return;E(),T();const R=J.channel("user_notifications").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`recipient_id=eq.${x.id}`},L=>{console.log("Notification change:",L),L.eventType==="INSERT"?c(P=>[L.new,...P]):L.eventType==="UPDATE"?c(P=>P.map(V=>V.id===L.new.id?L.new:V)):L.eventType==="DELETE"&&c(P=>P.filter(V=>V.id!==L.old.id))}).subscribe(),Q=J.channel("user_join_requests").on("postgres_changes",{event:"*",schema:"public",table:"group_join_requests"},L=>{console.log("Join request change:",L),T()}).subscribe();return()=>{J.removeChannel(R),J.removeChannel(Q)}},[x,l]),S.useEffect(()=>{const R=Q=>{w.current&&Q.target===w.current&&a()};return l&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[l,a]);const E=async()=>{if(x)try{const{data:R,error:Q}=await J.from("notifications").select("*").eq("recipient_id",x.id).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1}).limit(50);if(Q)throw Q;c(R||[])}catch(R){console.error("Error loading notifications:",R)}finally{p(!1)}},T=async()=>{if(x)try{const{data:R,error:Q}=await J.from("group_join_requests").select(`
          *,
          users_v2!group_join_requests_user_id_fkey(
            username,
            display_name,
            role
          ),
          groups!group_join_requests_group_id_fkey(
            name,
            admin_user_id
          )
        `).eq("status","pending").eq("groups.admin_user_id",x.id);if(Q)throw Q;const L=(R||[]).map(P=>({...P,username:P.users_v2?.username||"",display_name:P.users_v2?.display_name,user_role:P.users_v2?.role||"guest",group_name:P.groups?.name||""}));f(L)}catch(R){console.error("Error loading join requests:",R)}},B=async R=>{if(x)try{const{error:Q}=await J.rpc("mark_notification_read",{p_notification_id:R,p_user_id:x.id});if(Q)throw Q;c(L=>L.map(P=>P.id===R?{...P,is_read:!0}:P))}catch(Q){console.error("Error marking notification as read:",Q)}},z=async(R,Q,L)=>{if(x){y(R);try{const{error:P}=await J.rpc("process_join_request",{p_request_id:R,p_admin_id:x.id,p_approved:Q,p_admin_message:L});if(P)throw P;f(V=>V.filter(Z=>Z.id!==R))}catch(P){console.error("Error processing join request:",P)}finally{y(null)}}},q=R=>{switch(R){case"group_join_request":case"group_join_approved":case"group_join_denied":return h.jsx(Cr,{className:"w-5 h-5"});case"group_admin_changed":return h.jsx(ps,{className:"w-5 h-5"});case"system_announcement":return h.jsx(Fm,{className:"w-5 h-5"});default:return h.jsx(C_,{className:"w-5 h-5"})}},$=R=>{switch(R){case"group_join_approved":return"text-green-600 dark:text-green-400";case"group_join_denied":case"group_member_removed":return"text-red-600 dark:text-red-400";case"group_join_request":return"text-blue-600 dark:text-blue-400";case"group_admin_changed":return"text-amber-600 dark:text-amber-400";default:return"text-zinc-600 dark:text-zinc-400"}},U=i.filter(R=>!R.is_read).length,D=i.length+u.length;return l?h.jsx("div",{ref:w,className:`fixed inset-0 bg-black/30 flex items-start justify-end pt-16 pr-4 z-50 ${r}`,children:h.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg shadow-xl w-full max-w-md max-h-[80vh] flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-700",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(fu,{className:"w-5 h-5 text-zinc-700 dark:text-zinc-300"}),h.jsx("h3",{className:"font-semibold text-zinc-900 dark:text-white",children:"Notifications"}),U>0&&h.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-0.5",children:U})]}),h.jsx("button",{onClick:a,className:"p-1 text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded transition-colors",children:h.jsx(Nu,{className:"w-5 h-5"})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto",children:m?h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-indigo-500 border-t-transparent"})}):D===0?h.jsxs("div",{className:"text-center py-8 px-4",children:[h.jsx(fu,{className:"w-12 h-12 text-zinc-400 mx-auto mb-3"}),h.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"No notifications yet"})]}):h.jsxs("div",{className:"divide-y divide-zinc-200 dark:divide-zinc-700",children:[u.length>0&&h.jsxs("div",{className:"p-4",children:[h.jsx("h4",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-3",children:"Pending Join Requests"}),h.jsx("div",{className:"space-y-3",children:u.map(R=>h.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[h.jsx("div",{className:"flex items-start justify-between",children:h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:R.display_name||R.username}),h.jsxs("p",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:['wants to join \\"',R.group_name,'\\"']}),R.message&&h.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1 italic",children:['\\"',R.message,'\\"']}),h.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:vs(new Date(R.created_at),{addSuffix:!0})})]})}),h.jsxs("div",{className:"flex space-x-2 mt-3",children:[h.jsx("button",{onClick:()=>z(R.id,!0),disabled:g===R.id,className:"flex-1 px-3 py-1.5 bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white text-xs rounded transition-colors",children:g===R.id?"Processing...":"Approve"}),h.jsx("button",{onClick:()=>z(R.id,!1),disabled:g===R.id,className:"flex-1 px-3 py-1.5 bg-red-600 hover:bg-red-700 disabled:opacity-50 text-white text-xs rounded transition-colors",children:"Deny"})]})]},R.id))})]}),i.map(R=>h.jsx("div",{className:`p-4 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors ${R.is_read?"opacity-75":""}`,children:h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:`flex-shrink-0 ${$(R.notification_type)}`,children:q(R.notification_type)}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:R.title}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:R.message}),h.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-2",children:vs(new Date(R.created_at),{addSuffix:!0})})]}),!R.is_read&&h.jsx("button",{onClick:()=>B(R.id),className:"ml-2 p-1 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-600 rounded transition-colors",title:"Mark as read",children:h.jsx(Im,{className:"w-4 h-4"})})]})})]})},R.id))]})}),D>0&&h.jsx("div",{className:"p-3 border-t border-zinc-200 dark:border-zinc-700 text-center",children:h.jsx("button",{onClick:()=>{i.forEach(R=>{R.is_read||B(R.id)})},className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 transition-colors",children:"Mark all as read"})})]})}):null},yw=()=>{const[l,a]=S.useState("direct"),[r,i]=S.useState(!1),[c,u]=S.useState(!1),[f,m]=S.useState(0),[p,g]=S.useState(null),[y,x]=S.useState(!1),[w,E]=S.useState(0);S.useState(0),S.useState({});const{user:T,isOperator:B,canAccessGroups:z,logout:q}=wt();S.useEffect(()=>{const L=async()=>{const{data:V,error:Z}=await J.from("users_v2").select("last_active");if(Z)console.error("Error fetching users:",Z);else{const F=(V||[]).filter(oe=>new Date(oe.last_active).getTime()>Date.now()-3e5).length;m(F)}};L();const P=J.channel("users_realtime").on("postgres_changes",{event:"*",schema:"public",table:"users_v2"},()=>{L()}).subscribe();return()=>{J.removeChannel(P)}},[]),S.useEffect(()=>{const L=Math.floor(Math.random()*5);E(L)},[l]);const $=L=>{a(L),u(!1),L!=="group-chat"&&g(null)},U=L=>{g(L),a("group-chat"),u(!1)},D=()=>{a("groups"),g(null)},R=()=>{q()},Q=()=>{switch(l){case"direct":return h.jsx(gm,{});case"pinned":return h.jsx(hw,{});case"settings":return h.jsx(gw,{});case"groups":return h.jsx(pm,{onGroupSelect:U});case"group-chat":return p?h.jsx(pw,{context:"group",group:p,onBack:D}):h.jsx(pm,{onGroupSelect:U});default:return h.jsx(gm,{})}};return h.jsxs("div",{className:"h-screen flex bg-zinc-100 dark:bg-zinc-900 transition-colors duration-300",children:[c&&h.jsx("div",{className:"fixed inset-0 bg-black/30 lg:hidden z-20",onClick:()=>u(!1)}),h.jsx("div",{className:`fixed inset-y-0 left-0 z-30 transition-all duration-300 ease-in-out ${c?"translate-x-0":"-translate-x-full"} ${r?"w-20":"w-64"} lg:translate-x-0 lg:static lg:inset-0`,children:h.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-800 border-r border-zinc-200 dark:border-zinc-700",children:[h.jsxs("div",{className:`flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-700 ${r?"px-2":"px-4"}`,children:[!r&&h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-indigo-500 to-blue-500 rounded-lg flex items-center justify-center shadow-md",children:h.jsx(ul,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-lg font-bold text-zinc-800 dark:text-white",children:"OpenChat"}),h.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"GenrecAI"})]})]}),r&&h.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-indigo-500 to-blue-500 rounded-lg flex items-center justify-center mx-auto shadow-md",children:h.jsx(ul,{className:"w-5 h-5 text-white"})}),h.jsx("button",{onClick:()=>i(!r),className:"hidden lg:flex p-1.5 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors",children:h.jsx(__,{className:`w-5 h-5 text-zinc-500 transition-transform duration-300 ${r?"rotate-180":""}`})}),h.jsx("button",{onClick:()=>u(!1),className:"lg:hidden p-1.5 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors",children:h.jsx(Nu,{className:"w-5 h-5 text-zinc-500"})})]}),h.jsxs("nav",{className:"flex-1 p-2 space-y-1.5",children:[h.jsx(il,{icon:h.jsx(ul,{size:20}),text:"Direct Chat",active:l==="direct",collapsed:r,onClick:()=>$("direct")}),z()&&h.jsx(il,{icon:h.jsx(Cr,{size:20}),text:"Groups",active:l==="groups"||l==="group-chat",collapsed:r,onClick:()=>$("groups"),badge:p?p.name:void 0}),h.jsx(il,{icon:h.jsx(fs,{size:20}),text:"Pinned Messages",active:l==="pinned",collapsed:r,onClick:()=>$("pinned")}),h.jsx(il,{icon:h.jsx(zr,{size:20}),text:"Settings",active:l==="settings",collapsed:r,onClick:()=>$("settings")})]}),h.jsx("div",{className:"p-2 border-t border-zinc-200 dark:border-zinc-700",children:h.jsxs("div",{className:`flex items-center w-full p-2 rounded-lg ${r?"justify-center":"space-x-3"} transition-all`,children:[h.jsxs("div",{className:"relative flex-shrink-0",children:[h.jsx("div",{className:"w-10 h-10 bg-zinc-200 dark:bg-zinc-600 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-zinc-700 dark:text-zinc-200 font-semibold",children:T?.username?.charAt(0)?.toUpperCase()})}),h.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white dark:border-zinc-800 rounded-full"})]}),!r&&h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-white truncate",children:T?.username}),h.jsx("button",{onClick:R,className:"p-1.5 text-zinc-500 hover:text-zinc-800 dark:hover:text-white rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors",children:h.jsx(H_,{size:16})})]}),B&&h.jsxs("div",{className:"flex items-center space-x-1 text-xs text-amber-600 dark:text-amber-400 font-medium",children:[h.jsx(ps,{size:12}),h.jsx("span",{children:"Operator"})]})]})]})})]})}),h.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[h.jsxs("header",{className:"flex items-center justify-between bg-white dark:bg-zinc-800 border-b border-zinc-200 dark:border-zinc-700 px-4 sm:px-6 h-16 flex-shrink-0",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>u(!c),className:"lg:hidden p-2 bg-zinc-100 dark:bg-zinc-700 rounded-md hover:bg-zinc-200 dark:hover:bg-zinc-600 transition-colors",children:h.jsx(K_,{size:20})}),h.jsxs("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-white",children:[l==="direct"&&"Direct Chat",l==="groups"&&"Groups",l==="group-chat"&&(p?p.name:"Group Chat"),l==="pinned"&&"Pinned Messages",l==="settings"&&"Settings"]})]}),h.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[h.jsxs("button",{onClick:()=>x(!0),className:"relative p-2 text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-lg transition-colors",title:"Notifications",children:[h.jsx(fu,{className:"w-5 h-5"}),w>0&&h.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-medium",children:w>9?"9+":w})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),h.jsxs("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:[f," Online"]})]})]})]}),h.jsx("main",{className:"flex-1 overflow-y-auto",children:Q()})]}),h.jsx(vw,{isOpen:y,onClose:()=>x(!1)})]})},il=({icon:l,text:a,active:r,collapsed:i,onClick:c,badge:u})=>h.jsxs("button",{onClick:c,className:`w-full flex items-center p-2.5 rounded-md text-sm font-medium transition-all duration-200 ${r?"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/50 dark:text-indigo-300 shadow-sm":"text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900 dark:text-zinc-400 dark:hover:bg-zinc-700 dark:hover:text-zinc-200"} ${i?"justify-center":"space-x-3"}`,title:i?a:void 0,children:[h.jsx("div",{className:"flex-shrink-0",children:l}),!i&&h.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[h.jsx("span",{className:"text-left",children:a}),u&&h.jsx("span",{className:"text-xs px-2 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded-full truncate max-w-20",children:u})]})]}),bw=()=>{const[l,a]=S.useState("loading"),[r,i]=S.useState("Processing Google authentication..."),[c,u]=S.useState(""),[f,m]=S.useState(!1),{handleGoogleCallback:p}=wt(),g=vu();return S.useEffect(()=>{if(f)return;const y=async()=>{try{console.log(" Starting Google callback processing..."),m(!0),a("loading"),i("Verifying your Google account..."),u("Checking OAuth session...");const E=await p();console.log(" Callback result:",E),E.success?(console.log(" Authentication successful"),a("success"),i("Successfully signed in with Google!"),u(`Welcome ${E.data?.display_name||E.data?.username}!`),setTimeout(()=>{g("/chat",{replace:!0})},1e3)):(console.error(" Authentication failed:",E.error),a("error"),i(E.error||"Failed to authenticate with Google"),u(E.error||"Unknown error occurred"),m(!1))}catch(E){console.error(" Unexpected error in callback:",E),a("error"),i("An unexpected error occurred during authentication"),u(`Error: ${E.message||E}`),m(!1)}},x=setTimeout(()=>{l==="loading"&&!f&&(console.error(" Callback processing timed out"),a("error"),i("Authentication process timed out"),u("The authentication process took too long. Please try again."),m(!1))},15e3),w=setTimeout(y,100);return()=>{clearTimeout(w),clearTimeout(x)}},[p,g,f]),h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50 dark:from-zinc-900 dark:via-zinc-800 dark:to-zinc-900 flex items-center justify-center p-4",children:h.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-zinc-800 rounded-2xl shadow-xl border border-zinc-200 dark:border-zinc-700 p-8",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2",children:"Google Authentication"}),h.jsx("p",{className:"text-zinc-600 dark:text-zinc-400",children:"Completing your sign-in process"})]}),h.jsxs("div",{className:"text-center",children:[l==="loading"&&h.jsxs("div",{className:"space-y-6",children:[h.jsx(L_,{className:"w-12 h-12 text-indigo-600 animate-spin mx-auto"}),h.jsx("p",{className:"text-lg font-medium text-zinc-900 dark:text-white",children:r}),c&&h.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:c})]}),l==="success"&&h.jsxs("div",{className:"space-y-6",children:[h.jsx(j_,{className:"w-12 h-12 text-green-600 mx-auto"}),h.jsx("p",{className:"text-lg font-medium text-zinc-900 dark:text-white",children:r}),h.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Redirecting you to the chat..."}),h.jsx("button",{onClick:()=>g("/chat",{replace:!0}),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Continue to Chat"})]}),l==="error"&&h.jsxs("div",{className:"space-y-6",children:[h.jsx(E_,{className:"w-12 h-12 text-red-600 mx-auto"}),h.jsx("p",{className:"text-lg font-medium text-zinc-900 dark:text-white",children:"Authentication Failed"}),h.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:r}),c&&h.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded",children:["Debug: ",c]}),h.jsx("button",{onClick:()=>g("/login",{replace:!0}),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Back to Login"})]})]})]})})},xw=({children:l})=>{const{isAuthenticated:a,user:r}=wt();return console.log(" ProtectedRoute - isAuthenticated:",a,"user:",r?.username),a?(console.log(" Authenticated, rendering protected content"),h.jsx(h.Fragment,{children:l})):(console.log(" Not authenticated, redirecting to login"),h.jsx(ll,{to:"/login",replace:!0}))},_w=()=>{const{user:l}=wt();return S.useEffect(()=>{l?.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[l?.theme]),null},ww=()=>{const{isAuthenticated:l,user:a}=wt();return console.log(" App - isAuthenticated:",l,"user:",a?.username),h.jsxs(h.Fragment,{children:[h.jsx(_w,{}),h.jsxs(jy,{children:[h.jsx(cs,{path:"/login",element:l?h.jsx(ll,{to:"/chat",replace:!0}):h.jsx(b1,{})}),h.jsx(cs,{path:"/auth/callback",element:h.jsx(bw,{})}),h.jsx(cs,{path:"/chat",element:h.jsx(xw,{children:h.jsx(yw,{})})}),h.jsx(cs,{path:"/",element:h.jsx(ll,{to:l?"/chat":"/login",replace:!0})}),h.jsx(cs,{path:"*",element:h.jsx(ll,{to:l?"/chat":"/login",replace:!0})})]})]})},Sw=()=>(S.useEffect(()=>(hs.start(),()=>{hs.stop()}),[]),h.jsx(u_,{children:h.jsx(Ky,{children:h.jsx(o_,{children:h.jsx("div",{className:"App",children:h.jsx(ww,{})})})})}));Mv.createRoot(document.getElementById("root")).render(h.jsx(S.StrictMode,{children:h.jsx(Sw,{})}));
